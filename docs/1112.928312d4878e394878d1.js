(()=>{var e,t,n={28480:(e,t,n)=>{"use strict";var s={};n.r(s),n.d(s,{Type:()=>va,clear:()=>Ta,fetch:()=>Ca,isCacheApiSupported:()=>Sa,remove:()=>Ma,save:()=>Pa});var i={};n.r(i),n.d(i,{abortChatRequests:()=>eo,abortRequestGroup:()=>to,acceptBotUrlAuth:()=>Mo,acceptCall:()=>Xo,acceptLinkUrlAuth:()=>Bo,acceptPhoneCall:()=>Ep,activateStealthMode:()=>ef,addChatMembers:()=>Vr,allowBotSendMessages:()=>Uo,answerCallbackButton:()=>uo,applyBoost:()=>vf,applyGiftCode:()=>Bf,blockUser:()=>Ju,broadcastLocalDbUpdateFull:()=>Ee,changeSessionSettings:()=>bd,changeSessionTtl:()=>Sd,checkChatUsername:()=>Iu,checkChatlistInvite:()=>rd,checkGiftCode:()=>Tf,checkPassword:()=>El,checkUsername:()=>Fu,clearPassword:()=>xl,clearRecentReactions:()=>$l,clearRecentStickers:()=>eu,clickSponsoredMessage:()=>mc,closePoll:()=>tc,confirmCall:()=>er,confirmPhoneCall:()=>Dp,createChalistInvite:()=>ld,createChannel:()=>pr,createGroupCall:()=>Vo,createGroupChat:()=>yr,createPhoneCallState:()=>Bp,createTopic:()=>td,deactivateAllUsernames:()=>Su,decodePhoneCallData:()=>kp,deleteChannel:()=>Ar,deleteChat:()=>mr,deleteChatFolder:()=>Mr,deleteChatMember:()=>zr,deleteChatUser:()=>hr,deleteChatlistInvite:()=>pd,deleteContact:()=>qc,deleteExportedChatInvite:()=>Tu,deleteHistory:()=>jd,deleteMessages:()=>qd,deleteProfilePhotos:()=>Lu,deleteRevokedExportedChatInvites:()=>Bu,deleteSavedHistory:()=>Ld,deleteScheduledMessages:()=>Od,deleteStory:()=>jp,deleteTopic:()=>id,destroy:()=>za,destroyPhoneCallState:()=>Rp,discardCall:()=>$o,discardGroupCall:()=>Go,disconnect:()=>Wa,downloadMedia:()=>Ya,editChatFolder:()=>Pr,editChatPhoto:()=>wr,editChatlistInvite:()=>fd,editExportedChatInvite:()=>Pu,editGroupCallParticipant:()=>Fo,editGroupCallTitle:()=>_o,editMessage:()=>Nd,editStoryPrivacy:()=>$p,editTopic:()=>od,encodePhoneCallData:()=>Up,exportChatInvite:()=>Mu,exportGroupCallInvite:()=>qo,exportMessageLink:()=>Tc,faveSticker:()=>Zc,fetchAllStories:()=>Np,fetchAnimatedEmojiEffects:()=>iu,fetchAnimatedEmojis:()=>su,fetchAppConfig:()=>yl,fetchAuthorizations:()=>$u,fetchAvailableEffects:()=>jl,fetchAvailableReactions:()=>Ol,fetchBlockedUsers:()=>Wu,fetchBoostList:()=>Pf,fetchBoostStatus:()=>Cf,fetchBotApp:()=>yo,fetchBotCanSendMessage:()=>Ro,fetchChannelRecommendations:()=>Ad,fetchChannelStatistics:()=>cp,fetchChat:()=>rr,fetchChatFolders:()=>vr,fetchChatInviteImporters:()=>Ru,fetchChatSettings:()=>ar,fetchChatlistInvites:()=>hd,fetchChats:()=>nr,fetchCollectionInfo:()=>xf,fetchCommonChats:()=>Ec,fetchConfig:()=>wl,fetchContactList:()=>Hc,fetchContentSettings:()=>gl,fetchCountryList:()=>vl,fetchCurrentUser:()=>no,fetchCustomEmoji:()=>nu,fetchCustomEmojiSets:()=>Wc,fetchDefaultStatusEmojis:()=>du,fetchDefaultTagReactions:()=>Ql,fetchDefaultTopicIcons:()=>ru,fetchDiscussionMessage:()=>Qd,fetchEmojiKeywords:()=>gu,fetchExportedChatInvites:()=>Cu,fetchExtendedMedia:()=>sc,fetchFactChecks:()=>$d,fetchFavoriteStickers:()=>$c,fetchFeaturedEmojiStickers:()=>Yc,fetchFeaturedStickers:()=>Qc,fetchFullChat:()=>ir,fetchFullUser:()=>Dc,fetchGenericEmojiEffects:()=>au,fetchGiveawayInfo:()=>Mf,fetchGlobalPrivacySettings:()=>Cl,fetchGroupCallParticipants:()=>Oo,fetchGroupStatistics:()=>up,fetchGroupsForDiscussion:()=>qr,fetchInlineBot:()=>po,fetchInlineBotResults:()=>fo,fetchLangDifference:()=>ol,fetchLangPack:()=>al,fetchLanguage:()=>dl,fetchLanguages:()=>rl,fetchLeaveChatlistSuggestions:()=>cd,fetchMembers:()=>_r,fetchMessage:()=>kd,fetchMessagePublicForwards:()=>pp,fetchMessageReactions:()=>Vl,fetchMessageReactionsList:()=>zl,fetchMessageStatistics:()=>lp,fetchMessageViews:()=>Kd,fetchMessages:()=>Ud,fetchMyBoosts:()=>Sf,fetchNearestCountry:()=>xc,fetchNotificationExceptions:()=>tl,fetchNotificationSettings:()=>nl,fetchOutboxReadDate:()=>Cc,fetchPeerColors:()=>Il,fetchPeerProfileStories:()=>Gp,fetchPeerStories:()=>Hp,fetchPeerStoriesByIds:()=>_p,fetchPinnedMessages:()=>cc,fetchPremiumGifts:()=>ou,fetchPremiumPromo:()=>If,fetchPrivacySettings:()=>ll,fetchProfilePhotos:()=>Oc,fetchQuickReplies:()=>Pc,fetchRecentEmojiStatuses:()=>Au,fetchRecentReactions:()=>Kl,fetchRecentStickers:()=>Kc,fetchRecommendedChatFolders:()=>Cr,fetchSavedChats:()=>sr,fetchSavedGifs:()=>uu,fetchSavedReactionTags:()=>Yl,fetchScheduledHistory:()=>oc,fetchSeenBy:()=>uc,fetchSendAs:()=>lc,fetchSponsoredMessages:()=>fc,fetchStarsStatus:()=>kf,fetchStarsTopupOptions:()=>Ef,fetchStarsTransactions:()=>Df,fetchStatisticsAsyncGraph:()=>fp,fetchStickerSets:()=>Jc,fetchStickers:()=>tu,fetchStickersForEmoji:()=>mu,fetchStoriesArchive:()=>Fp,fetchStoriesMaxIds:()=>Yp,fetchStoriesViews:()=>Wp,fetchStoryLink:()=>Jp,fetchStoryPublicForwards:()=>mp,fetchStoryStatistics:()=>hp,fetchStoryViewList:()=>zp,fetchTemporaryPaymentPassword:()=>bf,fetchTimezones:()=>bl,fetchTopInlineBots:()=>lo,fetchTopReactions:()=>Jl,fetchTopUsers:()=>Nc,fetchTopicById:()=>sd,fetchTopics:()=>nd,fetchUnreadMentions:()=>yc,fetchUnreadReactions:()=>wc,fetchUsers:()=>Gc,fetchWallpapers:()=>Vu,fetchWebAuthorizations:()=>Zu,fetchWebPagePreview:()=>Xd,findFirstMessageIdAfterDate:()=>ac,forwardMessages:()=>ic,getChatByPhoneNumber:()=>Rr,getChatByUsername:()=>Ur,getDhConfig:()=>Ko,getGroupCall:()=>Ho,getPasswordInfo:()=>kl,getPaymentForm:()=>yf,getPremiumGiftCodeOptions:()=>Rf,getReceipt:()=>wf,hideAllChatJoinRequests:()=>ku,hideChatJoinRequest:()=>Uu,hideChatReportPanel:()=>Du,importChatInvite:()=>Qr,importContact:()=>Fc,installStickerSet:()=>pu,invokeWebViewCustomMethod:()=>ko,joinChannel:()=>fr,joinChatlistInvite:()=>dd,joinGroupCall:()=>Lo,joinGroupCallPresentation:()=>zo,launchPrepaidGiveaway:()=>Uf,leaveChannel:()=>gr,leaveChatlist:()=>ud,leaveGroupCall:()=>jo,leaveGroupCallPresentation:()=>Jo,loadAttachBot:()=>vo,loadAttachBots:()=>So,loadPollOptionResults:()=>nc,markMessageListRead:()=>Wd,markMessagesRead:()=>Jd,markStoryRead:()=>Op,migrateChat:()=>jr,oldFetchLangPack:()=>cl,oldFetchLangStrings:()=>ul,openChatByInvite:()=>Lr,pinMessage:()=>Fd,prolongWebView:()=>Io,provideAuthCode:()=>Gi,provideAuthPassword:()=>Fi,provideAuthPhoneNumber:()=>Hi,provideAuthRegistration:()=>_i,provideRecoveryEmailCode:()=>Gl,readAllMentions:()=>gc,readAllReactions:()=>Ac,receivedCall:()=>Zo,registerDevice:()=>pl,removeRecentSticker:()=>Xc,reorderUsernames:()=>Tl,repairFileReference:()=>so,reportMessages:()=>Vd,reportPeer:()=>wd,reportProfilePhoto:()=>Id,reportSpam:()=>jc,reportSponsoredMessage:()=>yd,reportStory:()=>Kp,requestAppWebView:()=>wo,requestBotUrlAuth:()=>Po,requestCall:()=>Qo,requestChannelDifference:()=>ro,requestChatUpdate:()=>dr,requestLinkUrlAuth:()=>To,requestPhoneCall:()=>xp,requestSimpleWebView:()=>Ao,requestWebView:()=>go,rescheduleMessage:()=>Hd,resolveBusinessChatLink:()=>vd,restartAuth:()=>qi,restartAuthWithQr:()=>Oi,saveCloseFriends:()=>Vc,saveDefaultSendAs:()=>pc,saveDraft:()=>cr,saveGif:()=>lu,searchChats:()=>or,searchGifs:()=>hu,searchMessagesGlobal:()=>Zd,searchMessagesLocal:()=>Yd,searchStickers:()=>cu,sendEmojiInteraction:()=>ql,sendInlineBotResult:()=>ho,sendMessage:()=>Ed,sendMessageAction:()=>zd,sendPaymentForm:()=>gf,sendPollVote:()=>ec,sendQuickReply:()=>Mc,sendReaction:()=>Ll,sendScheduledMessages:()=>rc,sendSignalingData:()=>tr,sendStarPaymentForm:()=>Af,sendStoryReaction:()=>Xp,sendWatchingEmojiInteraction:()=>_l,sendWebViewData:()=>bo,setAllowHttpTransport:()=>ao,setBotInfo:()=>Do,setCallRating:()=>Yo,setChatEnabledReactions:()=>Yr,setChatUsername:()=>bu,setDefaultReaction:()=>Wl,setDiscussionGroup:()=>Or,setForceHttpTransport:()=>io,setPrivacySettings:()=>hl,setShouldDebugExportedSenders:()=>oo,setViewForumAsMessages:()=>gd,sortChatFolders:()=>Tr,startBot:()=>mo,terminateAllAuthorizations:()=>Yu,terminateAllWebAuthorizations:()=>el,terminateAuthorization:()=>Qu,terminateWebAuthorization:()=>Xu,toggleAttachBot:()=>Co,toggleChatArchived:()=>Sr,toggleChatPinned:()=>Ir,toggleDialogUnread:()=>Br,toggleForum:()=>ed,toggleGroupCallStartSubscription:()=>Wo,toggleIsProtected:()=>Zr,toggleJoinRequest:()=>Jr,toggleJoinToSend:()=>Wr,toggleParticipantsHidden:()=>Xr,togglePeerTranslations:()=>md,togglePinnedTopic:()=>ad,togglePreHistoryHidden:()=>Dr,toggleSavedDialogPinned:()=>br,toggleSignatures:()=>Fr,toggleSponsoredMessages:()=>Cd,toggleStoriesHidden:()=>Qp,toggleStoryInProfile:()=>Lp,toggleStoryPinnedToTop:()=>Vp,toggleUsername:()=>Ml,transcribeAudio:()=>Ic,translateText:()=>bc,unblockUser:()=>Ku,uninstallStickerSet:()=>fu,unpinAllMessages:()=>_d,unregisterDevice:()=>fl,updateChatAbout:()=>Gr,updateChatAdmin:()=>Nr,updateChatDefaultBannedRights:()=>Er,updateChatMemberBannedRights:()=>xr,updateChatMutedState:()=>ur,updateChatTitle:()=>Hr,updateContact:()=>_c,updateContactSignUpNotification:()=>sl,updateContentSettings:()=>Al,updateEmojiStatus:()=>Lc,updateGlobalPrivacySettings:()=>Pl,updateIsOnline:()=>ml,updateNotificationSettings:()=>il,updatePassword:()=>Nl,updatePrivateLink:()=>vu,updateProfile:()=>Gu,updateProfilePhoto:()=>qu,updateRecoveryEmail:()=>Hl,updateSavedReactionTag:()=>Zl,updateTopicMutedState:()=>lr,updateUsername:()=>_u,uploadContactProfilePhoto:()=>ju,uploadProfilePhoto:()=>Ou,uploadWallpaper:()=>zu,validateRequestedInfo:()=>mf,viewSponsoredMessage:()=>hc,viewStory:()=>qp});const a="A",o=!1,r=!1,d=!1,c="https://telegram-a-host",u=!1,l="tt-media",p="tt-media-avatars",f=524288,h=16,m=16,g=("undefined"!=typeof window&&window.innerHeight,20),A=200,y=50,w=100,I=100,b=100,S=100,v=100,C=50,P=100,M=50,T=100,B=100,R=100,U=20,k=3e5,D=2**31-1,E=Math.round(450),x=new Set(["newMessage","newScheduledMessage","deleteMessages","deleteScheduledMessages","deleteHistory","updateThreadInfos"]),N=20,H=20,G="status-default-icon",F="video/webm",_="image/gif",q="application/x-tgsticker",O=F,j=new Set(["image/png","image/jpeg",_]),L=new Set(["video/mp4","video/quicktime"]),V=new Set(["audio/mp3","audio/ogg","audio/wav","audio/mpeg","audio/flac","audio/aac","audio/m4a","audio/mp4","audio/x-m4a"]),z=(new Set([...j,...L]),new Set(["t.me","web.t.me","a.t.me","k.t.me","z.t.me"]),"weba"),W=(new Set(["AU","BD","CA","CO","EG","HN","IE","IN","JO","MX","MY","NI","NZ","PH","PK","SA","SV","US"]),"777000"),J=14,K="gif",$=0,Q=1,Y="-1000000000777",Z="android",X=1,ee=86400,te=86400,ne=11,se={uploadMaxFileparts:[4e3,8e3],stickersFaved:[5,10],savedGifs:[200,400],dialogFiltersChats:[100,200],dialogFilters:[10,20],dialogFolderPinned:[5,10],captionLength:[1024,2048],channels:[500,1e3],channelsPublic:[10,20],aboutLength:[70,140],chatlistInvites:[3,100],chatlistJoined:[2,20],recommendedChannels:[10,100],savedDialogsPinned:[5,100]},ie="My TON address is: ",ae=`I want to send you TON. Please provide your wallet address in a reply message in this format:\n\n${ie}YOUR ADDRESS\n\nMore about TON + Telegram integration: https://telegra.ph/Telegram--TON-11-10`,oe=["log","error","warn","info","debug"];function re(e,t){let n,s,i,a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return function(){s=!0;for(var o=arguments.length,r=new Array(o),d=0;d<o;d++)r[d]=arguments[d];i=r,n||(a&&(s=!1,e(...i)),n=self.setInterval((()=>{if(!s)return self.clearInterval(n),void(n=void 0);s=!1,e(...i)}),t))}}function de(e){return function(e,t){let n,s=!1;return function(){for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];n=a,s||(s=!0,e((()=>{s=!1,t(...n)})))}}(le,e)}oe.reduce(((e,t)=>(e[t]=console[t],e)),{});const ce=e=>new Promise((t=>{setTimeout((()=>t()),e)}));let ue;function le(e){ue?ue.push(e):(ue=[e],Promise.resolve().then((()=>{const e=ue;ue=void 0,e.forEach((e=>e()))})))}var pe=n(45174);function fe(e){return e.hasOwnProperty("userId")}function he(e){return e.hasOwnProperty("chatId")}function me(e,t){return"user"===t?e.toString():"channel"===t?`-1${e.toString().padStart(J-2,"0")}`:`-${e}`}function ge(e){return fe(e)?me(e.userId,"user"):he(e)?me(e.chatId,"chat"):me(e.channelId,"channel")}function Ae(e){const{color:t,backgroundEmojiId:n}=e;return{color:t,backgroundEmojiId:n?.toString()}}function ye(e){return e instanceof pe.Api.EmojiStatus?{documentId:e.documentId.toString()}:e instanceof pe.Api.EmojiStatusUntil?{documentId:e.documentId.toString(),until:e.until}:void 0}var we=n(92096),Ie=n.n(we),be=n(43355);function Se(e){return`${arguments.length>1&&void 0!==arguments[1]&&arguments[1]?"":`data:${arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/jpeg"};base64,`}${btoa(String.fromCharCode(...e))}`}function ve(e){const{flags:t,CONSTRUCTOR_ID:n,SUBCLASS_OF_ID:s,className:i,classType:a,getBytes:o,...r}=e;return r}var Ce=n(48287).hp;const Pe="BroadcastChannel"in self,Me=Pe?new BroadcastChannel("tt-global"):void 0;let Te=[];const Be=re((()=>{Me.postMessage({type:"localDbUpdate",batchedUpdates:Te}),Te=[]}),100);function Re(e){if(e instanceof Uint8Array)return Ce.from(e);if("object"==typeof e&&1===Object.keys(e).length&&"value"===Object.keys(e)[0])return Ie()(e.value);if(Array.isArray(e))return e.map(Re);if("object"!=typeof e||!("CONSTRUCTOR_ID"in e))return e;const t=e.className.split(".").reduce(((e,t)=>e[t]),be.constructors),n=ve(e);return new t(Object.keys(n).reduce(((e,t)=>(e[t]=Re(n[t]),e)),{}))}function Ue(e){return["localMessages","chats","users","messages","documents","stickerSets","photos","webDocuments","stories","commonBoxState","channelPtsById"].reduce(((t,n)=>{const s=e?.[n]??{},i=Object.keys(s).reduce(((e,t)=>{if("commonBoxState"===n||"channelPtsById"===n){const n=s;return e[t]=n[t],e}return e[t]=Re(s[t]),e}),{});var a;return t[n]=Pe?(a=n,new Proxy(i,{get:(e,t,n)=>Reflect.get(e,t,n),set:(e,t,n)=>(Te.push({name:a,prop:t,value:n}),Be(),Reflect.set(e,t,n))})):i,t}),{})}const ke=Ue(),De=ke;function Ee(){Me&&Me.postMessage({type:"localDbUpdateFull",localDb:Object.keys(ke).reduce(((e,t)=>(e[t]={...ke[t]},e)),{})})}d&&(globalThis.getLocalDb=()=>ke);var xe=n(48287).hp;const Ne="#111111DD",He="#E4D00A",Ge={INVOKE:"#49DBF5",BEACON:"#F549DB",RESPONSE:"#6887F7",CONNECTING:"#E4D00A",CONNECTED:"#26D907","CONNECTING ERROR":"#D1191C","INVOKE ERROR":"#D1191C",UPDATE:"#0DD151","UNEXPECTED UPDATE":"#9C9C9C","UNEXPECTED RESPONSE":"#D1191C"};function Fe(e){if(e instanceof pe.Api.Message||e instanceof pe.Api.MessageService)return ge(e.peerId)}function _e(e){return e instanceof pe.Api.DialogFilter||e instanceof pe.Api.DialogFilterChatlist}function qe(e){e instanceof pe.Api.Message&&(e.media&&Oe(e.media,e),e.replyTo instanceof pe.Api.MessageReplyHeader&&e.replyTo.replyMedia&&Oe(e.replyTo.replyMedia,e)),e instanceof pe.Api.MessageService&&"photo"in e.action&&Le(We(e.action.photo,e)),e instanceof pe.Api.SponsoredMessage&&e.photo&&Le(e.photo)}function Oe(e,t){e instanceof pe.Api.MessageMediaDocument&&e.document&&Ve(We(e.document,t)),e instanceof pe.Api.MessageMediaWebPage&&e.webpage instanceof pe.Api.WebPage&&(e.webpage.document&&Ve(We(e.webpage.document,t)),e.webpage.photo&&Le(We(e.webpage.photo,t))),e instanceof pe.Api.MessageMediaGame&&(e.game.document&&Ve(We(e.game.document,t)),Le(We(e.game.photo,t))),e instanceof pe.Api.MessageMediaPhoto&&e.photo&&Le(We(e.photo,t)),e instanceof pe.Api.MessageMediaInvoice&&(e.photo&&$e(We(e.photo,t)),e.extendedMedia instanceof pe.Api.MessageExtendedMedia&&Oe(e.extendedMedia.media,t)),e instanceof pe.Api.MessageMediaPaidMedia&&e.extendedMedia.forEach((e=>{e instanceof pe.Api.MessageExtendedMedia&&Oe(e.media,t)}))}function je(e,t){e instanceof pe.Api.StoryItem&&(e.media instanceof pe.Api.MessageMediaPhoto&&e.media.photo&&Le(ze(e.media.photo,t,e)),e.media instanceof pe.Api.MessageMediaDocument&&(e.media.document instanceof pe.Api.Document&&Ve(ze(e.media.document,t,e)),e.media.altDocument instanceof pe.Api.Document&&Ve(ze(e.media.altDocument,t,e))))}function Le(e){e instanceof pe.Api.Photo&&(De.photos[String(e.id)]=e)}function Ve(e){e instanceof pe.Api.Document&&(De.documents[String(e.id)]=e)}function ze(e,t,n){if(!(e instanceof pe.Api.Document&&e instanceof pe.Api.Photo))return e;const s=e;return s.localRepairInfo={type:"story",peerId:t,id:n.id},s}function We(e,t){if(!t?.peerId)return e;if(!(e instanceof pe.Api.Document||e instanceof pe.Api.Photo||e instanceof pe.Api.WebDocument))return e;const n=e;return n.localRepairInfo={type:"message",peerId:ge(t.peerId),id:t.id},n}function Je(e){const t=me(e.id,"user"),n=De.users[t];e.photo instanceof pe.Api.Photo&&Le(e.photo),n&&!n.min&&e.min||(De.users[t]=e)}function Ke(e){e.forEach((e=>{e instanceof pe.Api.User?Je(e):(e instanceof pe.Api.Chat||e instanceof pe.Api.Channel)&&function(e){const t=me(e.id,e instanceof pe.Api.Chat?"chat":"channel"),n=De.chats[t],s=n&&"min"in n&&n.min,i="min"in e&&e.min;n&&!s&&i||(De.chats[t]=e)}(e)}))}function $e(e){De.webDocuments[e.url]=e}function Qe(e){return String.fromCharCode(...e)}function Ye(e){return xe.from(e,"binary")}function Ze(e){const t="UNEXPECTED RESPONSE"===e?console.error:"INVOKE ERROR"===e||"UNEXPECTED UPDATE"===e?console.warn:console.log;for(var n=arguments.length,s=new Array(n>1?n-1:0),i=1;i<n;i++)s[i-1]=arguments[i];t(`%cGramJS%c${e}`,`color: ${He}; background: ${Ne}; padding: 0.25rem; border-radius: 0.25rem;`,`color: ${Ge[e]}; background: ${Ne}; padding: 0.25rem; border-radius: 0.25rem; margin-left: 0.25rem;`,...s)}function Xe(e,t){return e.reduce(((e,n)=>(e[n[t]]=n,e)),{})}function et(e,t){return e.reduce(((e,n)=>{const[s,i]=t(n);return e[s]=i,e}),{})}function tt(e,t){return t.reduce(((t,n)=>(t[n]=e[n],t)),{})}function nt(e,t){return t.reduce(((t,n)=>(e[n]&&(t[n]=e[n]),t)),{})}function st(e,t){const n=new Set(t.map(String));return tt(e,Object.keys(e).filter((e=>!n.has(e))))}function it(e){return Object.keys(e).reduce(((t,n)=>{const s=n;return void 0!==e[s]&&(t[s]=e[s]),t}),{})}function at(e){return e.filter(Boolean)}function ot(e,t){const n=[];for(let s=0;s<e.length;s+=t)n.push(e.slice(s,s+t));return n}let rt=0;function dt(){return rt}function ct(){return Math.floor(Date.now()/1e3)+rt}var ut=n(56215),lt=n(97335);const pt='<?xml version="1.0" encoding="utf-8"?><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 {{width}} {{height}}" xml:space="preserve"><path fill-opacity="0.1" d="{{path}}" /></svg>',ft="AACAAAAHAAALMAAAQASTAVAAAZaacaaaahaaalmaaaqastava.az0123456789-,";const ht={w:100,h:100};function mt(e,t){if(!e||!e.length)return;const n=e.find((e=>e instanceof pe.Api.PhotoStrippedSize));if(!n)return;const s=e.filter((e=>e instanceof pe.Api.PhotoSize)),{w:i,h:a}=s.length?s[s.length-1]:ht,{bytes:o}=n;return{dataUri:Se(t&&"image/jpeg"!==t?o:(0,ut.strippedPhotoToJpg)(o),void 0,t),width:i,height:a}}function gt(e,t){const{w:n,h:s}=t;return{dataUri:`data:image/svg+xml;utf8,${i=e.bytes,a=n,o=s,pt.replace("{{path}}",function(e){let t="M";const n=e.length;for(let s=0;s<n;s++){const n=e[s];n>=192?t+=ft[n-128-64]:(n>=128?t+=",":n>=64&&(t+="-"),t+=String(63&n))}return t+="z",t}(i)).replace("{{width}}",String(a)).replace("{{height}}",String(o))}`,width:n,height:s};var i,a,o}function At(e,t){const n=e.sizes.filter((e=>e instanceof pe.Api.PhotoSize||e instanceof pe.Api.PhotoSizeProgressive)).map(wt);return{mediaType:"photo",id:String(e.id),thumbnail:mt(e.sizes),sizes:n,isSpoiler:t,date:e.date,...e.videoSizes&&{videoSizes:at(e.videoSizes.map(yt)),isVideo:!0}}}function yt(e){if(!(e instanceof pe.Api.VideoSize))return;const{videoStartTs:t,size:n,h:s,w:i,type:a}=e;return{videoStartTs:t,size:n,height:s,width:i,type:a}}function wt(e){const{w:t,h:n,type:s}=e;return{width:t,height:n,type:s}}function It(e){if(!(e.usernames||"username"in e&&e.username))return;const t=[];return"username"in e&&e.username&&t.push({username:e.username,isActive:!0,isEditable:!0}),e.usernames&&e.usernames.forEach((e=>{let{username:n,active:s,editable:i}=e;t.push({username:n,...s&&{isActive:!0},...i&&{isEditable:!0}})})),t}function bt(e){let t,n,s,i,a,o,r;const d=De.chats;return e.forEach((e=>{e instanceof pe.Api.PrivacyValueAllowAll?t||(t="everybody"):e instanceof pe.Api.PrivacyValueAllowContacts?t||(t="contacts"):e instanceof pe.Api.PrivacyValueAllowCloseFriends?t||(t="closeFriends"):e instanceof pe.Api.PrivacyValueDisallowContacts?t||(t="nonContacts"):e instanceof pe.Api.PrivacyValueDisallowAll?t||(t="nobody"):e instanceof pe.Api.PrivacyValueAllowUsers?s=e.users.map((e=>me(e,"user"))):e instanceof pe.Api.PrivacyValueDisallowUsers?a=e.users.map((e=>me(e,"user"))):e instanceof pe.Api.PrivacyValueAllowChatParticipants?i=e.chats.map((e=>{const t=me(e,"chat"),n=me(e,"channel");return d[t]?t:n})):e instanceof pe.Api.PrivacyValueDisallowChatParticipants?o=e.chats.map((e=>{const t=me(e,"chat"),n=me(e,"channel");return d[t]?t:n})):e instanceof pe.Api.PrivacyValueAllowPremium&&(r=!0)})),t||(t="nobody",n=!0),{visibility:t,isUnspecified:n,allowUserIds:s||[],allowChatIds:i||[],blockUserIds:a||[],blockChatIds:o||[],shouldAllowPremium:r}}function St(e){const{text:t,entities:n}=e;return{text:t,entities:n.map(vt)}}function vt(e){const{className:t,offset:n,length:s}=e;return e instanceof pe.Api.MessageEntityMentionName?{type:lt.C7.MentionName,offset:n,length:s,userId:me(e.userId,"user")}:e instanceof pe.Api.MessageEntityTextUrl?{type:lt.C7.TextUrl,offset:n,length:s,url:e.url}:e instanceof pe.Api.MessageEntityPre?{type:lt.C7.Pre,offset:n,length:s,language:e.language}:e instanceof pe.Api.MessageEntityCustomEmoji?{type:lt.C7.CustomEmoji,offset:n,length:s,documentId:e.documentId.toString()}:e instanceof pe.Api.MessageEntityBlockquote?{type:lt.C7.Blockquote,canCollapse:e.collapsed,offset:n,length:s}:{type:t,offset:n,length:s}}function Ct(e){if("photoId"in e)return e.photoId.toString()}function Pt(e,t,n){if(e instanceof pe.Api.DocumentEmpty)return;const{mimeType:s,videoThumbs:i}=e,a=e.attributes.find((e=>e instanceof pe.Api.DocumentAttributeSticker)),o=e.attributes.find((e=>e instanceof pe.Api.DocumentAttributeCustomEmoji));if(!a&&!o)return;const r=s===q,d=s===O,c=Boolean(o),u=c&&o.textColor,l=e.attributes.find((e=>e instanceof pe.Api.DocumentAttributeImageSize)),p=e.attributes.find((e=>e instanceof pe.Api.DocumentAttributeVideo)),f=l||p,h=a||o,m=(w=h?.stickerset,w instanceof pe.Api.InputStickerSetID?{id:String(w.id),accessHash:String(w.accessHash)}:w instanceof pe.Api.InputStickerSetShortName?{shortName:w.shortName}:{isMissing:!0}),g=h?.alt,A=Boolean(o?.free??!0)&&!n,y=e.thumbs&&e.thumbs.find((e=>e instanceof pe.Api.PhotoCachedSize));var w;if(!(s!==O||self.isWebmSupported||y||e.thumbs&&e.thumbs.find((e=>e instanceof pe.Api.PhotoSize))))return;const I=e.thumbs&&e.thumbs.find((e=>e instanceof pe.Api.PhotoPathSize)),b=y?function(e){const{w:t,h:n,bytes:s}=e;return{dataUri:Se(s,void 0,"image/webp"),width:t,height:n}}(y):I&&f?gt(I,f):void 0,{w:S,h:v}=y||f||{},C=!t&&i&&at(i?.filter((e=>e instanceof pe.Api.VideoSize))).some((e=>{let{type:t}=e;return"f"===t}));return{mediaType:"sticker",id:String(e.id),stickerSetInfo:m,emoji:g,isCustomEmoji:c,isLottie:r,isVideo:d,width:S,height:v,thumbnail:b,hasEffect:C,isFree:A,shouldUseTextColor:u}}function Mt(e){const{archived:t,installedDate:n,id:s,accessHash:i,title:a,thumbs:o,count:r,shortName:d,emojis:c,thumbDocumentId:u}=e,l=o?.some((e=>"s"===e.type)),p=o?.some((e=>"a"===e.type)),f=o?.some((e=>"v"===e.type)),h=u&&String(u),m=l||p||f||Boolean(h);return{isArchived:t,isEmoji:c,installedDate:n,id:String(s),accessHash:String(i),title:a,hasStaticThumb:l,hasAnimatedThumb:p,hasVideoThumb:f,hasThumbnail:m,thumbCustomEmojiId:h,count:r,shortName:d}}function Tt(e){const t=Mt(e.set);if(e instanceof pe.Api.StickerSetNoCovered)return t;const n=Rt(e instanceof pe.Api.StickerSetCovered?[e.cover]:e instanceof pe.Api.StickerSetMultiCovered?e.covers:e.documents);return e instanceof pe.Api.StickerSetFullCovered?{...t,stickers:n,packs:Bt(e.packs)}:{...t,covers:n}}function Bt(e){return e.reduce(((e,t)=>{let{emoticon:n,documents:s}=t;return e[n]=s.map((e=>{const t=De.documents[String(e)];if(t)return Pt(t)})).filter(Boolean),e}),{})}function Rt(e){return e.map((e=>{if(e instanceof pe.Api.Document){const t=Pt(e);if(t)return De.documents[String(e.id)]=e,t}})).filter(Boolean)}function Ut(e){let t={};if(e.media){const n="peerId"in e?e:void 0;t={...Dt(e.media,n)}}const n=e.media instanceof pe.Api.MessageMediaUnsupported;return!e.message||n||t.sticker||t.poll||t.contact||t.video?.isRound||(t={...t,text:kt(e.message,e.entities)}),t}function kt(e,t){return{text:e,...t&&{entities:t.map(vt)}}}function Dt(e,t){Oe(e,t);const n="ttlSeconds"in e?e.ttlSeconds:void 0,s=function(e){return e instanceof pe.Api.MessageMediaDocument&&(!e.document&&e.voice)}(e);if(s)return{isExpiredVoice:s};const i=function(e){return e instanceof pe.Api.MessageMediaDocument&&(!e.document&&e.round)}(e);if(i)return{isExpiredRoundVideo:i};const a=function(e){if(!(e instanceof pe.Api.MessageMediaDocument&&e.document&&e.document instanceof pe.Api.Document))return;const t=e.document.attributes.find((e=>e instanceof pe.Api.DocumentAttributeAudio));if(!t||!t.voice)return;const{duration:n,waveform:s}=t;return{mediaType:"voice",id:String(e.document.id),size:e.document.size.toJSNumber(),duration:n,waveform:s?Array.from(s):void 0}}(e);if(a)return{voice:a,ttlSeconds:n};if("round"in e&&e.round){const t=xt(e);if(t)return{video:t,ttlSeconds:n}}if(void 0!==n)return;if(e instanceof pe.Api.MessageMediaInvoice&&e.extendedMedia instanceof pe.Api.MessageExtendedMedia)return Dt(e.extendedMedia.media,t);const o=function(e){if(e instanceof pe.Api.MessageMediaDocument&&e.document&&e.document instanceof pe.Api.Document)return Pt(e.document,e.nopremium)}(e);if(o)return{sticker:o};const r=function(e){if(e instanceof pe.Api.MessageMediaPhoto&&e.photo&&e.photo instanceof pe.Api.Photo)return At(e.photo,e.spoiler)}(e);if(r)return{photo:r};const d=xt(e),c=function(e){if(e instanceof pe.Api.MessageMediaDocument&&e.altDocument instanceof pe.Api.Document&&e.altDocument.mimeType.startsWith("video"))return Et(e.altDocument,e.spoiler)}(e);if(d)return{video:d,altVideo:c};const u=function(e){if(!(e instanceof pe.Api.MessageMediaDocument&&e.document&&e.document instanceof pe.Api.Document))return;const t=e.document.attributes.find((e=>e instanceof pe.Api.DocumentAttributeAudio));if(!t||t.voice)return;const n=e.document.thumbs&&e.document.thumbs.filter((e=>e instanceof pe.Api.PhotoSize)).map((e=>wt(e)));return{mediaType:"audio",id:String(e.document.id),fileName:qt(e.document,"audio"),thumbnailSizes:n,size:e.document.size.toJSNumber(),...tt(e.document,["mimeType"]),...tt(t,["duration","performer","title"])}}(e);if(u)return{audio:u};const l=function(e){if(e instanceof pe.Api.MessageMediaDocument&&e.document)return Nt(e.document)}(e);if(l)return{document:l};const p=function(e){if(!(e instanceof pe.Api.MessageMediaContact))return;const{firstName:t,lastName:n,phoneNumber:s,userId:i}=e;return{mediaType:"contact",firstName:t,lastName:n,phoneNumber:s,userId:me(i,"user")}}(e);if(p)return{contact:p};const f=function(e){if(e instanceof pe.Api.MessageMediaPoll)return Gt(e.poll,e.results)}(e);if(f)return{poll:f};const h=_t(e);if(h)return{webPage:h};const m=function(e){if(e instanceof pe.Api.MessageMediaInvoice)return function(e){const{description:t,title:n,photo:s,test:i,totalAmount:a,currency:o,receiptMsgId:r,extendedMedia:d}=e,c=d instanceof pe.Api.MessageExtendedMediaPreview?Ot(d):void 0;return{mediaType:"invoice",title:n,text:t,photo:jt(s),receiptMsgId:r,amount:Number(a),currency:o,isTest:i,extendedMedia:c}}(e)}(e);if(m)return{invoice:m};const g=function(e){return e instanceof pe.Api.MessageMediaGeo?function(e){const t=Ht(e.geo);return t&&{mediaType:"geo",geo:t}}(e):e instanceof pe.Api.MessageMediaVenue?function(e){const{geo:t,title:n,provider:s,address:i,venueId:a,venueType:o}=e,r=Ht(t);return r&&{mediaType:"venue",geo:r,title:n,provider:s,address:i,venueId:a,venueType:o}}(e):e instanceof pe.Api.MessageMediaGeoLive?function(e){const{geo:t,period:n,heading:s}=e,i=Ht(t);return i&&{mediaType:"geoLive",geo:i,period:n,heading:s}}(e):void 0}(e);if(g)return{location:g};const A=function(e){if(e instanceof pe.Api.MessageMediaGame)return function(e){const{id:t,accessHash:n,shortName:s,title:i,description:a,photo:o,document:r}=e.game,d=o instanceof pe.Api.Photo?At(o):void 0,c=r instanceof pe.Api.Document?Nt(r):void 0;return{mediaType:"game",id:t.toString(),accessHash:n.toString(),shortName:s,title:i,description:a,photo:d,document:c}}(e)}(e);if(A)return{game:A};const y=function(e){if(!(e instanceof pe.Api.MessageMediaStory))return;const t=ge(e.peer);return{mediaType:"storyData",id:e.id,peerId:t,...e.viaMention&&{isMention:!0}}}(e);if(y)return{storyData:y};const w=function(e){if(e instanceof pe.Api.MessageMediaGiveaway)return function(e){const{channels:t,months:n,quantity:s,untilDate:i,countriesIso2:a,onlyNewSubscribers:o,prizeDescription:r}=e,d=t.map((e=>me(e,"channel")));return{mediaType:"giveaway",channelIds:d,months:n,quantity:s,untilDate:i,countries:a,isOnlyForNewSubscribers:o,prizeDescription:r}}(e)}(e);if(w)return{giveaway:w};const I=function(e){if(e instanceof pe.Api.MessageMediaGiveawayResults)return function(e){const{months:t,untilDate:n,onlyNewSubscribers:s,launchMsgId:i,unclaimedCount:a,winners:o,winnersCount:r,additionalPeersCount:d,prizeDescription:c,refunded:u,channelId:l}=e,p=o.map((e=>me(e,"user")));return{mediaType:"giveawayResults",months:t,untilDate:n,isOnlyForNewSubscribers:s,launchMessageId:i,channelId:me(l,"channel"),unclaimedCount:a,additionalPeersCount:d,isRefunded:u,prizeDescription:c,winnerIds:p,winnersCount:r}}(e)}(e);if(I)return{giveawayResults:I};const b=function(e){if(!(e instanceof pe.Api.MessageMediaPaidMedia))return;const{starsAmount:t,extendedMedia:n}=e,s=n[0]instanceof pe.Api.MessageExtendedMedia;return s?{mediaType:"paidMedia",starsAmount:t.toJSNumber(),isBought:s,extendedMedia:Lt(n)}:{mediaType:"paidMedia",starsAmount:t.toJSNumber(),extendedMedia:n.filter((e=>e instanceof pe.Api.MessageExtendedMediaPreview)).map((e=>Ot(e)))}}(e);return b?{paidMedia:b}:void 0}function Et(e,t){if(e instanceof pe.Api.DocumentEmpty)return;const{id:n,mimeType:s,thumbs:i,size:a,videoThumbs:o,attributes:r}=e;if(s===F&&!self.isWebmSupported)return;const d=r.find((e=>e instanceof pe.Api.DocumentAttributeVideo));if(!d)return;const c=r.find((e=>e instanceof pe.Api.DocumentAttributeAnimated)),u=o?.some((e=>e instanceof pe.Api.VideoSize&&"v"===e.type)),{duration:l,w:p,h:f,supportsStreaming:h=!1,roundMessage:m=!1,nosound:g}=d;return{mediaType:"video",id:String(n),mimeType:s,duration:l,fileName:qt(e,"video"),width:p,height:f,supportsStreaming:h,isRound:m,isGif:Boolean(c),thumbnail:mt(i),size:a.toJSNumber(),isSpoiler:t,hasVideoPreview:u,...g&&{noSound:!0}}}function xt(e){if(e instanceof pe.Api.MessageMediaDocument&&e.document instanceof pe.Api.Document&&e.document.mimeType.startsWith("video"))return Et(e.document,e.spoiler)}function Nt(e){if(!(e instanceof pe.Api.Document))return;const{id:t,size:n,mimeType:s,date:i,thumbs:a,attributes:o}=e,r=a&&a.find((e=>e instanceof pe.Api.PhotoSize));let d,c,u=a&&mt(a);if(!u&&a&&r){const e=a.find((e=>e instanceof pe.Api.PhotoPathSize));e&&(u=gt(e,r))}if(r)if(c={width:r.w,height:r.h},j.has(s)){d="photo";const e=o.find((e=>e instanceof pe.Api.DocumentAttributeImageSize));if(e){const{w:t,h:n}=e;c={width:t,height:n}}}else if(L.has(s)){d="video";const e=o.find((e=>e instanceof pe.Api.DocumentAttributeVideo));if(e){const{w:t,h:n}=e;c={width:t,height:n}}}return{mediaType:"document",id:String(t),size:n.toJSNumber(),mimeType:s,timestamp:i,fileName:qt(e),thumbnail:u,innerMediaType:d,mediaSize:c}}function Ht(e){if(e instanceof pe.Api.GeoPointEmpty)return;const{long:t,lat:n,accuracyRadius:s,accessHash:i}=e;return{long:t,lat:n,accessHash:i.toString(),accuracyRadius:s}}function Gt(e,t){const{id:n,answers:s}=e,i=s.map((e=>({text:St(e.text),option:Qe(e.option)})));return{mediaType:"poll",id:String(n),summary:{isPublic:e.publicVoters,question:St(e.question),...tt(e,["closed","multipleChoice","quiz","closePeriod","closeDate"]),answers:i},results:Ft(t)}}function Ft(e){const{results:t,totalVoters:n,recentVoters:s,solution:i,solutionEntities:a,min:o}=e,r=t?.map((e=>{let{option:t,chosen:n,correct:s,voters:i}=e;return{isChosen:n,isCorrect:s,option:Qe(t),votersCount:i}}));return{isMin:o,totalVoters:n,recentVoterIds:s?.map((e=>ge(e))),results:r,solution:i,...a&&{solutionEntities:a.map(vt)}}}function _t(e){if(!(e instanceof pe.Api.MessageMediaWebPage&&e.webpage instanceof pe.Api.WebPage))return;const{id:t,photo:n,document:s,attributes:i}=e.webpage;let a,o,r,d;s instanceof pe.Api.Document&&s.mimeType.startsWith("video/")&&(a=Et(s)),s instanceof pe.Api.Document&&s.mimeType.startsWith("audio/")&&(o=function(e){if(e instanceof pe.Api.DocumentEmpty)return;const{id:t,mimeType:n,size:s,attributes:i}=e,a=i.find((e=>e instanceof pe.Api.DocumentAttributeAudio));if(!a)return;const{duration:o,title:r,performer:d}=a;return{mediaType:"audio",id:String(t),mimeType:n,duration:o,fileName:qt(e,"audio"),title:r,performer:d,size:s.toJSNumber()}}(s));const c=i?.find((e=>e instanceof pe.Api.WebPageAttributeStory));if(c){const e=ge(c.peer);r={id:c.id,peerId:e},c.story instanceof pe.Api.StoryItem&&je(c.story,e)}const u=i?.find((e=>e instanceof pe.Api.WebPageAttributeStickerSet));return u&&(d={documents:Rt(u.stickers),isEmoji:u.emojis,isWithTextColor:u.textColor}),{mediaType:"webpage",id:Number(t),...tt(e.webpage,["url","displayUrl","type","siteName","title","description","duration"]),photo:n instanceof pe.Api.Photo?At(n):void 0,document:a||o||!s?void 0:Nt(s),video:a,audio:o,story:r,stickers:d}}function qt(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"file";const{mimeType:n,attributes:s}=e,i=s.find((e=>e instanceof pe.Api.DocumentAttributeFilename));if(i)return i.fileName;const a=n.split("/")[1];return`${t}${String(e.id)}.${a}`}function Ot(e){const{w:t,h:n,thumb:s,videoDuration:i}=e;return{mediaType:"extendedMediaPreview",width:t,height:n,duration:i,thumbnail:s?mt([s]):void 0}}function jt(e){if(!e)return;const{url:t,size:n,mimeType:s}=e,i=e instanceof pe.Api.WebDocument?e.accessHash.toString():void 0,a=e.attributes.find((e=>e instanceof pe.Api.DocumentAttributeImageSize));return{mediaType:"webDocument",url:t,accessHash:i,size:n,mimeType:s,dimensions:a&&{width:a.w,height:a.h}}}function Lt(e){const t=e.filter((e=>e instanceof pe.Api.MessageExtendedMedia)).map((e=>Dt(e.media))).filter(Boolean);if(t.length)return t}function Vt(e){return{id:e.botId.toString(),shouldRequestWriteAccess:e.requestWriteAccess,shortName:e.shortName,isForAttachMenu:e.showInAttachMenu,isForSideMenu:e.showInSideMenu,attachMenuPeerTypes:e.peerTypes?.map(zt),icons:e.icons.map(Wt).filter(Boolean),isInactive:e.inactive,isDisclaimerNeeded:e.sideMenuDisclaimerNeeded}}function zt(e){return e instanceof pe.Api.AttachMenuPeerTypeBotPM?"bots":e instanceof pe.Api.AttachMenuPeerTypePM?"users":e instanceof pe.Api.AttachMenuPeerTypeChat?"chats":e instanceof pe.Api.AttachMenuPeerTypeBroadcast?"channels":e instanceof pe.Api.AttachMenuPeerTypeSameBotPM?"self":void 0}function Wt(e){if(!(e.icon instanceof pe.Api.Document))return;const t=Nt(e.icon);return t?(Ve(e.icon),{name:e.name,document:t}):void 0}function Jt(e,t){const{description:n,descriptionPhoto:s,descriptionDocument:i,userId:a,commands:o,menuButton:r}=e,d=a&&me(a,"user"),c=s instanceof pe.Api.Photo?At(s):void 0,u=i instanceof pe.Api.Document?Et(i):void 0,l=o?.map((e=>function(e,t){return{botId:e,...ve(t)}}(d||t,e)));return{botId:d||t,description:n,gif:u,photo:c,menuButton:Kt(r),commands:l?.length?l:void 0}}function Kt(e){return e instanceof pe.Api.BotMenuButton?{type:"webApp",text:e.text,url:e.url}:{type:"commands"}}function $t(e){const{self:t,min:n,about:s,date:i,versioned:a,canSelfUnmute:o,justJoined:r,left:d,muted:c,mutedByYou:u,source:l,volume:p,volumeByAdmin:f,videoJoined:h,peer:m,video:g,presentation:A,raiseHandRating:y}=e;return{isSelf:t,isMin:n,canSelfUnmute:o,isLeft:d,isMuted:c,isMutedByMe:u,hasJustJoined:r,isVolumeByAdmin:f,isVersioned:a,isVideoJoined:h,about:s,source:l,raiseHandRating:y?.toString(),volume:p,date:new Date(i),isUser:fe(m),id:ge(m),video:g?Qt(g):void 0,presentation:A?Qt(A):void 0}}function Qt(e){const{audioSource:t,endpoint:n,paused:s,sourceGroups:i}=e;return{audioSource:t,endpoint:n,isPaused:s,sourceGroups:i.map(Yt)}}function Yt(e){return{semantics:e.semantics,sources:e.sources}}function Zt(e){const{id:t,accessHash:n}=e;if(e instanceof pe.Api.GroupCallDiscarded)return{connectionState:"discarded",id:t.toString(),accessHash:n.toString(),participantsCount:0,version:0,participants:{}};const{version:s,participantsCount:i,streamDcId:a,scheduleDate:o,canChangeJoinMuted:r,joinMuted:d,canStartVideo:c,scheduleStartSubscribed:u}=e;return{connectionState:"disconnected",isLoaded:!0,id:t.toString(),accessHash:n.toString(),version:s,participantsCount:i,streamDcId:a,scheduleDate:o,canChangeJoinMuted:r,joinMuted:d,canStartVideo:c,scheduleStartSubscribed:u,participants:{}}}function Xt(e){const{id:t}=e;let n={id:t.toString()};if(e instanceof pe.Api.PhoneCallAccepted||e instanceof pe.Api.PhoneCallWaiting||e instanceof pe.Api.PhoneCall||e instanceof pe.Api.PhoneCallRequested){const{accessHash:t,adminId:s,date:i,video:a,participantId:o,protocol:r}=e;n={...n,accessHash:t.toString(),adminId:s.toString(),participantId:o.toString(),date:i,isVideo:a,protocol:nn(r)}}if(e instanceof pe.Api.PhoneCall){const{p2pAllowed:t,gAOrB:s,keyFingerprint:i,connections:a,startDate:o}=e;n={...n,state:"active",gAOrB:Array.from(s),keyFingerprint:i.toString(),startDate:o,isP2pAllowed:Boolean(t),connections:a.map(tn).filter(Boolean)}}return e instanceof pe.Api.PhoneCallDiscarded&&(n={...n,state:"discarded",duration:e.duration,reason:en(e.reason),needRating:e.needRating,needDebug:e.needDebug}),e instanceof pe.Api.PhoneCallWaiting&&(n={...n,state:"waiting",receiveDate:e.receiveDate}),e instanceof pe.Api.PhoneCallAccepted&&(n={...n,state:"accepted",gB:Array.from(e.gB)}),e instanceof pe.Api.PhoneCallRequested&&(n={...n,state:"requested",gAHash:Array.from(e.gAHash)}),n}function en(e){return e instanceof pe.Api.PhoneCallDiscardReasonMissed?"missed":e instanceof pe.Api.PhoneCallDiscardReasonBusy?"busy":e instanceof pe.Api.PhoneCallDiscardReasonHangup?"hangup":"disconnect"}function tn(e){if(e instanceof pe.Api.PhoneConnectionWebrtc){const{username:t,password:n,turn:s,stun:i,ip:a,ipv6:o,port:r}=e;return{username:t,password:n,isTurn:s,isStun:i,ip:a,ipv6:o,port:r}}}function nn(e){const{libraryVersions:t,minLayer:n,maxLayer:s,udpP2p:i,udpReflector:a}=e;return{libraryVersions:t,minLayer:n,maxLayer:s,isUdpP2p:i,isUdpReflector:a}}function sn(){return new pe.Api.PhoneCallProtocol({libraryVersions:["4.0.0"],minLayer:92,maxLayer:92,udpReflector:!0,udpP2p:!0})}function an(e){const{recentReactions:t,results:n,canSeeList:s,reactionsAsTags:i}=e;return{areTags:i,canSeeList:s,results:n.map(rn).filter(Boolean).sort(on),recentReactions:t?.map(dn).filter(Boolean)}}function on(e,t){return t.count-e.count||(void 0!==e.chosenOrder&&void 0!==t.chosenOrder?e.chosenOrder-t.chosenOrder:void 0!==e.chosenOrder?1:void 0!==t.chosenOrder?-1:0)}function rn(e){const{chosenOrder:t,count:n,reaction:s}=e,i=cn(s);if(i)return{chosenOrder:t,count:n,reaction:i}}function dn(e){const{peerId:t,reaction:n,big:s,unread:i,date:a,my:o}=e,r=cn(n);if(r)return{peerId:ge(t),reaction:r,addedDate:a,isUnread:i,isBig:s,isOwn:o}}function cn(e){return e instanceof pe.Api.ReactionEmoji?{emoticon:e.emoticon}:e instanceof pe.Api.ReactionCustomEmoji?{documentId:e.documentId.toString()}:void 0}function un(e){const{reaction:t,title:n,count:s}=e,i=cn(t);if(i)return{reaction:i,title:n,count:s}}function ln(e){const{selectAnimation:t,staticIcon:n,reaction:s,title:i,appearAnimation:a,inactive:o,aroundAnimation:r,centerIcon:d,effectAnimation:c,activateAnimation:u,premium:l}=e;return{selectAnimation:Nt(t),appearAnimation:Nt(a),activateAnimation:Nt(u),effectAnimation:Nt(c),staticIcon:Nt(n),aroundAnimation:r?Nt(r):void 0,centerIcon:d?Nt(d):void 0,reaction:{emoticon:s},title:i,isInactive:o,isPremium:l}}function pn(e){const{id:t,emoticon:n,premiumRequired:s,staticIconId:i,effectStickerId:a,effectAnimationId:o}=e;return{id:t.toString(),emoticon:n,isPremium:s,staticIconId:i?.toString(),effectStickerId:a.toString(),effectAnimationId:o?.toString()}}function fn(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=Boolean("min"in e&&e.min),s="accessHash"in e?String(e.accessHash):void 0,i="photo"in e&&e.photo&&"hasVideo"in e.photo&&e.photo.hasVideo,a="photo"in e&&e.photo?Ct(e.photo):void 0,o=Boolean("signatures"in e&&e.signatures),r=Boolean("hasLink"in e&&e.hasLink),d=Boolean("scam"in e&&e.scam),c=Boolean("fake"in e&&e.fake),u=Boolean("joinToSend"in e&&e.joinToSend),l=Boolean("joinRequest"in e&&e.joinRequest),p=It(e),f=Boolean("forum"in e&&e.forum),h=Boolean("storiesHidden"in e&&e.storiesHidden),m="storiesMaxId"in e?e.storiesMaxId:void 0,g=Boolean("storiesUnavailable"in e&&e.storiesUnavailable),A="color"in e&&e.color?Ae(e.color):void 0,y="emojiStatus"in e&&e.emojiStatus?ye(e.emojiStatus):void 0,w="level"in e?e.level:void 0;return it({isMin:n,hasPrivateLink:r,isSignaturesShown:o,usernames:p,accessHash:s,hasVideoAvatar:i,avatarPhotoId:a,..."verified"in e&&{isVerified:e.verified},..."callActive"in e&&{isCallActive:e.callActive},..."callNotEmpty"in e&&{isCallNotEmpty:e.callNotEmpty},..."date"in e&&{creationDate:e.date},..."participantsCount"in e&&void 0!==e.participantsCount&&{membersCount:e.participantsCount},..."noforwards"in e&&{isProtected:Boolean(e.noforwards)},isSupport:t||void 0,...mn(e),..."creator"in e&&{isCreator:e.creator},...gn(e),...An(e),fakeType:d?"scam":c?"fake":void 0,color:A,isJoinToSend:u,isJoinRequest:l,isForum:f,areStoriesHidden:h,maxStoryId:m,hasStories:Boolean(m)&&!g,emojiStatus:y,boostLevel:w})}function hn(e,t){const{peer:n,folderId:s,unreadMark:i,unreadCount:a,unreadMentionsCount:o,unreadReactionsCount:r,notifySettings:{silent:d,muteUntil:c},readOutboxMaxId:u,readInboxMaxId:l,draft:p,viewForumAsMessages:f}=e,h=d||"number"==typeof c&&ct()<c;return{id:ge(n),...s&&{folderId:s},type:wn(t),title:bn(n,t),lastReadOutboxMessageId:u,lastReadInboxMessageId:l,unreadCount:a,unreadMentionsCount:o,unreadReactionsCount:r,isMuted:h,muteUntil:c,...i&&{hasUnreadMark:!0},...p instanceof pe.Api.DraftMessage&&{draftDate:p.date},...f&&{isForumAsMessages:!0},...fn(t)}}function mn(e){return e instanceof pe.Api.Chat||e instanceof pe.Api.Channel?{adminRights:e.adminRights?ve(e.adminRights):void 0,currentUserBannedRights:"bannedRights"in e&&e.bannedRights?ve(e.bannedRights):void 0,defaultBannedRights:e.defaultBannedRights?ve(e.defaultBannedRights):void 0}:{}}function gn(e){if(e instanceof pe.Api.ChatForbidden)return{isForbidden:!0};if(e instanceof pe.Api.ChannelForbidden)return{isRestricted:!0};const t={};if("restricted"in e){const n=e.restricted?function(e){if(!e)return;const t=e.find((e=>{let{platform:t}=e;return"all"===t}));return t?tt(t,["reason","text"]):void 0}(e.restrictionReason):void 0;n&&Object.assign(t,{isRestricted:!0,restrictionReason:n})}return e instanceof pe.Api.Chat&&Object.assign(t,{isNotJoined:e.left}),e instanceof pe.Api.Channel&&Object.assign(t,{isNotJoined:e.left}),t}function An(e){return!("migratedTo"in e)||!e.migratedTo||e.migratedTo instanceof pe.Api.InputChannelEmpty?{}:{migratedTo:{chatId:ge(e.migratedTo),...e.migratedTo instanceof pe.Api.InputChannel&&{accessHash:String(e.migratedTo.accessHash)}}}}function yn(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!(e instanceof pe.Api.ChatEmpty||e instanceof pe.Api.UserEmpty))return{id:me(e.id,e instanceof pe.Api.User?"user":e instanceof pe.Api.Chat||e instanceof pe.Api.ChatForbidden?"chat":"channel"),type:wn(e),title:e instanceof pe.Api.User?Sn(e):e.title,...fn(e,t)}}function wn(e){return e instanceof pe.Api.User||e instanceof pe.Api.UserEmpty?"chatTypePrivate":e instanceof pe.Api.Chat||e instanceof pe.Api.ChatForbidden||e instanceof pe.Api.ChatEmpty?"chatTypeBasicGroup":e.megagroup?"chatTypeSuperGroup":"chatTypeChannel"}function In(e){return fe(e)?`user${e.userId}`:he(e)?`chat${e.chatId}`:`chat${e.channelId}`}function bn(e,t){return fe(e)?Sn(t):t.title}function Sn(e){return e.firstName?`${e.firstName}${e.lastName?` ${e.lastName}`:""}`:e.lastName||""}function vn(e){return{userId:e instanceof pe.Api.ChannelParticipantBanned||e instanceof pe.Api.ChannelParticipantLeft?ge(e.peer):me(e.userId,"user"),inviterId:"inviterId"in e&&e.inviterId?me(e.inviterId,"user"):void 0,joinedDate:"date"in e?e.date:void 0,kickedByUserId:"kickedBy"in e&&e.kickedBy?me(e.kickedBy,"user"):void 0,promotedByUserId:"promotedBy"in e&&e.promotedBy?me(e.promotedBy,"user"):void 0,bannedRights:"bannedRights"in e?ve(e.bannedRights):void 0,adminRights:"adminRights"in e?ve(e.adminRights):void 0,customTitle:"rank"in e?e.rank:void 0,...(e instanceof pe.Api.ChannelParticipantAdmin||e instanceof pe.Api.ChatParticipantAdmin)&&{isAdmin:!0},...(e instanceof pe.Api.ChannelParticipantCreator||e instanceof pe.Api.ChatParticipantCreator)&&{isOwner:!0}}}function Cn(e){return e instanceof pe.Api.ChatParticipants||e instanceof pe.Api.channels.ChannelParticipants?e.participants.map(vn).filter(Boolean):void 0}function Pn(e){let t,n="";if(!(e.action instanceof pe.Api.SendMessageCancelAction)){if(e.action instanceof pe.Api.SendMessageTypingAction)n="lng_user_typing";else if(e.action instanceof pe.Api.SendMessageRecordVideoAction)n="lng_send_action_record_video";else if(e.action instanceof pe.Api.SendMessageUploadVideoAction)n="lng_send_action_upload_video";else if(e.action instanceof pe.Api.SendMessageRecordAudioAction)n="lng_send_action_record_audio";else if(e.action instanceof pe.Api.SendMessageUploadAudioAction)n="lng_send_action_upload_audio";else if(e.action instanceof pe.Api.SendMessageUploadPhotoAction)n="lng_send_action_upload_photo";else if(e.action instanceof pe.Api.SendMessageUploadDocumentAction)n="lng_send_action_upload_file";else if(e.action instanceof pe.Api.SendMessageGeoLocationAction)n="selecting a location to share";else if(e.action instanceof pe.Api.SendMessageChooseContactAction)n="selecting a contact to share";else if(e.action instanceof pe.Api.SendMessageGamePlayAction)n="lng_playing_game";else if(e.action instanceof pe.Api.SendMessageRecordRoundAction)n="lng_send_action_record_round";else if(e.action instanceof pe.Api.SendMessageUploadRoundAction)n="lng_send_action_upload_round";else if(e.action instanceof pe.Api.SendMessageChooseStickerAction)n="lng_send_action_choose_sticker";else{if(e.action instanceof pe.Api.SpeakingInGroupCallAction)return;if(e.action instanceof pe.Api.SendMessageEmojiInteractionSeen)n="lng_user_action_watching_animations",t=e.action.emoticon;else if(e.action instanceof pe.Api.SendMessageEmojiInteraction)return}return{action:n,...t&&{emoji:t},...!(e instanceof pe.Api.UpdateUserTyping)&&{userId:ge(e.fromId)},timestamp:Date.now()+1e3*dt()}}}function Mn(e){return e instanceof pe.Api.DialogFilterChatlist?{...nt(e,["id","title","emoticon"]),excludedChatIds:[],includedChatIds:e.includePeers.map(ge).filter(Boolean),pinnedChatIds:e.pinnedPeers.map(ge).filter(Boolean),hasMyInvites:e.hasMyInvites,isChatList:!0}:{...nt(e,["id","title","emoticon","contacts","nonContacts","groups","bots","excludeMuted","excludeRead","excludeArchived"]),channels:e.broadcasts,pinnedChatIds:e.pinnedPeers.map(ge).filter(Boolean),includedChatIds:e.includePeers.map(ge).filter(Boolean),excludedChatIds:e.excludePeers.map(ge).filter(Boolean)}}function Tn(e){let{filter:t,description:n}=e;if(t instanceof pe.Api.DialogFilter||t instanceof pe.Api.DialogFilterChatlist)return{...Mn(t),description:n}}function Bn(e){return e.reduce(((e,t)=>{const n=me(t.userId,"user");return t.commands&&(e=e.concat(t.commands.map((e=>({botId:n,...ve(e)}))))),e}),[])}function Rn(e){const{revoked:t,date:n,expireDate:s,link:i,permanent:a,startDate:o,usage:r,usageLimit:d,requested:c,requestNeeded:u,title:l,adminId:p}=e;return{isRevoked:t,date:n,expireDate:s,link:i,isPermanent:a,startDate:o,usage:r,usageLimit:d,isRequestNeeded:u,requested:c,title:l,adminId:me(p,"user")}}function Un(e){let{autoarchived:t,reportSpam:n,addContact:s,blockContact:i}=e;return{isAutoArchived:Boolean(t),canReportSpam:Boolean(n),canAddContact:Boolean(s),canBlockContact:Boolean(i)}}function kn(e){return e instanceof pe.Api.ChatReactionsAll?{type:"all",areCustomAllowed:e.allowCustom}:e instanceof pe.Api.ChatReactionsSome?{type:"some",allowed:e.reactions.map(cn).filter(Boolean)}:void 0}function Dn(e){return{id:ge(e.peer),isPremium:e.premiumRequired}}function En(e){if(e instanceof pe.Api.ForumTopicDeleted)return;const{id:t,my:n,closed:s,pinned:i,hidden:a,short:o,date:r,title:d,iconColor:c,iconEmojiId:u,topMessage:l,unreadCount:p,unreadMentionsCount:f,unreadReactionsCount:h,fromId:m,notifySettings:{silent:g,muteUntil:A}}=e;return{id:t,isClosed:s,isPinned:i,isHidden:a,isOwner:n,isMin:o,date:r,title:d,iconColor:c,iconEmojiId:u?.toString(),lastMessageId:l,unreadCount:p,unreadMentionsCount:f,unreadReactionsCount:h,fromId:ge(m),isMuted:g||("number"==typeof A?ct()<A:void 0),muteUntil:A}}function xn(e){if(!(e instanceof pe.Api.ExportedChatlistInvite))return;const{title:t,url:n,peers:s}=e;return{title:t,url:n,peerIds:s.map(ge).filter(Boolean)}}function Nn(e){return{id:e.userId.toString(),isRequiringPremiumToMessage:e.premiumRequiredForPm,isRequiringPremiumToInvite:e.premiumWouldAllowInvite}}var Hn=n(8172);function Gn(e,t){let n=0;const s=new Array(t),i=e.length/t,a=e[0],o=e[e.length-1];for(let r=0;r<t;r++){const t=Math.floor(r*i),d=((e[t-1]??a)+(e[t]??a)+(e[t+1]??o))/3;s[r]=d,n<d&&(n=d)}return{data:s,peak:n}}var Fn=n(80071),_n=n.n(Fn);function qn(e){return e.startsWith("-")?(t=e).length===J&&t.startsWith("-1")?"channel":"chat":"user";var t}function On(e){const t=qn(e);return"user"===t?new pe.Api.PeerUser({userId:rs(e,"user")}):"channel"===t?new pe.Api.PeerChannel({channelId:rs(e,"channel")}):new pe.Api.PeerChat({chatId:rs(e,"chat")})}function jn(e,t){const n=qn(e);return"user"===n?new pe.Api.InputPeerUser({userId:rs(e,"user"),accessHash:Ie()(t)}):"channel"===n?new pe.Api.InputPeerChannel({channelId:rs(e,"channel"),accessHash:Ie()(t)}):new pe.Api.InputPeerChat({chatId:rs(e,"chat")})}function Ln(e){const t=qn(e);let n;if("user"===t){if(n=De.users[e]?.accessHash,!n)return}else if("channel"===t&&(n=De.chats[e]?.accessHash,!n))return;return jn(e,String(n))}function Vn(e,t){const n=qn(e);return"user"===n?new pe.Api.InputUser({userId:rs(e,"user"),accessHash:Ie()(t)}):"channel"===n?new pe.Api.InputChannel({channelId:rs(e,"channel"),accessHash:Ie()(t)}):rs(e,"chat")}function zn(e,t){return new pe.Api.InputStickerSetID({id:Ie()(e),accessHash:Ie()(t)})}function Wn(e){const t=De.documents[e.id];if(t)return new pe.Api.InputDocument(tt(t,["id","accessHash","fileReference"]))}function Jn(e){const t=Wn(e);if(t)return new pe.Api.InputMediaDocument({id:t})}function Kn(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return new pe.Api.InputMediaPoll({poll:new pe.Api.Poll({id:Ie()(e.id),publicVoters:e.summary.isPublic,question:hs(e.summary.question),answers:e.summary.answers.map((e=>{let{text:t,option:n}=e;return new pe.Api.PollAnswer({text:hs(t),option:Ye(n)})})),quiz:e.summary.quiz,multipleChoice:e.summary.multipleChoice,closeDate:e.summary.closeDate,closePeriod:e.summary.closePeriod,closed:!!t||e.summary.closed}),correctAnswers:e.results.results?.filter((e=>e.isCorrect)).map((e=>Ye(e.option))),solution:e.results.solution,solutionEntities:e.results.solutionEntities?.map(Zn)})}function $n(){return(0,Fn.readBigIntFromBuffer)((0,Fn.generateRandomBytes)(8),!0,!0)}function Qn(){return(0,Fn.readBigIntFromBuffer)((0,Fn.generateRandomBytes)(4),!0,!0).toJSNumber()}function Yn(e,t,n){return new pe.Api.Message({id:e,peerId:On(t),fromId:On(t),media:n.media})}function Zn(e){const{type:t,offset:n,length:s}=e,i="userId"in e?De.users[e.userId]:void 0;switch(t){case lt.C7.Bold:return new pe.Api.MessageEntityBold({offset:n,length:s});case lt.C7.Italic:return new pe.Api.MessageEntityItalic({offset:n,length:s});case lt.C7.Underline:return new pe.Api.MessageEntityUnderline({offset:n,length:s});case lt.C7.Strike:return new pe.Api.MessageEntityStrike({offset:n,length:s});case lt.C7.Code:return new pe.Api.MessageEntityCode({offset:n,length:s});case lt.C7.Pre:return new pe.Api.MessageEntityPre({offset:n,length:s,language:e.language||""});case lt.C7.Blockquote:return new pe.Api.MessageEntityBlockquote({offset:n,length:s});case lt.C7.TextUrl:return new pe.Api.MessageEntityTextUrl({offset:n,length:s,url:e.url});case lt.C7.Url:return new pe.Api.MessageEntityUrl({offset:n,length:s});case lt.C7.Hashtag:return new pe.Api.MessageEntityHashtag({offset:n,length:s});case lt.C7.MentionName:return new pe.Api.InputMessageEntityMentionName({offset:n,length:s,userId:new pe.Api.InputUser({userId:Ie()(i.id),accessHash:i.accessHash})});case lt.C7.Spoiler:return new pe.Api.MessageEntitySpoiler({offset:n,length:s});case lt.C7.CustomEmoji:return new pe.Api.MessageEntityCustomEmoji({offset:n,length:s,documentId:Ie()(e.documentId)});default:return new pe.Api.MessageEntityUnknown({offset:n,length:s})}}function Xn(e){const t=De.photos[e?.id];if(t)return new pe.Api.InputPhoto(tt(t,["id","accessHash","fileReference"]))}function es(e){let{phone:t,firstName:n,lastName:s}=e;return new pe.Api.InputPhoneContact({clientId:Ie()(1),phone:t,firstName:n,lastName:s})}function ts(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return new pe.Api.ChatBannedRights({...e,untilDate:t})}function ns(e){return new pe.Api.ChatAdminRights(e)}function ss(e){const{shippingAddress:t}=e;return new pe.Api.PaymentRequestedInfo({...e,shippingAddress:t?new pe.Api.PostAddress(t):void 0})}function is(e){switch(e){case"phoneNumber":return new pe.Api.InputPrivacyKeyPhoneNumber;case"addByPhone":return new pe.Api.InputPrivacyKeyAddedByPhone;case"lastSeen":return new pe.Api.InputPrivacyKeyStatusTimestamp;case"profilePhoto":return new pe.Api.InputPrivacyKeyProfilePhoto;case"forwards":return new pe.Api.InputPrivacyKeyForwards;case"chatInvite":return new pe.Api.InputPrivacyKeyChatInvite;case"phoneCall":return new pe.Api.InputPrivacyKeyPhoneCall;case"phoneP2P":return new pe.Api.InputPrivacyKeyPhoneP2P;case"voiceMessages":return new pe.Api.InputPrivacyKeyVoiceMessages;case"bio":return new pe.Api.InputPrivacyKeyAbout;case"birthday":return new pe.Api.InputPrivacyKeyBirthday}}function as(e){switch(e){case"spam":return new pe.Api.InputReportReasonSpam;case"violence":return new pe.Api.InputReportReasonViolence;case"childAbuse":return new pe.Api.InputReportReasonChildAbuse;case"pornography":return new pe.Api.InputReportReasonPornography;case"copyright":return new pe.Api.InputReportReasonCopyright;case"fake":return new pe.Api.InputReportReasonFake;case"geoIrrelevant":return new pe.Api.InputReportReasonGeoIrrelevant;case"illegalDrugs":return new pe.Api.InputReportReasonIllegalDrugs;case"personalDetails":return new pe.Api.InputReportReasonPersonalDetails;case"other":return new pe.Api.InputReportReasonOther}}function os(e){return new pe.Api.DataJSON({data:JSON.stringify(e)})}function rs(e,t){return"user"===t?Ie()(e):"channel"===t?Ie()(e.slice(2)):Ie()(e.slice(1))}function ds(e){return new pe.Api.InputGroupCall({id:Ie()(e.id),accessHash:Ie()(e.accessHash)})}function cs(e){let{id:t,accessHash:n}=e;return new pe.Api.InputPhoneCall({id:Ie()(t),accessHash:Ie()(n)})}function us(e){if("giftcode"===e.type)return new pe.Api.InputStorePaymentPremiumGiftCode({users:e.users.map((e=>Vn(e.id,e.accessHash))),boostPeer:e.boostChannel?jn(e.boostChannel.id,e.boostChannel.accessHash):void 0,currency:e.currency,amount:Ie()(e.amount)});const t=$n();return new pe.Api.InputStorePaymentPremiumGiveaway({boostPeer:jn(e.chat.id,e.chat.accessHash),additionalPeers:e.additionalChannels?.map((e=>jn(e.id,e.accessHash))),countriesIso2:e.countries,prizeDescription:e.prizeDescription,onlyNewSubscribers:e.isOnlyForNewSubscribers||void 0,winnersAreVisible:e.areWinnersVisible||void 0,untilDate:e.untilDate,currency:e.currency,amount:Ie()(e.amount),randomId:t})}function ls(e){switch(e.type){case"message":return new pe.Api.InputInvoiceMessage({peer:jn(e.chat.id,e.chat.accessHash),msgId:e.messageId});case"slug":return new pe.Api.InputInvoiceSlug({slug:e.slug});case"stars":return new pe.Api.InputInvoiceStars({option:(n=e.option,new pe.Api.StarsTopupOption({stars:Ie()(n.stars),amount:Ie()(n.amount),currency:n.currency,extended:n.isExtended}))});default:{const n=us(e.purpose),s=(t=e.option,new pe.Api.PremiumGiftCodeOption({users:t.users,months:t.months,currency:t.currency,amount:Ie()(t.amount)}));return new pe.Api.InputInvoicePremiumGiftCode({purpose:n,option:s})}}var t,n}function ps(e){return e&&"emoticon"in e?new pe.Api.ReactionEmoji({emoticon:e.emoticon}):e&&"documentId"in e?new pe.Api.ReactionCustomEmoji({documentId:Ie()(e.documentId)}):new pe.Api.ReactionEmpty}function fs(e,t){return e.id===G?new pe.Api.EmojiStatusEmpty:t?new pe.Api.EmojiStatusUntil({documentId:Ie()(e.id),until:t}):new pe.Api.EmojiStatus({documentId:Ie()(e.id)})}function hs(e){return new pe.Api.TextWithEntities({text:e.text,entities:e.entities?.map(Zn)||[]})}function ms(e){return new pe.Api.InputBotAppID({id:Ie()(e.id),accessHash:Ie()(e.accessHash)})}function gs(e){if("story"===e.type)return new pe.Api.InputReplyToStory({peer:Ln(e.peerId),storyId:e.storyId});if("message"===e.type){const{replyToMsgId:t,replyToTopId:n,replyToPeerId:s,quoteText:i}=e;return new pe.Api.InputReplyToMessage({replyToMsgId:t,topMsgId:n,replyToPeerId:s?Ln(s):void 0,quoteText:i?.text,quoteEntities:i?.entities?.map(Zn)})}}function As(e){const t=[];if(e.allowedUsers?.length&&t.push(new pe.Api.InputPrivacyValueAllowUsers({users:e.allowedUsers.map((e=>{let{id:t,accessHash:n}=e;return Vn(t,n)}))})),e.allowedChats?.length&&t.push(new pe.Api.InputPrivacyValueAllowChatParticipants({chats:e.allowedChats.map((e=>{let{id:t,type:n}=e;return rs(t,"chatTypeBasicGroup"===n?"chat":"channel")}))})),e.blockedUsers?.length&&t.push(new pe.Api.InputPrivacyValueDisallowUsers({users:e.blockedUsers.map((e=>{let{id:t,accessHash:n}=e;return Vn(t,n)}))})),e.blockedChats?.length&&t.push(new pe.Api.InputPrivacyValueDisallowChatParticipants({chats:e.blockedChats.map((e=>{let{id:t,type:n}=e;return rs(t,"chatTypeBasicGroup"===n?"chat":"channel")}))})),e.shouldAllowPremium&&t.push(new pe.Api.InputPrivacyValueAllowPremium),!e.isUnspecified)switch(e.visibility){case"everybody":t.push(new pe.Api.InputPrivacyValueAllowAll);break;case"contacts":t.push(new pe.Api.InputPrivacyValueAllowContacts);break;case"nonContacts":t.push(new pe.Api.InputPrivacyValueDisallowContacts);break;case"nobody":t.push(new pe.Api.InputPrivacyValueDisallowAll)}return t}const ys=1e6,ws="temp",Is=63,bs=10;let Ss,vs=0;function Cs(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)+ ++vs/ys}function Ps(e){const{message:t,entities:n,randomId:s,recommended:i,sponsorInfo:a,additionalInfo:o,buttonText:r,canReport:d,title:c,url:u,color:l}=e;let p;return e.photo instanceof pe.Api.Photo&&(Le(e.photo),p=At(e.photo)),{randomId:Qe(s),text:kt(t,n),expiresAt:Math.round(Date.now()/1e3)+k,isRecommended:i,sponsorInfo:a,additionalInfo:o,buttonText:r,canReport:d,title:c,url:u,peerColor:l&&Ae(l),photo:p}}function Ms(e){const t=Fe(e);if(t&&(e instanceof pe.Api.Message||e instanceof pe.Api.MessageService))return Ts(t,e)}function Ts(e,t){const n=t.fromId?ge(t.fromId):void 0,s=t.peerId?ge(t.peerId):void 0,i=!n&&e===Ss,a=t.out&&!t.post||i&&!t.fwdFrom,o=Ut(t),r=t.action&&function(e,t,n,s,i){if(e instanceof pe.Api.MessageActionEmpty)return;let a,o,r,d,c,u;const l=[];let p,f,h,m,g,A,y,w,I,b="other";const S="users"in e?e.users&&e.users.map((e=>me(e,"user"))):"userId"in e&&[me(e.userId,"user")]||[];let v;if(e instanceof pe.Api.MessageActionChatCreate)u="Notification.CreatedChatWithTitle",l.push("%action_origin%",e.title),b="chatCreate";else if(e instanceof pe.Api.MessageActionChatEditTitle)s?(u="Channel.MessageTitleUpdated",l.push(e.title)):(u="Notification.ChangedGroupName",l.push("%action_origin%",e.title));else if(e instanceof pe.Api.MessageActionChatEditPhoto)s?u="Channel.MessagePhotoUpdated":(u="Notification.ChangedGroupPhoto",l.push("%action_origin%"));else if(e instanceof pe.Api.MessageActionChatDeletePhoto)u=s?"Channel.MessagePhotoRemoved":"Group.MessagePhotoRemoved";else if(e instanceof pe.Api.MessageActionChatAddUser)!t||S.includes(t)?(u="Notification.JoinedChat",l.push("%target_user%")):(u="Notification.Invited",l.push("%action_origin%","%target_user%"));else if(e instanceof pe.Api.MessageActionChatDeleteUser)!t||S.includes(t)?(u="Notification.LeftChat",l.push("%target_user%")):(u="Notification.Kicked",l.push("%action_origin%","%target_user%"));else if(e instanceof pe.Api.MessageActionChatJoinedByLink)u="Notification.JoinedGroupByLink",l.push("%action_origin%");else if(e instanceof pe.Api.MessageActionChannelCreate)u="Notification.CreatedChannel";else if(e instanceof pe.Api.MessageActionChatMigrateTo)v=ge(e),u="Migrated to %target_chat%",l.push("%target_chat%");else if(e instanceof pe.Api.MessageActionChannelMigrateFrom)v=ge(e),u="Migrated from %target_chat%",l.push("%target_chat%");else if(e instanceof pe.Api.MessageActionPinMessage)u="Chat.Service.Group.UpdatedPinnedMessage1",l.push("%action_origin%","%message%");else if(e instanceof pe.Api.MessageActionHistoryClear)u="HistoryCleared",b="historyClear";else if(e instanceof pe.Api.MessageActionPhoneCall){const t=Boolean(e.duration);if(u=[t?"ChatList.Service":"Chat",e.video?"VideoCall":"Call",i?t?"outgoing":"Outgoing":t?"incoming":"Incoming"].join("."),t){const t=Math.max(Math.round(e.duration/60),1);l.push(`${t} min${t>1?"s":""}`)}a={isOutgoing:i,isVideo:e.video,duration:e.duration,reason:en(e.reason)}}else if(e instanceof pe.Api.MessageActionInviteToGroupCall)u="Notification.VoiceChatInvitation",o={id:e.call.id.toString(),accessHash:e.call.accessHash.toString()},l.push("%action_origin%","%target_user%");else if(e instanceof pe.Api.MessageActionContactSignUp)u="Notification.Joined",l.push("%action_origin%"),b="contactSignUp";else if(e instanceof pe.Api.MessageActionPaymentSent)r=Number(e.totalAmount),d=e.currency,u="PaymentSuccessfullyPaid",b="receipt",n&&S.push(n),l.push("%payment_amount%","%target_user%","%product%");else if(e instanceof pe.Api.MessageActionGroupCall)if(e.duration){const t=Math.max(Math.round(e.duration/60),1);u="Notification.VoiceChatEnded",l.push(`${t} min${t>1?"s":""}`)}else u="Notification.VoiceChatStartedChannel",o={id:e.call.id.toString(),accessHash:e.call.accessHash.toString()};else if(e instanceof pe.Api.MessageActionBotAllowed)e.domain?(u="ActionBotAllowed",l.push(e.domain)):u=e.fromRequest?"lng_action_webapp_bot_allowed":"ActionAttachMenuBotAllowed";else if(e instanceof pe.Api.MessageActionCustomAction)u=e.message;else if(e instanceof pe.Api.MessageActionChatJoinedByRequest)u="ChatService.UserJoinedGroupByRequest",l.push("%action_origin%");else if(e instanceof pe.Api.MessageActionGameScore)u=t===Ss?"ActionYouScoredInGame":"ActionUserScoredInGame",l.push("%score%"),f=e.score;else if(e instanceof pe.Api.MessageActionWebViewDataSent)u="Notification.WebAppSentData",l.push(e.text);else if(e instanceof pe.Api.MessageActionGiftPremium)u=i?"ActionGiftOutbound":"ActionGiftInbound",i?l.push("%gift_payment_amount%"):l.push("%action_origin%","%gift_payment_amount%"),n&&S.push(n),d=e.currency,e.cryptoCurrency&&(c={currency:e.cryptoCurrency,amount:e.cryptoAmount.toJSNumber()}),r=e.amount.toJSNumber(),h=e.months;else if(e instanceof pe.Api.MessageActionTopicCreate)u="TopicWasCreatedAction",b="topicCreate",l.push(e.title);else if(e instanceof pe.Api.MessageActionTopicEdit)void 0!==e.closed?(u=e.closed?"TopicWasClosedAction":"TopicWasReopenedAction",l.push("%action_origin%","%action_topic%")):void 0!==e.hidden?u=e.hidden?"TopicHidden2":"TopicShown":e.title?(u="TopicRenamedTo",l.push("%action_origin%",e.title)):e.iconEmojiId?(u="TopicWasIconChangedToAction",l.push("%action_origin%","%action_topic_icon%"),m=e.iconEmojiId.toString()):u="ChatList.UnsupportedMessage",g=!0;else if(e instanceof pe.Api.MessageActionSuggestProfilePhoto){const s=e.photo instanceof pe.Api.Photo&&e.photo.videoSizes?.length;u=t===Ss?s?"ActionSuggestVideoFromYouDescription":"ActionSuggestPhotoFromYouDescription":s?"ActionSuggestVideoToYouDescription":"ActionSuggestPhotoToYouDescription",b="suggestProfilePhoto",l.push("%target_user%"),n&&S.push(n)}else e instanceof pe.Api.MessageActionGiveawayLaunch?(u="BoostingGiveawayJustStarted",l.push("%action_origin%")):e instanceof pe.Api.MessageActionGiftCode?(u=i?"ActionGiftOutbound":"BoostingReceivedGiftNoName",A=e.slug,h=e.months,r=e.amount?.toJSNumber(),y=Boolean(e.viaGiveaway),w=Boolean(e.unclaimed),i&&l.push("%gift_payment_amount%"),d=e.currency,e.cryptoCurrency&&(c={currency:e.cryptoCurrency,amount:e.cryptoAmount.toJSNumber()}),e.boostPeer&&(v=ge(e.boostPeer)),n&&S.push(n)):e instanceof pe.Api.MessageActionGiveawayResults?e.winnersCount?e.unclaimedCount?u="lng_action_giveaway_results_some":(u="BoostingGiveawayServiceWinnersSelected",l.push("%amount%"),r=e.winnersCount,I=e.winnersCount):u="lng_action_giveaway_results_none":e instanceof pe.Api.MessageActionBoostApply?(b="chatBoost",1===e.boosts?(u=t===Ss?"BoostingBoostsGroupByYouServiceMsg":"BoostingBoostsGroupByUserServiceMsg",l.push("%action_origin%")):(u=t===Ss?"BoostingBoostsGroupByYouServiceMsgCount":"BoostingBoostsGroupByUserServiceMsgCount",l.push(e.boosts.toString()),t!==Ss&&l.unshift("%action_origin%"),I=e.boosts)):u="ChatList.UnsupportedMessage";return"photo"in e&&e.photo instanceof pe.Api.Photo&&(Le(e.photo),p=At(e.photo)),{mediaType:"action",text:u,type:b,targetUserIds:S,targetChatId:v,photo:p,amount:r,currency:d,giftCryptoInfo:c,isGiveaway:y,slug:A,translationValues:l,call:o,phoneCall:a,score:f,months:h,topicEmojiIconId:m,isTopicAction:g,isUnclaimed:w,pluralValue:I}}(t.action,n,s,Boolean(t.post),a),d=t.message?Ds(t.message,a):void 0;(r||d)&&(o.action=r||d);const c=t.date>ct()+bs,u=t.media instanceof pe.Api.MessageMediaInvoice&&Boolean(t.media.extendedMedia),l=Boolean(t.editDate)&&!t.editHide,{inlineButtons:p,keyboardButtons:f,keyboardPlaceholder:h,isKeyboardSingleUse:m,isKeyboardSelective:g}=function(e,t){const{replyMarkup:n,media:s}=e;if(!(n instanceof pe.Api.ReplyKeyboardMarkup||n instanceof pe.Api.ReplyInlineMarkup))return;const i=n.rows.map((e=>{let{buttons:n}=e;return n.map((e=>{const{text:n}=e;if(e instanceof pe.Api.KeyboardButton)return{type:"command",text:n};if(e instanceof pe.Api.KeyboardButtonUrl)return e.url.includes("?startgroup=")?{type:"unsupported",text:n}:{type:"url",text:n,url:e.url};if(e instanceof pe.Api.KeyboardButtonCallback)return e.requiresPassword?{type:"unsupported",text:n}:{type:"callback",text:n,data:Qe(e.data)};if(e instanceof pe.Api.KeyboardButtonRequestPoll)return{type:"requestPoll",text:n,isQuiz:e.quiz};if(e instanceof pe.Api.KeyboardButtonRequestPhone)return{type:"requestPhone",text:n};if(e instanceof pe.Api.KeyboardButtonBuy){if(s instanceof pe.Api.MessageMediaInvoice&&s.receiptMsgId)return{type:"receipt",receiptMessageId:s.receiptMsgId};if(t)return;return{type:"buy",text:n}}return e instanceof pe.Api.KeyboardButtonGame?{type:"game",text:n}:e instanceof pe.Api.KeyboardButtonSwitchInline?{type:"switchBotInline",text:n,query:e.query,isSamePeer:e.samePeer}:e instanceof pe.Api.KeyboardButtonUserProfile?{type:"userProfile",text:n,userId:e.userId.toString()}:e instanceof pe.Api.KeyboardButtonSimpleWebView?{type:"simpleWebView",text:n,url:e.url}:e instanceof pe.Api.KeyboardButtonWebView?{type:"webView",text:n,url:e.url}:e instanceof pe.Api.KeyboardButtonUrlAuth?{type:"urlAuth",text:n,url:e.url,buttonId:e.buttonId}:{type:"unsupported",text:n}})).filter(Boolean)}));return i.every((e=>!e.length))?void 0:{[n instanceof pe.Api.ReplyKeyboardMarkup?"keyboardButtons":"inlineButtons"]:i,...n instanceof pe.Api.ReplyKeyboardMarkup&&{keyboardPlaceholder:n.placeholder,isKeyboardSingleUse:n.singleUse,isKeyboardSelective:n.selective}}}(t,u)||{},A=t.fwdFrom&&Rs(t.fwdFrom,i),{mediaUnread:y,postAuthor:w}=t,I=t.groupedId&&String(t.groupedId),b=Boolean(I)&&!(o.document||o.audio||o.sticker),S=t.replyMarkup instanceof pe.Api.ReplyKeyboardHide,v=t.replyMarkup instanceof pe.Api.ReplyKeyboardHide&&t.replyMarkup.selective,C=t.noforwards||u,P=!t.noforwards,M=(0,Hn.e)(o,I),T=t.replies?.comments,B=t.fromBoostsApplied,R=t.factcheck&&ks(t.factcheck),U=t.invertMedia,k=t.savedPeerId&&ge(t.savedPeerId);return it({id:t.id,chatId:e,isOutgoing:a,content:o,date:t.date,senderId:n||t.out&&t.post&&Ss||e,viewsCount:t.views,forwardsCount:t.forwards,isScheduled:c,isFromScheduled:t.fromScheduled,isSilent:t.silent,isPinned:t.pinned,reactions:t.reactions&&an(t.reactions),emojiOnlyCount:M,...t.replyTo&&{replyInfo:Us(t.replyTo,t)},forwardInfo:A,isEdited:l,editDate:t.editDate,isMediaUnread:y,hasUnreadMention:t.mentioned&&y,isMentioned:t.mentioned,...I&&{groupedId:I,isInAlbum:b},inlineButtons:p,...f&&{keyboardButtons:f,keyboardPlaceholder:h,isKeyboardSingleUse:m,isKeyboardSelective:g},...S&&{shouldHideKeyboardButtons:S,isHideKeyboardSelective:v},...t.viaBotId&&{viaBotId:me(t.viaBotId,"user")},postAuthorTitle:w,isProtected:C,isForwardingAllowed:P,hasComments:T,savedPeerId:k,senderBoosts:B,viaBusinessBotId:t.viaBusinessBotId?.toString(),factCheck:R,effectId:t.effect?.toString(),isInvertedMedia:U})}function Bs(e){if(e instanceof pe.Api.DraftMessageEmpty)return;const{message:t,entities:n,replyTo:s,date:i,effect:a}=e,o=s instanceof pe.Api.InputReplyToMessage?{type:"message",replyToMsgId:s.replyToMsgId,replyToTopId:s.topMsgId,replyToPeerId:s.replyToPeerId&&ge(s.replyToPeerId),quoteText:s.quoteText?kt(s.quoteText,s.quoteEntities):void 0}:void 0;return{text:t?kt(t,n):void 0,replyInfo:o,date:i,effectId:a?.toString()}}function Rs(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=e.savedFromPeer&&ge(e.savedFromPeer),s=e.fromId&&ge(e.fromId);return{date:e.date,savedDate:e.savedDate,isImported:e.imported,isChannelPost:Boolean(e.channelPost),channelPostId:e.channelPost,isLinkedChannelPost:Boolean(e.channelPost&&n&&!t),savedFromPeerId:n,fromId:s,fromChatId:s||n,fromMessageId:e.savedFromMsgId||e.channelPost,hiddenUserName:e.fromName,postAuthorTitle:e.postAuthor}}function Us(e,t){if(e instanceof pe.Api.MessageReplyStoryHeader)return{type:"story",peerId:ge(e.peer),storyId:e.storyId};if(e instanceof pe.Api.MessageReplyHeader){const{replyFrom:n,replyToMsgId:s,replyToTopId:i,replyMedia:a,replyToPeerId:o,forumTopic:r,quote:d,quoteText:c,quoteEntities:u}=e;return{type:"message",replyToMsgId:s,replyToTopId:i,isForumTopic:r,replyFrom:n&&Rs(n),replyToPeerId:o&&ge(o),replyMedia:a&&Dt(a,t),isQuote:d,quoteText:c?kt(c,u):void 0}}}function ks(e){return{shouldFetch:e.needCheck,hash:e.hash.toString(),text:e.text&&St(e.text),countryCode:e.country}}function Ds(e,t){return e===ae?{mediaType:"action",text:t?"You requested TON address":"Your TON address was requested",type:"tonAddressRequest",translationValues:[]}:e.startsWith(ie)?{mediaType:"action",text:t?"Your TON address was shared":"TON address was shared with you",type:"tonAddressResponse",translationValues:[]}:void 0}function Es(e,t){return{mediaType:"poll",id:String(t),summary:tt(e.summary,["question","answers"]),results:{}}}function xs(e){const{filename:t,blobUrl:n,previewBlobUrl:s,mimeType:i,size:a,audio:o,shouldSendAsFile:r,shouldSendAsSpoiler:d,ttlSeconds:c}=e;if(!r){if(e.quick){if(j.has(i)){const{width:t,height:i}=e.quick;return{photo:{mediaType:"photo",id:ws,sizes:[],thumbnail:{width:t,height:i,dataUri:s||n},blobUrl:n,date:Math.round(Date.now()/1e3),isSpoiler:d}}}if(L.has(i)){const{width:o,height:r,duration:c}=e.quick;return{video:{mediaType:"video",id:ws,mimeType:i,duration:c||0,fileName:t,width:o,height:r,blobUrl:n,...s&&{thumbnail:{width:o,height:r,dataUri:s}},size:a,isSpoiler:d}}}}if(e.voice){const{duration:t,waveform:n}=e.voice,{data:s}=Gn(n,Is);return{voice:{mediaType:"voice",id:ws,duration:t,waveform:s,size:a},ttlSeconds:c}}if(V.has(i)){const{duration:e,performer:n,title:s}=o||{};return{audio:{mediaType:"audio",id:ws,mimeType:i,fileName:t,size:a,duration:e||0,title:s,performer:n}}}}return{document:{mediaType:"document",mimeType:i,fileName:t,size:a,...s&&{previewBlobUrl:s}}}}function Ns(e){const t=Fe(e);if(t&&e instanceof pe.Api.Message&&e.replies)return Hs(e.replies,e.id,t)}function Hs(e,t,n){const{channelId:s,replies:i,maxId:a,readMaxId:o,recentRepliers:r,comments:d}=e,c=s?me(s,"channel"):void 0;if(c===Y)return;const u={messagesCount:i,...a&&{lastMessageId:a},...o&&{lastReadMessageId:o},...r&&{recentReplierIds:r.map(ge)}};return d?{...u,isCommentsInfo:!0,chatId:c,originChannelId:n,originMessageId:t}:{...u,isCommentsInfo:!1,chatId:n,threadId:t}}function Gs(e){const{shortcutId:t,shortcut:n,topMessage:s}=e;return{id:t,shortcut:n,topMessageId:s}}function Fs(e){const{address:t,geoPoint:n}=e;return{address:t,geo:n&&Ht(n)}}function _s(e){const{timezoneId:t,weeklyOpen:n}=e;return{timezoneId:t,workHours:n.map((e=>{let{startMinute:t,endMinute:n}=e;return{startMinute:t,endMinute:n}}))}}function qs(e){const{title:t,description:n,sticker:s}=e;return{title:t,description:n,sticker:s&&Pt(s)}}function Os(e){const{fullUser:{about:t,commonChatsCount:n,pinnedMsgId:s,botInfo:i,blocked:a,profilePhoto:o,voiceMessagesForbidden:r,premiumGifts:d,fallbackPhoto:c,personalPhoto:u,translationsDisabled:l,storiesPinnedAvailable:p,contactRequirePremium:f,businessWorkHours:h,businessLocation:m,businessIntro:g,birthday:A,personalChannelId:y,personalChannelMessage:w,sponsoredEnabled:I},users:b}=e,S=me(b[0].id,"user");return{bio:t,commonChatsCount:n,pinnedMessageId:s,isBlocked:Boolean(a),noVoiceMessages:r,hasPinnedStories:Boolean(p),isTranslationDisabled:l,profilePhoto:o instanceof pe.Api.Photo?At(o):void 0,fallbackPhoto:c instanceof pe.Api.Photo?At(c):void 0,personalPhoto:u instanceof pe.Api.Photo?At(u):void 0,premiumGifts:d?.map((e=>function(e){const{months:t,currency:n,amount:s,botUrl:i}=e;return{months:t,currency:n,amount:s.toJSNumber(),botUrl:i}}(e))),botInfo:i&&Jt(i,S),isContactRequirePremium:f,birthday:A&&zs(A),businessLocation:m&&Fs(m),businessWorkHours:h&&_s(h),businessIntro:g&&qs(g),personalChannelId:y&&me(y,"channel"),personalChannelMessageId:w,areAdsEnabled:I}}function js(e){if(!(e instanceof pe.Api.User))return;const{id:t,firstName:n,lastName:s,fake:i,scam:a,support:o,closeFriend:r,storiesUnavailable:d,storiesMaxId:c}=e,u=e.photo instanceof pe.Api.UserProfilePhoto?Boolean(e.photo.hasVideo):void 0,l=e.photo&&Ct(e.photo),p=(m=e).bot?"userTypeBot":m.deleted?"userTypeDeleted":"userTypeRegular",f=It(e),h=e.emojiStatus?ye(e.emojiStatus):void 0;var m;return{id:me(t,"user"),isMin:Boolean(e.min),fakeType:a?"scam":i?"fake":void 0,...e.self&&{isSelf:!0},isPremium:Boolean(e.premium),...e.verified&&{isVerified:!0},...r&&{isCloseFriend:!0},...o&&{isSupport:!0},...(e.contact||e.mutualContact)&&{isContact:!0},type:p,firstName:n,lastName:s,canEditBot:Boolean(e.botCanEdit),..."userTypeBot"===p&&{canBeInvitedToGroup:!e.botNochats},...f&&{usernames:f},phoneNumber:e.phone||"",noStatus:!e.status,...e.accessHash&&{accessHash:String(e.accessHash)},avatarPhotoId:l,emojiStatus:h,hasVideoAvatar:u,areStoriesHidden:Boolean(e.storiesHidden),maxStoryId:c,hasStories:Boolean(c)&&!d,...e.bot&&e.botInlinePlaceholder&&{botPlaceholder:e.botInlinePlaceholder},...e.bot&&e.botAttachMenu&&{isAttachBot:e.botAttachMenu},color:e.color&&Ae(e.color)}}function Ls(e){return!e||e instanceof pe.Api.UserStatusEmpty?{type:"userStatusEmpty"}:e instanceof pe.Api.UserStatusOnline?{type:"userStatusOnline",expires:e.expires}:e instanceof pe.Api.UserStatusOffline?{type:"userStatusOffline",wasOnline:e.wasOnline}:e instanceof pe.Api.UserStatusRecently?{type:"userStatusRecently",isReadDateRestrictedByMe:e.byMe}:e instanceof pe.Api.UserStatusLastWeek?{type:"userStatusLastWeek",isReadDateRestrictedByMe:e.byMe}:{type:"userStatusLastMonth",isReadDateRestrictedByMe:e.byMe}}function Vs(e){const t={},n={};return e.forEach((e=>{const s=js(e);if(!s)return;const i=n[s.id];i&&!i.isMin||(n[s.id]=s),"status"in e&&(t[s.id]=Ls(e.status))})),{users:Object.values(n),userStatusesById:t}}function zs(e){return ve(e)}function Ws(e){if(e instanceof pe.Api.WallPaperNoFile)return;const{slug:t}=e,n=Nt(e.document);return n?{slug:t,document:n}:void 0}function Js(e){return{isCurrent:Boolean(e.current),isOfficialApp:Boolean(e.officialApp),isPasswordPending:Boolean(e.passwordPending),hash:String(e.hash),areCallsEnabled:!e.callRequestsDisabled,areSecretChatsEnabled:!e.encryptedRequestsDisabled,isUnconfirmed:e.unconfirmed,...tt(e,["deviceModel","platform","systemVersion","appName","appVersion","dateCreated","dateActive","ip","country","region"])}}function Ks(e){return{hash:String(e.hash),botId:me(e.botId,"user"),...tt(e,["platform","browser","dateCreated","dateActive","ip","region","domain"])}}function $s(e,t){const{silent:n,muteUntil:s,showPreviews:i,otherSound:a}=e,o=Boolean(a&&!(a instanceof pe.Api.NotificationSoundNone));return{chatId:ge(t),isMuted:n||"number"==typeof s&&ct()<s,...!o&&{isSilent:!0},...void 0!==i&&{shouldShowPreviews:Boolean(i)},muteUntil:s}}function Qs(e,t){const{hidden:n,iso2:s,defaultName:i,name:a}=e,{countryCode:o,prefixes:r,patterns:d}=t||{};return{isHidden:n,iso2:s,defaultName:i,name:a,countryCode:o,prefixes:r,patterns:d}}function Ys(e){if(!(e instanceof pe.Api.JsonNull))return e instanceof pe.Api.JsonString||e instanceof pe.Api.JsonBool||e instanceof pe.Api.JsonNumber?e.value:e instanceof pe.Api.JsonArray?e.value.map(Ys):e.value.reduce(((e,t)=>(e[t.key]=Ys(t.value),e)),{})}function Zs(e){if(e instanceof pe.Api.UrlAuthResultRequest){const{bot:t,domain:n,requestWriteAccess:s}=e,i=js(t);if(!i)return;return Je(t),{type:"request",domain:n,shouldRequestWriteAccess:s,bot:i}}return e instanceof pe.Api.UrlAuthResultAccepted?{type:"accepted",url:e.url}:e instanceof pe.Api.UrlAuthResultDefault?{type:"default"}:void 0}function Xs(e){return e.strings.reduce(((e,t)=>(e[t.key]=ei(t),e)),{})}function ei(e){return e instanceof pe.Api.LangPackString?e.value:e instanceof pe.Api.LangPackStringPluralized?st(ve(e),["key"]):void 0}function ti(e){const t=[],n=e.reduce(((e,n)=>(n instanceof pe.Api.LangPackStringDeleted&&t.push(n.key),n instanceof pe.Api.LangPackString&&(e[n.key]=n.value),n instanceof pe.Api.LangPackStringPluralized&&(e[n.key]=it({zero:n.zeroValue,one:n.oneValue,two:n.twoValue,few:n.fewValue,many:n.manyValue,other:n.otherValue})),e)),{});return{keysToRemove:t,strings:n}}function ni(e){const{name:t,nativeName:n,langCode:s,pluralCode:i,rtl:a,stringsCount:o,translatedCount:r,translationsUrl:d,beta:c,official:u}=e;return{name:t,nativeName:n,langCode:s,pluralCode:i,isRtl:a,isBeta:c,isOfficial:u,stringsCount:o,translatedCount:r,translationsUrl:d}}function si(e){if(e instanceof pe.Api.help.PeerColorSet)return e.colors.map((e=>`#${e.toString(16).padStart(6,"0")}`))}function ii(e){const{id:t,name:n,utcOffset:s}=e;return{id:t,name:n,utcOffset:s}}function ai(e,t){if(t instanceof pe.Api.StoryItemDeleted)return{id:t.id,peerId:e,isDeleted:!0};if(t instanceof pe.Api.StoryItemSkipped){const{id:n,date:s,expireDate:i,closeFriends:a}=t;return{id:n,peerId:e,...a&&{isForCloseFriends:!0},date:s,expireDate:i}}const{edited:n,pinned:s,expireDate:i,id:a,date:o,caption:r,entities:d,media:c,privacy:u,views:l,public:p,noforwards:f,closeFriends:h,contacts:m,selectedContacts:g,mediaAreas:A,sentReaction:y,out:w,fwdFrom:I,fromId:b}=t,S={...Dt(c)};return r&&(S.text=kt(r,d)),it({id:a,peerId:e,date:o,expireDate:i,content:S,isPublic:p,isEdited:n,isInProfile:s,isForContacts:m,isForSelectedContacts:g,isForCloseFriends:h,noForwards:f,views:l&&oi(l),isOut:w,visibility:u&&bt(u),mediaAreas:A?.map(ui).filter(Boolean),sentReaction:y&&cn(y),forwardInfo:I&&li(I),fromId:b&&ge(b)})}function oi(e){return it({hasViewers:e.hasViewers,viewsCount:e.viewsCount,forwardsCount:e.forwardsCount,reactionsCount:e.reactionsCount,reactions:e.reactions?.map(rn).filter(Boolean),recentViewerIds:e.recentViewers?.map((e=>me(e,"user")))})}function ri(e){const{blockedMyStoriesFrom:t,blocked:n}=e;if(e instanceof pe.Api.StoryView)return it({type:"user",peerId:me(e.userId,"user"),date:e.date,reaction:e.reaction&&cn(e.reaction),areStoriesBlocked:n||t,isUserBlocked:n});if(e instanceof pe.Api.StoryViewPublicForward){const s=Ms(e.message);if(!s)return;return{type:"forward",peerId:s.chatId,messageId:s.id,message:s,date:s.date,areStoriesBlocked:n||t,isUserBlocked:n}}if(e instanceof pe.Api.StoryViewPublicRepost){const s=ge(e.peerId),i=ai(s,e.story);if(!("content"in i))return;return{type:"repost",peerId:s,storyId:e.story.id,date:i.date,story:i,areStoriesBlocked:n||t,isUserBlocked:n}}}function di(e){return{activeUntil:e.activeUntilDate,cooldownUntil:e.cooldownUntilDate}}function ci(e){const{x:t,y:n,w:s,h:i,rotation:a,radius:o}=e;return{x:t,y:n,width:s,height:i,rotation:a,radius:o}}function ui(e){if(e instanceof pe.Api.MediaAreaVenue){const{geo:t,title:n,coordinates:s}=e,i=Ht(t);if(!i)return;return{type:"venue",coordinates:ci(s),geo:i,title:n}}if(e instanceof pe.Api.MediaAreaGeoPoint){const{geo:t,coordinates:n}=e,s=Ht(t);if(!s)return;return{type:"geoPoint",coordinates:ci(n),geo:s}}if(e instanceof pe.Api.MediaAreaSuggestedReaction){const{coordinates:t,reaction:n,dark:s,flipped:i}=e,a=cn(n);if(!a)return;return{type:"suggestedReaction",coordinates:ci(t),reaction:a,...s&&{isDark:!0},...i&&{isFlipped:!0}}}if(e instanceof pe.Api.MediaAreaChannelPost){const{coordinates:t,channelId:n,msgId:s}=e;return{type:"channelPost",coordinates:ci(t),channelId:me(n,"channel"),messageId:s}}if(e instanceof pe.Api.MediaAreaUrl){const{coordinates:t,url:n}=e;return{type:"url",coordinates:ci(t),url:n}}}function li(e){const{from:t,fromName:n,storyId:s,modified:i}=e;return{storyId:s,fromPeerId:t&&ge(t),fromName:n,isModified:i}}const pi=new Map,fi=[],hi=(e,t)=>{const n=e.topicId?`${e.chatId}-${e.topicId}`:e.chatId;if(pi.has(n)&&(clearTimeout(pi.get(n)),pi.delete(n)),e.muteUntil===D||e.muteUntil<=ct())return;if(fi.push(e),fi.sort(((e,t)=>t.muteUntil-e.muteUntil)),!fi.pop())return;const s=setTimeout((()=>{if(t(),fi.length){const e=fi.pop();e&&hi(e,t)}}),1e3*(e.muteUntil-ct()));pi.set(n,s)};function mi(e){let t=arguments.length>2?arguments[2]:void 0;hi({chatId:e,muteUntil:arguments.length>1&&void 0!==arguments[1]?arguments[1]:0},(()=>t({"@type":"updateNotifyExceptions",chatId:e,isMuted:!1})))}var gi=n(86453);class Ai{constructor(e,t){this.pts=e,this.ptsCount=t}}class yi{constructor(e,t,n){this.channelId=e,this.pts=t,this.ptsCount=n}}let wi;const Ii=new Set;function bi(e){e.filter((e=>e instanceof pe.Api.User)).map(js).forEach((e=>{e&&wi({"@type":"updateUser",id:e.id,user:e})})),e.filter((e=>e instanceof pe.Api.Chat||e instanceof pe.Api.ChatForbidden||e instanceof pe.Api.Channel||e instanceof pe.Api.ChannelForbidden)).map((e=>yn(e))).forEach((e=>{e&&wi({"@type":"updateChat",id:e.id,chat:e})}))}function Si(e){const t=at(e).map(Ns).filter(Boolean);t.length&&wi({"@type":"updateThreadInfos",threadInfoUpdates:t})}function vi(e){wi(e)}function Ci(e){if(e instanceof pe.connection.UpdateServerTimeOffset)i=e.timeOffset,rt=i,wi({"@type":"updateServerTimeOffset",serverTimeOffset:e.timeOffset});else if(e instanceof pe.connection.UpdateConnectionState){let t;switch(e.state){case pe.connection.UpdateConnectionState.disconnected:t="connectionStateConnecting";break;case pe.connection.UpdateConnectionState.broken:t="connectionStateBroken";break;case pe.connection.UpdateConnectionState.connected:default:t="connectionStateReady"}wi({"@type":"updateConnectionState",connectionState:t})}else if(e instanceof pe.Api.UpdateNewMessage||e instanceof pe.Api.UpdateNewScheduledMessage||e instanceof pe.Api.UpdateNewChannelMessage||e instanceof pe.Api.UpdateShortChatMessage||e instanceof pe.Api.UpdateShortMessage){let t,n;const i=e._entities;if(i&&(Ke(i),bi(i)),e instanceof pe.Api.UpdateShortChatMessage)t=Ts(me((s=e).chatId,"chat"),{...s,fromId:On(me(s.fromId,"user")),peerId:On(me(s.chatId,"chat"))});else if(e instanceof pe.Api.UpdateShortMessage)t=function(e){return Ts(me(e.userId,"user"),{...e,fromId:On(e.out?Ss:me(e.userId,"user")),peerId:On(e.out?me(e.userId,"user"):Ss)})}(e);else{if(e.message instanceof pe.Api.MessageEmpty)return void(d&&console.error("Unexpected update:",e.className,e));qe(e.message),t=Ms(e.message),Si([e.message]),n="replyMarkup"in e.message&&e.message?.replyMarkup instanceof pe.Api.ReplyKeyboardForceReply&&(!e.message.replyMarkup.selective||t.isMentioned)}if(e instanceof pe.Api.UpdateNewScheduledMessage)wi({"@type":Ii.has(t.id)?"updateScheduledMessage":"newScheduledMessage",id:t.id,chatId:t.chatId,message:t});else{const e=Ii.has(t.id)&&!t.viaBotId&&!t.content.action;wi({"@type":e?"updateMessage":"newMessage",id:t.id,chatId:t.chatId,message:t,shouldForceReply:n})}if(e.message instanceof pe.Api.MessageService){const{action:n}=e.message;if(n instanceof pe.Api.MessageActionChatEditTitle)wi({"@type":"updateChat",id:t.chatId,chat:{title:n.title}});else if(n instanceof pe.Api.MessageActionChatEditPhoto){const s=n.photo instanceof pe.Api.Photo&&At(n.photo);if(!s)return;const i=function(e){if(e instanceof pe.Api.PhotoEmpty)return new pe.Api.ChatPhotoEmpty;const{dcId:t,id:n}=e;return new pe.Api.ChatPhoto({dcId:t,photoId:n})}(n.photo),a=Fe(e.message);De.chats[a]&&(De.chats[a].photo=i),Le(n.photo),wi({"@type":"updateNewProfilePhoto",peerId:t.chatId,photo:s})}else if(n instanceof pe.Api.MessageActionChatDeletePhoto){const n=Fe(e.message);De.chats[n]&&(De.chats[n].photo=new pe.Api.ChatPhotoEmpty),wi({"@type":"updateDeleteProfilePhoto",peerId:t.chatId})}else if(n instanceof pe.Api.MessageActionChatDeleteUser)e._entities&&e._entities.some((e=>e instanceof pe.Api.User&&Boolean(e.self)&&e.id===n.userId))&&wi({"@type":"updateChat",id:t.chatId,chat:{isForbidden:!0,isNotJoined:!0}});else if(n instanceof pe.Api.MessageActionChatAddUser)e._entities&&e._entities.some((e=>e instanceof pe.Api.User&&Boolean(e.self)&&n.users.includes(e.id)))&&wi({"@type":"updateChatJoin",id:t.chatId});else if(n instanceof pe.Api.MessageActionGroupCall)!n.duration&&n.call&&wi({"@type":"updateGroupCallChatId",chatId:t.chatId,call:{id:n.call.id.toString(),accessHash:n.call.accessHash.toString()}});else if(n instanceof pe.Api.MessageActionTopicEdit){const t=e.message.replyTo instanceof pe.Api.MessageReplyHeader?e.message.replyTo:void 0,{replyToMsgId:n,replyToTopId:s,forumTopic:i}=t||{},a=i&&(s||n)||X;wi({"@type":"updateTopic",chatId:ge(e.message.peerId),topicId:a})}else n instanceof pe.Api.MessageActionTopicCreate&&wi({"@type":"updateTopics",chatId:ge(e.message.peerId)})}}else if(e instanceof pe.Api.UpdateQuickReplyMessage){const t=Ms(e.message);if(!t)return;wi({"@type":"updateQuickReplyMessage",id:t.id,message:t})}else if(e instanceof pe.Api.UpdateDeleteQuickReplyMessages)wi({"@type":"deleteQuickReplyMessages",quickReplyId:e.shortcutId,messageIds:e.messages});else if(e instanceof pe.Api.UpdateQuickReplies){const t=e.quickReplies.map(Gs);wi({"@type":"updateQuickReplies",quickReplies:t})}else if(e instanceof pe.Api.UpdateNewQuickReply){const t=Gs(e.quickReply);wi({"@type":"updateQuickReplies",quickReplies:[t]})}else if(e instanceof pe.Api.UpdateDeleteQuickReply)wi({"@type":"deleteQuickReply",quickReplyId:e.shortcutId});else if(e instanceof pe.Api.UpdateEditMessage||e instanceof pe.Api.UpdateEditChannelMessage){if(e.message instanceof pe.Api.MessageEmpty)return void(d&&console.error("Unexpected update:",e.className,e));qe(e.message);const t=st(Ms(e.message),["isOutgoing"]);Si([e.message]),wi({"@type":"updateMessage",id:t.id,chatId:t.chatId,message:t})}else if(e instanceof pe.Api.UpdateMessageReactions)wi({"@type":"updateMessageReactions",id:e.msgId,chatId:ge(e.peer),reactions:an(e.reactions)});else if(e instanceof pe.Api.UpdateMessageExtendedMedia){const t=ge(e.peer),n=e.extendedMedia[0]instanceof pe.Api.MessageExtendedMedia;if(n){const s=Lt(e.extendedMedia);if(!s?.length)return;return void wi({"@type":"updateMessageExtendedMedia",id:e.msgId,chatId:t,isBought:n,extendedMedia:s})}const s=n?void 0:e.extendedMedia.filter((e=>e instanceof pe.Api.MessageExtendedMediaPreview)).map((e=>Ot(e))).filter(Boolean);if(!s?.length)return;wi({"@type":"updateMessageExtendedMedia",id:e.msgId,chatId:t,extendedMedia:s})}else if(e instanceof pe.Api.UpdateDeleteMessages)wi({"@type":"deleteMessages",ids:e.messages});else if(e instanceof pe.Api.UpdateDeleteScheduledMessages)wi({"@type":"deleteScheduledMessages",ids:e.messages,chatId:ge(e.peer)});else if(e instanceof pe.Api.UpdateDeleteChannelMessages){const t=me(e.channelId,"channel");wi({"@type":"deleteMessages",ids:e.messages,chatId:t})}else if(e instanceof pe.Api.UpdateServiceNotification)if(e.popup)wi({"@type":"error",error:{message:e.message}});else{const t=function(e,t){const n=Cs(t),s=Ut(e);return{id:n,chatId:W,date:e.inboxDate||t,content:s,isOutgoing:!1}}(e,Date.now()/1e3+dt());qe(Yn(t.id,t.chatId,e)),wi({"@type":"updateServiceNotification",message:t})}else if(e instanceof pe.Api.UpdateMessageID||e instanceof pe.Api.UpdateShortSentMessage)Ii.add(e.id);else if(e instanceof pe.Api.UpdateReadMessagesContents)wi({"@type":"updateCommonBoxMessages",ids:e.messages,messageUpdate:{hasUnreadMention:!1,isMediaUnread:!1}});else if(e instanceof pe.Api.UpdateChannelReadMessagesContents)wi({"@type":"updateChannelMessages",channelId:me(e.channelId,"channel"),ids:e.messages,messageUpdate:{hasUnreadMention:!1,isMediaUnread:!1}});else if(e instanceof pe.Api.UpdateMessagePoll){const{pollId:t,poll:n,results:s}=e;if(n){const e=Gt(n,s);wi({"@type":"updateMessagePoll",pollId:String(t),pollUpdate:e})}else{const e=Ft(s);wi({"@type":"updateMessagePoll",pollId:String(t),pollUpdate:{results:e}})}}else if(e instanceof pe.Api.UpdateMessagePollVote)wi({"@type":"updateMessagePollVote",pollId:String(e.pollId),peerId:ge(e.peer),options:e.options.map(Qe)});else if(e instanceof pe.Api.UpdateChannelMessageViews)wi({"@type":"updateMessage",chatId:me(e.channelId,"channel"),id:e.id,message:{viewsCount:e.views}});else if(e instanceof pe.Api.UpdateReadHistoryInbox)wi({"@type":"updateChatInbox",id:ge(e.peer),chat:{lastReadInboxMessageId:e.maxId,unreadCount:e.stillUnreadCount}});else if(e instanceof pe.Api.UpdateReadHistoryOutbox)wi({"@type":"updateChat",id:ge(e.peer),chat:{lastReadOutboxMessageId:e.maxId}});else if(e instanceof pe.Api.UpdateReadChannelInbox)wi({"@type":"updateChat",id:me(e.channelId,"channel"),chat:{lastReadInboxMessageId:e.maxId,unreadCount:e.stillUnreadCount}});else if(e instanceof pe.Api.UpdateReadChannelOutbox)wi({"@type":"updateChat",id:me(e.channelId,"channel"),chat:{lastReadOutboxMessageId:e.maxId}});else if(e instanceof pe.Api.UpdateReadChannelDiscussionInbox)wi({"@type":"updateThreadInfos",threadInfoUpdates:[{chatId:me(e.channelId,"channel"),threadId:e.topMsgId,lastReadInboxMessageId:e.readMaxId}]});else if(e instanceof pe.Api.UpdateReadChannelDiscussionOutbox)wi({"@type":"updateChat",id:me(e.channelId,"channel"),chat:{lastReadOutboxMessageId:e.readMaxId}});else if(e instanceof pe.Api.UpdateDialogPinned&&e.peer instanceof pe.Api.DialogPeer)wi({"@type":"updateChatPinned",id:ge(e.peer.peer),isPinned:e.pinned||!1});else if(e instanceof pe.Api.UpdatePinnedDialogs){const t=e.order?e.order.filter((e=>e instanceof pe.Api.DialogPeer)).map((e=>ge(e.peer))):[];wi({"@type":"updatePinnedChatIds",ids:t,folderId:e.folderId||void 0})}else if(e instanceof pe.Api.UpdateSavedDialogPinned&&e.peer instanceof pe.Api.DialogPeer)wi({"@type":"updateSavedDialogPinned",id:ge(e.peer.peer),isPinned:e.pinned||!1});else if(e instanceof pe.Api.UpdatePinnedSavedDialogs){const t=e.order?e.order.filter((e=>e instanceof pe.Api.DialogPeer)).map((e=>ge(e.peer))):[];wi({"@type":"updatePinnedSavedDialogIds",ids:t})}else if(e instanceof pe.Api.UpdateFolderPeers)e.folderPeers.forEach((e=>{const{folderId:t,peer:n}=e;wi({"@type":"updateChatListType",id:ge(n),folderId:t})}));else if(e instanceof pe.Api.UpdateDialogFilter){const{id:t,filter:n}=e,s=_e(n)?Mn(n):void 0;wi({"@type":"updateChatFolder",id:t,folder:s})}else if(e instanceof pe.Api.UpdateDialogFilterOrder)wi({"@type":"updateChatFoldersOrder",orderedIds:e.order});else if(e instanceof pe.Api.UpdateChatParticipants){const t=Cn(e.participants);wi({"@type":"updateChatMembers",id:me(e.participants.chatId,"chat"),replacedMembers:t})}else if(e instanceof pe.Api.UpdateChatParticipantAdd){const t=vn(tt(e,["userId","inviterId","date"]));wi({"@type":"updateChatMembers",id:me(e.chatId,"chat"),addedMember:t})}else if(e instanceof pe.Api.UpdateChatParticipantDelete)wi({"@type":"updateChatMembers",id:me(e.chatId,"chat"),deletedMemberId:me(e.userId,"user")});else if(e instanceof pe.Api.UpdatePinnedMessages||e instanceof pe.Api.UpdatePinnedChannelMessages){const t=e instanceof pe.Api.UpdatePinnedMessages?ge(e.peer):me(e.channelId,"channel");wi({"@type":"updatePinnedIds",chatId:t,messageIds:e.messages,isPinned:e.pinned})}else if(e instanceof pe.Api.UpdateNotifySettings&&e.peer instanceof pe.Api.NotifyPeer){const t=$s(e.notifySettings,e.peer.peer);mi(t.chatId,t.muteUntil,wi),wi({"@type":"updateNotifyExceptions",...t})}else if(e instanceof pe.Api.UpdateNotifySettings&&e.peer instanceof pe.Api.NotifyForumTopic){const t=function(e,t,n){const{silent:s,muteUntil:i,showPreviews:a,otherSound:o}=e,r=Boolean(o&&!(o instanceof pe.Api.NotificationSoundNone));return{chatId:ge(t),topicId:n,isMuted:s||"number"==typeof i&&ct()<i,...!r&&{isSilent:!0},...void 0!==a&&{shouldShowPreviews:Boolean(a)},muteUntil:i}}(e.notifySettings,e.peer.peer,e.peer.topMsgId);!function(e,t){let n=arguments.length>3?arguments[3]:void 0;hi({chatId:e,topicId:t,muteUntil:arguments.length>2&&void 0!==arguments[2]?arguments[2]:0},(()=>n({"@type":"updateTopicNotifyExceptions",chatId:e,topicId:t,isMuted:!1})))}(t.chatId,t.topicId,t.muteUntil,wi),wi({"@type":"updateTopicNotifyExceptions",...t})}else if(e instanceof pe.Api.UpdateUserTyping||e instanceof pe.Api.UpdateChatUserTyping){const t=e instanceof pe.Api.UpdateUserTyping?me(e.userId,"user"):me(e.chatId,"chat");e.action instanceof pe.Api.SendMessageEmojiInteraction?wi({"@type":"updateStartEmojiInteraction",id:t,emoji:e.action.emoticon,messageId:e.action.msgId,interaction:(n=JSON.parse(e.action.interaction.data),{timestamps:n.a.map((e=>{let{t}=e;return t}))})}):wi({"@type":"updateChatTypingStatus",id:t,typingStatus:Pn(e)})}else if(e instanceof pe.Api.UpdateChannelUserTyping){const t=me(e.channelId,"channel");wi({"@type":"updateChatTypingStatus",id:t,threadId:e.topMsgId,typingStatus:Pn(e)})}else if(e instanceof pe.Api.UpdateChannel){const{_entities:t}=e;if(!t)return;const n=t.find((e=>e instanceof pe.Api.Channel||e instanceof pe.Api.ChannelForbidden));if(n instanceof pe.Api.Channel){const t=yn(n);t&&(wi({"@type":"updateChat",id:t.id,chat:t}),wi({"@type":t.isNotJoined?"updateChatLeave":"updateChatJoin",id:me(e.channelId,"channel")}))}else if(n instanceof pe.Api.ChannelForbidden){const t=me(e.channelId,"channel");wi({"@type":"updateChat",id:t,chat:{isRestricted:!0}}),wi({"@type":"updateChatLeave",id:t})}else 0===t.length&&wi({"@type":"resetMessages",id:me(e.channelId,"channel")})}else if(e instanceof pe.Api.UpdateDialogUnreadMark&&e.peer instanceof pe.Api.DialogPeer)wi({"@type":"updateChat",id:ge(e.peer.peer),chat:{hasUnreadMark:e.unread}});else if(e instanceof pe.Api.UpdateChatDefaultBannedRights)wi({"@type":"updateChat",id:ge(e.peer),chat:{defaultBannedRights:ve(e.defaultBannedRights)}});else if(e instanceof pe.Api.UpdateUserStatus)wi({"@type":"updateUserStatus",userId:me(e.userId,"user"),status:Ls(e.status)});else if(e instanceof pe.Api.UpdateUser)wi({"@type":"updateRequestUserUpdate",id:me(e.userId,"user")});else if(e instanceof pe.Api.UpdateUserEmojiStatus){const t=ye(e.emojiStatus);wi({"@type":"updateUserEmojiStatus",userId:me(e.userId,"user"),emojiStatus:t})}else if(e instanceof pe.Api.UpdateUserName){const t=me(e.userId,"user"),n=De.users[t],s=n?.mutualContact&&!n.self?tt(e,[]):tt(e,["firstName","lastName"]),i=It(e);wi({"@type":"updateUser",id:t,user:{...s,usernames:i}})}else if(e instanceof pe.Api.UpdateUserPhone){const{userId:t,phone:n}=e;wi({"@type":"updateUser",id:me(t,"user"),user:{phoneNumber:n}})}else if(e instanceof pe.Api.UpdatePeerSettings){const{_entities:t,settings:n}=e;if(!t)return;t?.length&&(t.filter((e=>e instanceof pe.Api.User&&!e.contact)).forEach((e=>{wi({"@type":"deleteContact",id:me(e.id,"user")})})),t.filter((e=>e instanceof pe.Api.User&&e.contact)).map(js).forEach((e=>{e&&wi({"@type":"updateUser",id:e.id,user:{...e,...n&&{settings:Un(n)}}})})))}else if(e instanceof pe.Api.UpdateNotifySettings){const{notifySettings:{showPreviews:t,silent:n,muteUntil:s},peer:{className:i}}=e,a="NotifyUsers"===i?"contact":"NotifyChats"===i?"group":"NotifyBroadcasts"===i?"broadcast":void 0;if(!a)return;wi({"@type":"updateNotifySettings",peerType:a,isSilent:Boolean(n||"number"==typeof s&&Date.now()+1e3*dt()<1e3*s),shouldShowPreviews:Boolean(t)})}else if(e instanceof pe.Api.UpdatePeerBlocked)wi({"@type":"updatePeerBlocked",id:ge(e.peerId),isBlocked:e.blocked,isBlockedFromStories:e.blockedMyStoriesFrom});else if(e instanceof pe.Api.UpdatePrivacy){const t=function(e){switch(e.className){case"PrivacyKeyPhoneNumber":return"phoneNumber";case"PrivacyKeyAddedByPhone":return"addByPhone";case"PrivacyKeyStatusTimestamp":return"lastSeen";case"PrivacyKeyProfilePhoto":return"profilePhoto";case"PrivacyKeyPhoneCall":return"phoneCall";case"PrivacyKeyPhoneP2P":return"phoneP2P";case"PrivacyKeyForwards":return"forwards";case"PrivacyKeyVoiceMessages":return"voiceMessages";case"PrivacyKeyChatInvite":return"chatInvite";case"PrivacyKeyAbout":return"bio";case"PrivacyKeyBirthday":return"birthday"}}(e.key);t&&wi({"@type":"updatePrivacy",key:t,rules:bt(e.rules)})}else if(e instanceof pe.Api.UpdateDraftMessage)wi({"@type":"draftMessage",chatId:ge(e.peer),threadId:e.topMsgId,draft:Bs(e.draft)});else if(e instanceof pe.Api.UpdateContactsReset)wi({"@type":"updateResetContactList"});else if(e instanceof pe.Api.UpdateFavedStickers)wi({"@type":"updateFavoriteStickers"});else if(e instanceof pe.Api.UpdateRecentStickers)wi({"@type":"updateRecentStickers"});else if(e instanceof pe.Api.UpdateRecentReactions)wi({"@type":"updateRecentReactions"});else if(e instanceof pe.Api.UpdateSavedReactionTags)wi({"@type":"updateSavedReactionTags"});else if(e instanceof pe.Api.UpdateMoveStickerSetToTop)e.masks||wi({"@type":"updateMoveStickerSetToTop",isCustomEmoji:e.emojis,id:e.stickerset.toString()});else if(e instanceof pe.Api.UpdateStickerSets)wi({"@type":"updateStickerSets"});else if(e instanceof pe.Api.UpdateStickerSetsOrder)e.masks||wi({"@type":"updateStickerSetsOrder",order:e.order.map((e=>e.toString())),isCustomEmoji:e.emojis});else if(e instanceof pe.Api.UpdateNewStickerSet){if(e.stickerset instanceof pe.Api.messages.StickerSet){const t=Mt(e.stickerset.set);wi({"@type":"updateStickerSet",id:t.id,stickerSet:t})}}else if(e instanceof pe.Api.UpdateSavedGifs)wi({"@type":"updateSavedGifs"});else if(e instanceof pe.Api.UpdateGroupCall){const t=e._entities;t&&(Ke(t),bi(t)),wi({"@type":"updateGroupCall",call:Zt(e.call)})}else if(e instanceof pe.Api.UpdateGroupCallConnection)wi({"@type":"updateGroupCallConnection",data:JSON.parse(e.params.data),presentation:Boolean(e.presentation)});else if(e instanceof pe.Api.UpdateGroupCallParticipants){const n=e._entities;n&&(Ke(n),bi(n)),wi({"@type":"updateGroupCallParticipants",groupCallId:(t=e.call,t.id.toString()),participants:e.participants.map($t)})}else if(e instanceof pe.Api.UpdatePendingJoinRequests){const t=e._entities;t&&(Ke(t),bi(t)),wi({"@type":"updatePendingJoinRequests",chatId:ge(e.peer),recentRequesterIds:e.recentRequesters.map((e=>me(e,"user"))),requestsPending:e.requestsPending})}else if(e instanceof pe.Api.UpdatePhoneCall){const t=e._entities;t&&(Ke(t),bi(t)),wi({"@type":"updatePhoneCall",call:Xt(e.phoneCall)})}else if(e instanceof pe.Api.UpdatePhoneCallSignalingData)wi({"@type":"updatePhoneCallSignalingData",callId:e.phoneCallId.toString(),data:Array.from(e.data)});else if(e instanceof pe.Api.UpdateWebViewResultSent){const{queryId:t}=e;wi({"@type":"updateWebViewResultSent",queryId:t.toString()})}else if(e instanceof pe.Api.UpdateBotMenuButton){const{botId:t,button:n}=e,s=me(t,"user");wi({"@type":"updateBotMenuButton",botId:s,button:Kt(n)})}else if(e instanceof pe.Api.UpdateTranscribedAudio){const t=e._entities;t&&(Ke(t),bi(t)),wi({"@type":"updateTranscribedAudio",transcriptionId:e.transcriptionId.toString(),text:e.text,isPending:e.pending})}else if(e instanceof pe.Api.UpdateConfig){const t=e._entities;t&&(Ke(t),bi(t)),wi({"@type":"updateConfig"})}else if(e instanceof pe.Api.UpdateChannelPinnedTopic)wi({"@type":"updatePinnedTopic",chatId:me(e.channelId,"channel"),topicId:e.topicId,isPinned:Boolean(e.pinned)});else if(e instanceof pe.Api.UpdateChannelPinnedTopics)wi({"@type":"updatePinnedTopicsOrder",chatId:me(e.channelId,"channel"),order:e.order||[]});else if(e instanceof pe.Api.UpdateRecentEmojiStatuses)wi({"@type":"updateRecentEmojiStatuses"});else if(e instanceof pe.Api.UpdateStory){const t=e._entities;t&&(Ke(t),bi(t));const{story:n}=e,s=ge(e.peer),i=ai(s,n);je(n,s),n instanceof pe.Api.StoryItemDeleted?wi({"@type":"deleteStory",peerId:s,storyId:n.id}):wi({"@type":"updateStory",peerId:s,story:i})}else e instanceof pe.Api.UpdateReadStories?wi({"@type":"updateReadStories",peerId:ge(e.peer),lastReadId:e.maxId}):e instanceof pe.Api.UpdateSentStoryReaction?wi({"@type":"updateSentStoryReaction",peerId:ge(e.peer),storyId:e.storyId,reaction:cn(e.reaction)}):e instanceof pe.Api.UpdateStoriesStealthMode?wi({"@type":"updateStealthMode",stealthMode:di(e.stealthMode)}):e instanceof pe.Api.UpdateAttachMenuBots?wi({"@type":"updateAttachMenuBots"}):e instanceof pe.Api.UpdateNewAuthorization?wi({"@type":"updateNewAuthorization",hash:e.hash.toString(),date:e.date,device:e.device,location:e.location,isUnconfirmed:e.unconfirmed}):e instanceof pe.Api.UpdateChannelViewForumAsMessages?wi({"@type":"updateViewForumAsMessages",chatId:me(e.channelId,"channel"),isEnabled:!!e.enabled||void 0}):e instanceof pe.Api.UpdateStarsBalance?wi({"@type":"updateStarsBalance",balance:e.balance.toJSNumber()}):e instanceof gi.A?wi({"@type":"updatePremiumFloodWait",isUpload:e.isUpload}):e instanceof Ai||e instanceof yi||d&&Ze("UNEXPECTED UPDATE","object"==typeof e&&"className"in e?e.className:e);var t,n,s,i}const Pi={PHONE_NUMBER_INVALID:"Invalid phone number.",PHONE_CODE_INVALID:"Invalid code.",PASSWORD_HASH_INVALID:"Incorrect password.",PHONE_PASSWORD_FLOOD:"Limit exceeded. Please try again later.",PHONE_NUMBER_BANNED:"This phone number is banned."},Mi={};let Ti;function Bi(){Ti({"@type":"updateWebAuthTokenFailed"})}function Ri(){return Ti(Ni("authorizationStateWaitPhoneNumber")),new Promise(((e,t)=>{Mi.resolve=e,Mi.reject=t}))}function Ui(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return Ti({...Ni("authorizationStateWaitCode"),isCodeViaApp:e}),new Promise(((e,t)=>{Mi.resolve=e,Mi.reject=t}))}function ki(e,t){return Ti({...Ni("authorizationStateWaitPassword"),hint:e,noReset:t}),new Promise((e=>{Mi.resolve=e}))}function Di(){return Ti(Ni("authorizationStateWaitRegistration")),new Promise((e=>{Mi.resolve=e}))}function Ei(e){return Ti({...Ni("authorizationStateWaitQrCode"),qrCode:{token:btoa(String.fromCharCode(...e.token)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,""),expires:e.expires}}),new Promise(((e,t)=>{Mi.reject=t}))}function xi(e){let t;if(e instanceof pe.errors.FloodWaitError){const n=Math.ceil(Number(e.seconds)/60/60);t="Too many attempts. Try again in "+(n>1?`${n} hours`:"an hour")}else t=Pi[e.message];t||(t="Unexpected Error",d&&console.error(e)),Ti({"@type":"updateAuthorizationError",message:t})}function Ni(e){return{"@type":"updateAuthorizationState",authorizationState:e}}function Hi(e){Mi.resolve&&Mi.resolve(e)}function Gi(e){Mi.resolve&&Mi.resolve(e)}function Fi(e){Mi.resolve&&Mi.resolve(e)}function _i(e){const{firstName:t,lastName:n}=e;Mi.resolve&&Mi.resolve([t,n])}function qi(){Mi.reject&&Mi.reject(new Error("RESTART_AUTH"))}function Oi(){Mi.reject&&Mi.reject(new Error("RESTART_AUTH_WITH_QR"))}var ji=n(26462),Li=n.n(ji),Vi=n(4681),zi=n(51227);class Wi{constructor(e){var t,n,s,i;this.comparator=e,t=this,s=void 0,(n="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var s=n.call(e,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n="queue"))?i:i+"")in t?Object.defineProperty(t,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[n]=s,this.queue=[]}add(e){const t=this.binarySearch(e);this.queue.splice(t,0,e)}pop(){return this.queue.shift()}get size(){return this.queue.length}clear(){this.queue=[]}binarySearch(e){let t=0,n=this.queue.length;for(;t<n;){const s=Math.floor((t+n)/2),i=this.comparator(e,this.queue[s]);if(0===i)return s;i>0?t=s+1:n=s}return t}}const Ji="0",Ki=1e3,$i=500;let Qi,Yi,Zi=!1;const Xi=new Map,ea=new Wi((function(e,t){return("seqStart"in e?e.seqStart:e.seq)-("seqStart"in t?t.seqStart:t.seq)})),ta=new Map;function na(e){De.commonBoxState.seq=e.seq,De.commonBoxState.date=e.date,De.commonBoxState.pts=e.pts,De.commonBoxState.qts=e.qts}function sa(e,t,n){if(e instanceof zi.UpdateConnectionState)return e.state===zi.UpdateConnectionState.connected&&Zi&&ca(),void Ci(e);if(e instanceof zi.UpdateServerTimeOffset)Ci(e);else if(void 0!==De.commonBoxState.seq)return e instanceof pe.Api.Updates||e instanceof pe.Api.UpdatesCombined?(t&&(e._isFromDifference=!0),void function(e,t){ea.add(e),t||oa()}(e,n)):"pts"in e?e instanceof pe.Api.UpdateChannelTooLong?void pa(ua(e)):(t&&(e._isFromDifference=!0),void function(e,t){const n=ua(e),s=ta.get(n)||new Wi(wa);s.add(e),ta.set(n,s),t||ra(n)}(e,n)):void Ci(e)}function ia(e,t){if(!(De.chats[e]instanceof pe.Api.Channel))return void(d&&console.error(`[UpdateManager] Channel ${e} not found in localDb`));const n=De.channelPtsById[e];n&&n<t?da(e):De.channelPtsById[e]=t}function aa(e){if("seq"in e&&e.seq&&(De.commonBoxState.seq=e.seq,De.commonBoxState.date=e.date),"qts"in e&&(De.commonBoxState.qts=e.qts),"pts"in e){const t=ua(e);t!==Ji?De.channelPtsById[t]=e.pts:De.commonBoxState.pts=e.pts}if(e instanceof pe.Api.UpdatesCombined||e instanceof pe.Api.Updates){const t=e.users.concat(e.chats);e.updates.forEach((e=>{t&&(e._entities=t),sa(e)}))}else Ci(e)}function oa(){if(!ea.size)return;const e=ea.pop(),t=De.commonBoxState.seq,n="seqStart"in e?e.seqStart:e.seq;if(0===n||e._isFromDifference&&n>=t+1)aa(e);else if(n===t+1)clearTimeout(Yi),Yi=void 0,aa(e);else if(n>t+1)return ea.add(e),void ca();oa()}function ra(e){const t=ta.get(e);if(!t?.size)return;const n=t.pop(),s=e===Ji?De.commonBoxState.pts:De.channelPtsById[e],i=n.pts,a=ya(n);if(void 0!==s){if(n._isFromDifference&&i>=s+a)aa(n);else if(i===s+a)clearTimeout(Xi.get(e)),Xi.delete(e),aa(n);else if(i>s+a)return t.add(n),void(e===Ji?ca():da(e));ra(e)}}function da(e){if(Xi.has(e))return;const t=setTimeout((async()=>{await pa(e),Xi.delete(e)}),$i);Xi.set(e,t)}function ca(){Yi||(Yi=setTimeout((async()=>{await la(),Yi=void 0}),$i))}function ua(e){return"channelId"in e&&"pts"in e?me(e.channelId,"channel"):e instanceof pe.Api.UpdateNewChannelMessage||e instanceof pe.Api.UpdateEditChannelMessage?me(e.message.peerId.channelId,"channel"):Ji}async function la(){if(!Zi)throw new Error("UpdatesManager not initialized");if(!De.commonBoxState?.date)return void fa();vi({"@type":"updateFetchingDifference",isFetching:!0});const e=await Qi(new pe.Api.updates.GetDifference({pts:De.commonBoxState.pts,date:De.commonBoxState.date,qts:De.commonBoxState.qts}));if(!e||e instanceof pe.Api.updates.DifferenceTooLong)fa();else{if(e instanceof pe.Api.updates.DifferenceEmpty)return De.commonBoxState.seq=e.seq,De.commonBoxState.date=e.date,void vi({"@type":"updateFetchingDifference",isFetching:!1});Aa(e),na(e instanceof pe.Api.updates.DifferenceSlice?e.intermediateState:e.state),e instanceof pe.Api.updates.DifferenceSlice?la():vi({"@type":"updateFetchingDifference",isFetching:!1})}}async function pa(e){const t=De.chats[e];if(!(t&&t instanceof pe.Api.Channel&&t.accessHash&&De.channelPtsById[e]))return void(d&&console.error("[UpdateManager] Channel for difference not found",e,t));const n=await Qi(new pe.Api.updates.GetChannelDifference({channel:Vn(e,t.accessHash.toString()),pts:De.channelPtsById[e],filter:new pe.Api.ChannelMessagesFilterEmpty,limit:Ki}));n?n instanceof pe.Api.updates.ChannelDifferenceTooLong?fa():(De.channelPtsById[e]=n.pts,n instanceof pe.Api.updates.ChannelDifferenceEmpty?ra(e):(Aa(n,e),n.final||pa(e))):d&&console.warn("[UpdatesManager] Failed to get ChannelDifference",e,t)}function fa(){ha(),vi({"@type":"requestSync"}),ga()}function ha(){ta.clear(),ea.clear(),clearTimeout(Yi),Yi=void 0,Xi.forEach((e=>{clearTimeout(e)})),Xi.clear(),De.commonBoxState={},Object.keys(De.channelPtsById).forEach((e=>{De.channelPtsById[e]=0})),Zi=!1}function ma(e,t){const n="chatTypeChannel"===e.type||"chatTypeSuperGroup"===e.type?rs(e.id,"channel"):void 0;var s,i,a;sa((s=t.pts,i=t.ptsCount,(a=n)?new yi(a,s,i):new Ai(s,i)))}async function ga(){const e=await Qi(new pe.Api.updates.GetState);e&&(na(e),Zi=!0)}function Aa(e,t){e.newMessages.forEach((e=>{Ci(new pe.Api.UpdateNewMessage({message:e,pts:0,ptsCount:0}))})),Ke(e.users),Ke(e.chats),bi(e.users),bi(e.chats);const n=new Set;e.otherUpdates.forEach((e=>{const t=ua(e);e instanceof pe.Api.UpdateChannelTooLong&&n.add(ua(e));const s=!n.has(t);sa(e,s,!s)})),t?ra(t):oa()}function ya(e){return"ptsCount"in e?e.ptsCount:0}function wa(e,t){const n=e.pts-t.pts;return 0!==n?n:ya(t)-ya(e)}const Ia=self.caches;let ba;async function Sa(){return!!Ia&&(ba=ba??await Ia.has("test").then((()=>!0)).catch((()=>!1)),ba)}let va=function(e){return e[e.Text=0]="Text",e[e.Blob=1]="Blob",e[e.Json=2]="Json",e[e.ArrayBuffer=3]="ArrayBuffer",e}({});async function Ca(e,t,n){let s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(Ia)try{const i=r?`${c}/${t.replace(/:/g,"_")}`:new Request(t.replace(/:/g,"_")),a=await Ia.open(e),o=await a.match(i);if(!o)return;const d=o.headers.get("Content-Type");switch(n){case va.Text:return await o.text();case va.Blob:{if(t.startsWith("avatar")&&d&&d.startsWith("text"))return;const e=await o.blob(),n=!e.type||!s&&e.type.includes("html");let i=e.type||d;return n&&i?(s||(i=i.replace(/html/gi,"")),new Blob([e],{type:i})):e}case va.Json:return await o.json();case va.ArrayBuffer:return await o.arrayBuffer();default:return}}catch(e){return void console.warn(e)}}async function Pa(e,t,n){if(!Ia)return!1;try{const s="string"==typeof n||n instanceof Blob||n instanceof ArrayBuffer?n:JSON.stringify(n),i=r?`${c}/${t.replace(/:/g,"_")}`:new Request(t.replace(/:/g,"_")),a=new Response(s),o=await Ia.open(e);return await o.put(i,a),!0}catch(e){return console.warn(e),!1}}async function Ma(e,t){try{if(!Ia)return;const n=await Ia.open(e);return await n.delete(t)}catch(e){return void console.warn(e)}}async function Ta(e){try{if(!Ia)return;return await Ia.delete(e)}catch(e){return void console.warn(e)}}const Ba=new Set(["sticker","wallpaper","photo","webDocument","document"]),Ra=new Set(["s","m","x","y","w","a","b","c","d"]),Ua=new Set(["u","v"]);async function ka(e,t,n){let{url:i,mediaFormat:a,start:o,end:r,isHtmlAllowed:d}=e;const{data:c,mimeType:m,fullSize:g}=await async function(e,t,n,s,i,a){const o=Ea(e);if(!o)return;const{entityType:r,entityId:d,sizeType:c,params:u,mediaMatchType:l}=o;if("staticMap"===r){const e=d,n=new URLSearchParams(u),s=n.get("long"),i=n.get("lat"),a=n.get("w"),o=n.get("h"),r=n.get("zoom"),c=n.get("scale"),l=n.get("accuracy_radius");return{mimeType:"image/png",data:await t.downloadStaticMap(e,s,i,a,o,r,c,l)}}let p;switch(r){case"channel":case"chat":p=De.chats[d];break;case"user":p=De.users[d];break;case"sticker":case"wallpaper":case"document":p=De.documents[d];break;case"photo":p=De.photos[d];break;case"stickerSet":p=De.stickerSets[d];break;case"webDocument":p=De.webDocuments[d]}if(p){if(Ba.has(r)){const e=await t.downloadMedia(p,{sizeType:c,start:s,end:i,progressCallback:n,workers:h});let o,r;return c&&Ra.has(c)?o="image/jpeg":c&&Ua.has(c)?o="video/mp4":p instanceof pe.Api.Photo?o="image/jpeg":p instanceof pe.Api.WebDocument?(o=p.mimeType,r=p.size):p instanceof pe.Api.Document&&(o=p.mimeType,r=p.size.toJSNumber()),!a&&o&&(o=o.replace(/html/gi,"")),{mimeType:o,data:e,fullSize:r}}if("stickerSet"===r){const e=await t.downloadStickerSetThumb(p);return{mimeType:Da(e),data:e}}{const e=await t.downloadProfilePhoto(p,"profile"===l);return{mimeType:Da(e),data:e}}}}(i,t,n,o,r,d)||{};if(!c)return;const A=await async function(e,t,n){switch(t){case lt.qZ.BlobUrl:return new Blob([e],{type:n});case lt.qZ.Text:return e.toString();case lt.qZ.Progressive:case lt.qZ.DownloadUrl:return e.buffer}}(c,a,m);if(!A)return;const y=a!==lt.qZ.Progressive&&(a!==lt.qZ.BlobUrl||A.size<=f);return!u&&s&&y&&Pa(i.startsWith("avatar")?p:l,i,A),{dataBlob:a===lt.qZ.Progressive?"":A,arrayBuffer:a===lt.qZ.Progressive?A:void 0,mimeType:m,fullSize:g}}function Da(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"image/jpeg";if(e.length<4)return t;let n=t;switch(e.subarray(0,4).reduce(((e,t)=>e+t.toString(16)),"")){case"89504e47":n="image/png";break;case"47494638":n="image/gif";break;case"ffd8ffe0":case"ffd8ffe1":case"ffd8ffe2":case"ffd8ffe3":case"ffd8ffe8":n="image/jpeg";break;case"52494646":n="image/webp"}return n}function Ea(e){const t=e.startsWith("staticMap")?e.match(/(staticMap):([0-9-]+)(\?.+)/):e.startsWith("webDocument")?e.match(/(webDocument):(.+)/):e.match(/(avatar|profile|photo|stickerSet|sticker|wallpaper|document)([-\d\w./]+)(?::\d+)?(\?size=\w+)?/);if(!t)return;const n=t[1],s=t[2];let i;const a=t[3],o=a?.replace("?size=","")||void 0;return i="avatar"===t[1]||"profile"===t[1]?qn(s):t[1],{mediaMatchType:n,entityType:i,entityId:s,sizeType:o,params:a}}class xa extends AbortController{constructor(){var e,t,n,s;super(...arguments),e=this,t="threads",n=new Map,(t="symbol"==typeof(s=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var s=n.call(e,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t))?s:s+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}getThreadSignal(e){let t=this.threads.get(e);return t||(t=new AbortController,this.threads.set(e,t)),t.signal}abortThread(e,t){this.threads.get(e)?.abort(t),this.threads.delete(e)}abort(e){super.abort(e),this.threads.forEach((t=>t.abort(e))),this.threads.clear()}}const Na="Unknown UserAgent",Ha="Unknown platform";Vi.Logger.setLevel("warn");const Ga={build:e=>e},Fa=new Map,_a=new Map;let qa,Oa,ja;function La(e){let{isPremium:t}=e;Oa.setIsPremium(t)}const Va=2500;async function za(){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];!(arguments.length>0&&void 0!==arguments[0]&&arguments[0])&&Oa.isConnected()&&await Promise.race([$a(new pe.Api.auth.LogOut),ce(Va)]),e||(Object.assign(ke,Ue()),ha()),await Oa.destroy()}async function Wa(){await Oa.disconnect()}function Ja(e){qa({"@type":"updateSession",sessionData:e})}function Ka(e){sa(e),e instanceof pe.Api.UpdatesTooLong?async function(){try{await $a(new pe.Api.users.GetFullUser({id:new pe.Api.InputUserSelf}),{shouldThrow:!0})}catch(e){"AUTH_KEY_UNREGISTERED"!==e.message&&"SESSION_REVOKED"!==e.message||qa({"@type":"updateConnectionState",connectionState:"connectionStateBroken"})}}():("updates"in e?e.updates:[e]).forEach((e=>{if(!(e instanceof pe.Api.UpdateConfig))return;const t=e._entities?.find((e=>e instanceof pe.Api.User&&me(e.id,"user")===ja));t instanceof pe.Api.User&&La({isPremium:Boolean(t.premium)})}))}async function $a(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{shouldThrow:n,shouldIgnoreUpdates:s,dcId:i,shouldIgnoreErrors:a,abortControllerChatId:o,abortControllerThreadId:r,shouldRetryOnTimeout:c,abortControllerGroup:u}=t,l=Boolean(t.shouldReturnTrue);let p;if(o){let e=Fa.get(o);e||(e=new xa,Fa.set(o,e)),p=r?e.getThreadSignal(r):e.signal}if(u){let e=_a.get(u);e||(e=new AbortController,_a.set(u,e)),p=e.signal}try{d&&Ze("INVOKE",e.className);const t=await Oa.invoke(e,i,p,c);return d&&Ze("RESPONSE",e.className,t),!s&&function(e){return e instanceof pe.Api.UpdatesTooLong||e instanceof pe.Api.UpdateShortMessage||e instanceof pe.Api.UpdateShortChatMessage||e instanceof pe.Api.UpdateShort||e instanceof pe.Api.UpdatesCombined||e instanceof pe.Api.Updates||e instanceof pe.Api.UpdateShortSentMessage}(t)&&sa(t),l?t&&!0:t}catch(t){if(a)return;if(d&&(Ze("INVOKE ERROR",e.className),console.debug("invokeRequest failed with payload",e),console.error(t)),n)throw t;return void function(e,t){const n=e.message.startsWith("A wait of")&&(t instanceof pe.Api.messages.SendMessage||t instanceof pe.Api.messages.SendMedia||t instanceof pe.Api.messages.SendMultiMedia),{message:s}=e;qa({"@type":"error",error:{message:s,isSlowMode:n,hasErrorKey:!0}})}(t,e)}}function Qa(e,t){d&&Ze("BEACON",e.className),Oa.invokeBeacon(e,t)}async function Ya(e,t){try{return await ka(e,Oa,t)}catch(n){if(n.message.startsWith("FILE_REFERENCE")){if(await so({url:e.url}))return ka(e,Oa,t);d&&console.error("Failed to repair file reference",e.url)}throw n}}function Za(e,t){return Oa.uploadFile({file:e,onProgress:t,workers:m})}function Xa(e){return Oa.updateTwoFaSettings(e)}function eo(e){const{chatId:t,threadId:n}=e,s=Fa.get(t);if(!n)return s?.abort("Chat change"),void Fa.delete(t);s?.abortThread(n,"Thread change")}function to(e){_a.get(e)?.abort(),_a.delete(e)}async function no(){const e=await $a(new pe.Api.users.GetFullUser({id:new pe.Api.InputUserSelf}));if(!(e&&e.users[0]instanceof pe.Api.User))return;const t=e.users[0];Je(t);const n=Os(e),s=js(t);var i;i=s.id,Ss=i,function(e,t){Ti({"@type":"updateCurrentUser",currentUser:e,currentUserFullInfo:t})}(s,n),ja=s.id,La({isPremium:Boolean(s.isPremium)})}async function so(e){let{url:t}=e;const n=Ea(t);if(!n)return;const{entityId:s,mediaMatchType:i}=n;if("document"===i||"photo"===i||"webDocument"===i){const e="document"===i?De.documents[s]:"webDocument"===i?De.webDocuments[s]:De.photos[s];if(!e)return!1;const t=e;if(!t.localRepairInfo)return!1;const{localRepairInfo:n}=t;if("story"===n.type)return await async function(e,t){const n=Ln(e);if(!n)return!1;const s=await $a(new pe.Api.stories.GetStoriesByID({peer:n,id:[t]}),{shouldIgnoreErrors:!0});return!!s&&(Ke(s.users),s.stories.forEach((t=>{const n=ai(e,t);n&&!("isDeleted"in n)&&(je(t,e),qa({"@type":"updateStory",peerId:e,story:n}))})),!0)}(n.peerId,n.id);if("message"===n.type)return await async function(e,t){const n=qn(e),s=Ln(e);if(!s)return!1;const i=await $a("channel"===n?new pe.Api.channels.GetMessages({channel:s,id:[new pe.Api.InputMessageID({id:t})]}):new pe.Api.messages.GetMessages({id:[new pe.Api.InputMessageID({id:t})]}),{shouldIgnoreErrors:!0});if(!i||i instanceof pe.Api.messages.MessagesNotModified)return!1;s&&"pts"in i&&ia(e,i.pts);const a=i.messages[0];if(a instanceof pe.Api.MessageEmpty)return!1;Ke(i.users),Ke(i.chats),qe(a);const o=Ms(a);return o&&qa({"@type":"updateMessage",chatId:o.chatId,id:o.id,message:o}),!0}(n.peerId,n.id)}return!1}function io(e){Oa.setForceHttpTransport(e)}function ao(e){Oa.setAllowHttpTransport(e)}function oo(e){Oa.setShouldDebugExportedSenders(e)}function ro(e){da(e)}let co;async function uo(e){let{chatId:t,accessHash:n,messageId:s,data:i,isGame:a}=e;const o=await $a(new pe.Api.messages.GetBotCallbackAnswer({peer:jn(t,n),msgId:s,data:i?Ye(i):void 0,game:a||void 0}));return o?ve(o):void 0}async function lo(){const e=await $a(new pe.Api.contacts.GetTopPeers({botsInline:!0}));if(!(e instanceof pe.Api.contacts.TopPeers))return;const t=e.users.map(js).filter(Boolean);return{ids:t.map((e=>{let{id:t}=e;return t})),users:t}}async function po(e){let{username:t}=e;const n=await $a(new pe.Api.contacts.ResolveUsername({username:t}));if(n&&n.users[0]instanceof pe.Api.User&&n.users[0].bot&&n.users[0].botInlinePlaceholder)return Je(n.users[0]),{user:js(n.users[0]),chat:yn(n.users[0])}}async function fo(e){let{bot:t,chat:n,query:s,offset:i=""}=e;const a=await $a(new pe.Api.messages.GetInlineBotResults({bot:jn(t.id,t.accessHash),peer:jn(n.id,n.accessHash),query:s,offset:i}));var o,r,d,c,u,l;if(a)return Ke(a.users),{isGallery:Boolean(a.gallery),help:t.botPlaceholder,nextOffset:(u=t.usernames[0].username,l=a.nextOffset,"gif"===u&&"0"===l?"":l),switchPm:(c=a.switchPm,c?tt(c,["text","startParam"]):void 0),switchWebview:(d=a.switchWebview,d?tt(d,["text","url"]):void 0),users:a.users.map(js).filter(Boolean),results:(o=String(a.queryId),r=a.results,r.map((e=>e instanceof pe.Api.BotInlineMediaResult?(e.document instanceof pe.Api.Document&&Ve(e.document),e.photo instanceof pe.Api.Photo&&Le(e.photo),function(e,t){const{id:n,type:s,title:i,description:a,photo:o,document:r}=e;return{id:n,queryId:t,type:s,title:i,description:a,..."sticker"===s&&r instanceof pe.Api.Document&&{sticker:Pt(r)},...o instanceof pe.Api.Photo&&{photo:At(o)},..."gif"===s&&r instanceof pe.Api.Document&&{gif:Et(r)},..."video"===s&&r instanceof pe.Api.Document&&{thumbnail:mt(r.thumbs)}}}(e,o)):(e.thumb&&$e(e.thumb),function(e,t){const{id:n,type:s,title:i,description:a,url:o,thumb:r}=e;return{id:n,queryId:t,type:s,title:i,description:a,url:o,webThumbnail:jt(r)}}(e,o))))),cacheTime:a.cacheTime}}async function ho(e){let{chat:t,replyInfo:n,resultId:s,queryId:i,sendAs:a,isSilent:o,scheduleDate:r}=e;const d=$n();await $a(new pe.Api.messages.SendInlineBotResult({clearDraft:!0,randomId:d,queryId:Ie()(i),peer:jn(t.id,t.accessHash),id:s,scheduleDate:r,replyTo:n&&gs(n),...o&&{silent:!0},...a&&{sendAs:jn(a.id,a.accessHash)}}))}async function mo(e){let{bot:t,startParam:n}=e;const s=$n();await $a(new pe.Api.messages.StartBot({bot:jn(t.id,t.accessHash),peer:jn(t.id,t.accessHash),randomId:s,startParam:n}))}async function go(e){let{isSilent:t,peer:n,bot:s,url:i,startParam:a,replyInfo:o,theme:r,sendAs:d,isFromBotMenu:c}=e;const u=await $a(new pe.Api.messages.RequestWebView({silent:t||void 0,peer:jn(n.id,n.accessHash),bot:jn(s.id,s.accessHash),url:i,startParam:a,themeParams:r?os(r):void 0,fromBotMenu:c||void 0,platform:z,replyTo:o&&gs(o),...d&&{sendAs:jn(d.id,d.accessHash)}}));if(u instanceof pe.Api.WebViewResultUrl)return{url:u.url,queryId:u.queryId?.toString()}}async function Ao(e){let{bot:t,url:n,theme:s,startParam:i,isFromSwitchWebView:a,isFromSideMenu:o}=e;const r=await $a(new pe.Api.messages.RequestSimpleWebView({url:n,bot:jn(t.id,t.accessHash),themeParams:s?os(s):void 0,platform:z,startParam:i,fromSwitchWebview:a||void 0,fromSideMenu:o||void 0}));return r?.url}async function yo(e){let{bot:t,appName:n}=e;const s=await $a(new pe.Api.messages.GetBotApp({app:new pe.Api.InputBotAppShortName({botId:Vn(t.id,t.accessHash),shortName:n})}));if(s&&!(s instanceof pe.Api.BotAppNotModified))return function(e){const{app:t,inactive:n,requestWriteAccess:s}=e,i=function(e){if(e instanceof pe.Api.BotAppNotModified)return;const{id:t,accessHash:n,title:s,description:i,shortName:a,photo:o,document:r}=e,d=o instanceof pe.Api.Photo?At(o):void 0,c=r instanceof pe.Api.Document?Nt(r):void 0;return{id:t.toString(),accessHash:n.toString(),title:s,description:i,shortName:a,photo:d,document:c}}(t);if(i)return{...i,isInactive:n,shouldRequestWriteAccess:s}}(s)}async function wo(e){let{peer:t,app:n,startParam:s,theme:i,isWriteAllowed:a}=e;const o=await $a(new pe.Api.messages.RequestAppWebView({peer:jn(t.id,t.accessHash),app:ms(n),startParam:s,themeParams:i?os(i):void 0,platform:z,writeAllowed:a||void 0}));return o?.url}function Io(e){let{isSilent:t,peer:n,bot:s,queryId:i,replyInfo:a,sendAs:o}=e;return $a(new pe.Api.messages.ProlongWebView({silent:t||void 0,peer:jn(n.id,n.accessHash),bot:jn(s.id,s.accessHash),queryId:Ie()(i),replyTo:a&&gs(a),...o&&{sendAs:jn(o.id,o.accessHash)}}))}async function bo(e){let{bot:t,buttonText:n,data:s}=e;const i=$n();await $a(new pe.Api.messages.SendWebViewData({bot:jn(t.id,t.accessHash),buttonText:n,data:s,randomId:i}))}async function So(e){let{hash:t}=e;const n=await $a(new pe.Api.messages.GetAttachMenuBots({hash:t?Ie()(t):void 0}));if(n instanceof pe.Api.AttachMenuBots)return Ke(n.users),{hash:n.hash.toString(),bots:Xe(n.bots.map(Vt),"id"),users:n.users.map(js).filter(Boolean)}}async function vo(e){let{bot:t}=e;const n=await $a(new pe.Api.messages.GetAttachMenuBot({bot:jn(t.id,t.accessHash)}));if(n instanceof pe.Api.AttachMenuBotsBot)return Ke(n.users),{bot:Vt(n.bot),users:n.users.map(js).filter(Boolean)}}function Co(e){let{bot:t,isWriteAllowed:n,isEnabled:s}=e;return $a(new pe.Api.messages.ToggleBotInAttachMenu({bot:jn(t.id,t.accessHash),writeAllowed:n||void 0,enabled:s}))}async function Po(e){let{chat:t,buttonId:n,messageId:s}=e;const i=await $a(new pe.Api.messages.RequestUrlAuth({peer:jn(t.id,t.accessHash),buttonId:n,msgId:s}));if(!i)return;const a=Zs(i);return"request"===a?.type&&co({"@type":"updateUser",id:a.bot.id,user:a.bot}),a}async function Mo(e){let{chat:t,messageId:n,buttonId:s,isWriteAllowed:i}=e;const a=await $a(new pe.Api.messages.AcceptUrlAuth({peer:jn(t.id,t.accessHash),msgId:n,buttonId:s,writeAllowed:i||void 0}));if(!a)return;const o=Zs(a);return"request"===o?.type&&co({"@type":"updateUser",id:o.bot.id,user:o.bot}),o}async function To(e){let{url:t}=e;const n=await $a(new pe.Api.messages.RequestUrlAuth({url:t}));if(!n)return;const s=Zs(n);return"request"===s?.type&&co({"@type":"updateUser",id:s.bot.id,user:s.bot}),s}async function Bo(e){let{url:t,isWriteAllowed:n}=e;const s=await $a(new pe.Api.messages.AcceptUrlAuth({url:t,writeAllowed:n||void 0}));if(!s)return;const i=Zs(s);return"request"===i?.type&&co({"@type":"updateUser",id:i.bot.id,user:i.bot}),i}function Ro(e){let{bot:t}=e;return $a(new pe.Api.bots.CanSendMessage({bot:Vn(t.id,t.accessHash)}))}function Uo(e){let{bot:t}=e;return $a(new pe.Api.bots.AllowSendMessage({bot:Vn(t.id,t.accessHash)}),{shouldReturnTrue:!0})}async function ko(e){let{bot:t,customMethod:n,parameters:s}=e;try{const e=await $a(new pe.Api.bots.InvokeWebViewCustomMethod({bot:jn(t.id,t.accessHash),params:new pe.Api.DataJSON({data:s}),customMethod:n}),{shouldThrow:!0});return{result:JSON.parse(e.data)}}catch(e){return{error:e.message}}}function Do(e){let{bot:t,langCode:n,name:s,about:i,description:a}=e;return $a(new pe.Api.bots.SetBotInfo({bot:jn(t.id,t.accessHash),langCode:n,name:s||"",about:i||"",description:a||""}),{shouldReturnTrue:!0})}var Eo=n(48287).hp;let xo,No;async function Ho(e){let{call:t}=e;const n=await $a(new pe.Api.phone.GetGroupCall({call:ds(t)}));if(!n)return;Ke(n.users),Ke(n.chats);const s=n.users.map(js).filter(Boolean),i=n.chats.map((e=>yn(e))).filter(Boolean);return{groupCall:Zt(n.call),users:s,chats:i}}function Go(e){let{call:t}=e;return $a(new pe.Api.phone.DiscardGroupCall({call:ds(t)}),{shouldReturnTrue:!0})}function Fo(e){let{call:t,participant:n,muted:s,presentationPaused:i,videoStopped:a,videoPaused:o,volume:r,raiseHand:d}=e;return $a(new pe.Api.phone.EditGroupCallParticipant({call:ds(t),participant:jn(n.id,n.accessHash),...void 0!==a&&{videoStopped:a},...void 0!==o&&{videoPaused:o},...void 0!==s&&{muted:s},...void 0!==i&&{presentationPaused:i},...void 0!==d&&{raiseHand:d},...void 0!==r&&{volume:r}}),{shouldReturnTrue:!0})}function _o(e){let{groupCall:t,title:n}=e;return $a(new pe.Api.phone.EditGroupCallTitle({title:n,call:ds(t)}),{shouldReturnTrue:!0})}async function qo(e){let{call:t,canSelfUnmute:n}=e;const s=await $a(new pe.Api.phone.ExportGroupCallInvite({canSelfUnmute:n||void 0,call:ds(t)}));if(s)return s.link}async function Oo(e){let{call:t,offset:n}=e;const s=await $a(new pe.Api.phone.GetGroupParticipants({call:ds(t),ids:[],sources:[],offset:n||"",limit:b}));if(!s)return;Ke(s.users),Ke(s.chats);const i=s.users.map(js).filter(Boolean),a=s.chats.map((e=>yn(e))).filter(Boolean);return xo({"@type":"updateGroupCallParticipants",groupCallId:t.id,participants:s.participants.map($t),nextOffset:s.nextOffset}),{users:i,chats:a}}function jo(e){let{call:t,isPageUnload:n}=e;const s=new pe.Api.phone.LeaveGroupCall({call:ds(t)});n?Qa(s):$a(s,{shouldReturnTrue:!0})}async function Lo(e){let{call:t,inviteHash:n,params:s}=e;const i=await $a(new pe.Api.phone.JoinGroupCall({call:ds(t),joinAs:new pe.Api.InputPeerSelf,muted:!0,videoStopped:!0,params:new pe.Api.DataJSON({data:JSON.stringify(s)}),inviteHash:n}),{shouldRetryOnTimeout:!0,abortControllerGroup:"call"});if(i&&i instanceof pe.Api.Updates){const e=i.updates.find((e=>e instanceof pe.Api.UpdateGroupCall));if(!(e instanceof pe.Api.UpdateGroupCall))return;return Zt(e.call)}}async function Vo(e){let{peer:t}=e;const n=Qn(),s=await $a(new pe.Api.phone.CreateGroupCall({peer:jn(t.id,t.accessHash),randomId:n}));if(s&&s instanceof pe.Api.Updates){const e=s.updates[0];if(e instanceof pe.Api.UpdateGroupCall)return Zt(e.call)}}function zo(e){let{call:t,params:n}=e;return $a(new pe.Api.phone.JoinGroupCallPresentation({call:ds(t),params:new pe.Api.DataJSON({data:JSON.stringify(n)})}),{shouldReturnTrue:!0})}function Wo(e){let{call:t,subscribed:n}=e;return $a(new pe.Api.phone.ToggleGroupCallStartSubscription({call:ds(t),subscribed:n}),{shouldReturnTrue:!0,shouldIgnoreErrors:!0})}function Jo(e){let{call:t}=e;return $a(new pe.Api.phone.LeaveGroupCallPresentation({call:ds(t)}),{shouldReturnTrue:!0})}async function Ko(){const e=await $a(new pe.Api.messages.GetDhConfig({}));if(e&&!(e instanceof pe.Api.messages.DhConfigNotModified))return{g:e.g,p:Array.from(e.p),random:Array.from(e.random)}}function $o(e){let{call:t,isBusy:n,isPageUnload:s}=e;const i=new pe.Api.phone.DiscardCall({peer:cs(t),reason:n?new pe.Api.PhoneCallDiscardReasonBusy:new pe.Api.PhoneCallDiscardReasonHangup});s?Qa(i):$a(i,{shouldReturnTrue:!0})}async function Qo(e){let{user:t,gAHash:n,isVideo:s}=e;const i=await $a(new pe.Api.phone.RequestCall({randomId:Qn(),userId:jn(t.id,t.accessHash),gAHash:Eo.from(n),...s&&{video:!0},protocol:sn()}));if(!i)return;const a=Xt(i.phoneCall);return xo({"@type":"updatePhoneCall",call:a}),Ke(i.users),{users:i.users.map(js).filter(Boolean)}}function Yo(e){let{call:t,rating:n,comment:s}=e;return $a(new pe.Api.phone.SetCallRating({rating:n,peer:cs(t),comment:s}),{shouldReturnTrue:!0})}function Zo(e){let{call:t}=e;return $a(new pe.Api.phone.ReceivedCall({peer:cs(t)}))}async function Xo(e){let{call:t,gB:n}=e;const s=await $a(new pe.Api.phone.AcceptCall({peer:cs(t),gB:Eo.from(n),protocol:sn()}));if(s)return t=Xt(s.phoneCall),xo({"@type":"updatePhoneCall",call:t}),Ke(s.users),{users:s.users.map(js).filter(Boolean)}}async function er(e){let{call:t,gA:n,keyFingerprint:s}=e;const i=await $a(new pe.Api.phone.ConfirmCall({peer:cs(t),gA:Eo.from(n),keyFingerprint:Ie()(s),protocol:sn()}));if(i)return t=Xt(i.phoneCall),xo({"@type":"updatePhoneCall",call:t}),Ke(i.users),{users:i.users.map(js).filter(Boolean)}}function tr(e){let{data:t,call:n}=e;return $a(new pe.Api.phone.SendSignalingData({data:Eo.from(t),peer:cs(n)}))}async function nr(e){let{limit:t,offsetDate:n,archived:s,withPinned:i,lastLocalServiceMessageId:a}=e;const o=await $a(new pe.Api.messages.GetDialogs({offsetPeer:new pe.Api.InputPeerEmpty,limit:t,offsetDate:n,...i&&{excludePinned:!0}})),r=i?await $a(new pe.Api.messages.GetPinnedDialogs({folderId:s?Q:void 0})):void 0;if(!o||o instanceof pe.Api.messages.DialogsNotModified)return;r&&(Si(r.messages),$r(r)),Si(o.messages),$r(o);const d=(r?r.messages:[]).concat(o.messages).map(Ms).filter(Boolean),c=Kr(o);r&&Object.assign(c,Kr(r,c));const u=[],l={},p=(r?r.dialogs:[]).concat(o.dialogs),f=[],h={};p.forEach((e=>{if(!(e instanceof pe.Api.Dialog)||!s&&e.folderId===Q||s&&e.folderId!==Q)return;const t=hn(e,c[In(e.peer)]);if(h[t.id]=e.topMessage,e.pts&&ia(t.id,e.pts),t.id===W&&a&&a>e.topMessage&&(h[t.id]=a),t.isListed=!0,u.push(t),mi(t.id,t.muteUntil,No),i&&e.pinned&&f.push(t.id),e.draft){const n=Bs(e.draft);n&&(l[t.id]=n)}}));const m=u.map((e=>e.id)),{users:g,userStatusesById:A}=Vs((r?.users||[]).concat(o.users));let y;return y=o instanceof pe.Api.messages.DialogsSlice?o.count:m.length,{chatIds:m,chats:u,users:g,userStatusesById:A,draftsById:l,orderedPinnedIds:i?f:void 0,totalChatCount:y,lastMessageByChatId:h,messages:d}}async function sr(e){let{limit:t,offsetDate:n,withPinned:s}=e;const i=await $a(new pe.Api.messages.GetSavedDialogs({offsetPeer:new pe.Api.InputPeerEmpty,limit:t,offsetDate:n,...s&&{excludePinned:!0}})),a=s?await $a(new pe.Api.messages.GetPinnedSavedDialogs):void 0;if(!i||i instanceof pe.Api.messages.SavedDialogsNotModified)return;const o=a&&!(a instanceof pe.Api.messages.SavedDialogsNotModified);o&&$r(a),$r(i),Si(i.messages);const r=(o?a.messages:[]).concat(i.messages).map(Ms).filter(Boolean),d=Kr(i);o&&Object.assign(d,Kr(a,d));const c=(o?a.dialogs:[]).concat(i.dialogs),u=[],l=[],p={},f=[];c.forEach((e=>{const t=function(e,t){const{peer:n}=e;return{id:ge(n),type:wn(t),title:bn(n,t),...fn(t)}}(e,d[In(e.peer)]),n=ge(e.peer);u.push(n),s&&e.pinned&&l.push(n),p[n]=e.topMessage,f.push(t)}));const{users:h,userStatusesById:m}=Vs((o?a.users:[]).concat(i.users));let g;return g=i instanceof pe.Api.messages.SavedDialogsSlice?i.count:u.length,{chatIds:u,chats:f,users:h,userStatusesById:m,orderedPinnedIds:s?l:void 0,totalChatCount:g,lastMessageByChatId:p,messages:r,draftsById:{}}}function ir(e){const{id:t,accessHash:n,adminRights:s}=e;return Vn(t,n)instanceof pe.Api.InputChannel?async function(e,t,n){const s=await $a(new pe.Api.channels.GetFullChannel({channel:Vn(e,t)}));if(!(s&&s.fullChat instanceof pe.Api.ChannelFull))return;const{about:i,onlineCount:a,exportedInvite:o,slowmodeSeconds:r,slowmodeNextSendDate:d,migratedFromChatId:c,migratedFromMaxId:u,canViewParticipants:l,canViewStats:p,linkedChatId:f,hiddenPrehistory:h,call:m,botInfo:g,availableReactions:A,reactionsLimit:y,defaultSendAs:w,requestsPending:I,recentRequesters:b,statsDc:S,participantsCount:v,stickerset:C,chatPhoto:P,participantsHidden:M,translationsDisabled:T,storiesPinnedAvailable:B,viewForumAsMessages:R,emojiset:U,boostsApplied:k,boostsUnrestrict:D}=s.fullChat;P&&Le(P);const E=o instanceof pe.Api.ChatInviteExported?o.link:void 0,{members:x,users:N,userStatusesById:H}=l&&await _r(e,t)||{},{members:G,users:F,userStatusesById:_}=l&&n&&await _r(e,t,"kicked")||{},{members:q,users:O,userStatusesById:j}=l&&await _r(e,t,"admin")||{},L=g?Bn(g):void 0,V=s.chats.map((e=>yn(e))).filter(Boolean);if(s?.chats?.length>1){$r(s);const[,e]=s.chats,t=yn(e);t&&No({"@type":"updateChat",id:t.id,chat:t})}s.fullChat.pts&&ia(e,s.fullChat.pts);const z={...H,..._,...j};return{fullInfo:{...P instanceof pe.Api.Photo&&{profilePhoto:At(P)},about:i,onlineCount:a,inviteLink:E,slowMode:r?{seconds:r,nextSendDate:d}:void 0,migratedFrom:c?{chatId:me(c,"chat"),maxMessageId:u}:void 0,canViewMembers:l,canViewStatistics:p,isPreHistoryHidden:h,members:x,kickedMembers:G,adminMembersById:q?Xe(q,"userId"):void 0,groupCallId:m?String(m.id):void 0,linkedChatId:f?me(f,"channel"):void 0,botCommands:L,enabledReactions:kn(A),reactionsLimit:y,sendAsId:w?ge(w):void 0,requestsPending:I,recentRequesterIds:b?.map((e=>me(e,"user"))),statisticsDcId:S,stickerSet:C?Mt(C):void 0,emojiSet:U?Mt(U):void 0,areParticipantsHidden:M,isTranslationDisabled:T,hasPinnedStories:Boolean(B),boostsApplied:k,boostsToUnrestrict:D},users:[...N||[],...F||[],...O||[]],chats:V,userStatusesById:z,groupCall:m?{chatId:e,isLoaded:!1,id:m.id.toString(),accessHash:m?.accessHash.toString(),participants:{},version:0,participantsCount:0,connectionState:"disconnected"}:void 0,membersCount:v,...R&&{isForumAsMessages:!0}}}(t,n,s):async function(e){const t=await $a(new pe.Api.messages.GetFullChat({chatId:Vn(e)}));if(!(t&&t.fullChat instanceof pe.Api.ChatFull))return;$r(t);const{about:n,participants:s,exportedInvite:i,botInfo:a,call:o,availableReactions:r,recentRequesters:d,requestsPending:c,chatPhoto:u,translationsDisabled:l,reactionsLimit:p}=t.fullChat;u&&Le(u);const f=Cn(s),h=f?f.filter((e=>{let{isAdmin:t,isOwner:n}=e;return t||n})):void 0,m=a?Bn(a):void 0,g=i instanceof pe.Api.ChatInviteExported?i.link:void 0,{users:A,userStatusesById:y}=Vs(t.users),w=t.chats.map((e=>yn(e))).filter(Boolean);return{fullInfo:{...u instanceof pe.Api.Photo&&{profilePhoto:At(u)},about:n,members:f,adminMembersById:h?Xe(h,"userId"):void 0,canViewMembers:!0,botCommands:m,inviteLink:g,groupCallId:o?.id.toString(),enabledReactions:kn(r),reactionsLimit:p,requestsPending:c,recentRequesterIds:d?.map((e=>me(e,"user"))),isTranslationDisabled:l,isPreHistoryHidden:!0},users:A,chats:w,userStatusesById:y,groupCall:o?{chatId:e,isLoaded:!1,id:o.id.toString(),accessHash:o.accessHash.toString(),connectionState:"disconnected",participantsCount:0,version:0,participants:{}}:void 0,membersCount:f?.length}}(t)}async function ar(e){const{id:t,accessHash:n}=e,s=await $a(new pe.Api.messages.GetPeerSettings({peer:jn(t,n)}),{abortControllerChatId:t});if(s)return Ke(s.users),{users:s.users.map(js).filter(Boolean),settings:Un(s.settings)}}async function or(e){let{query:t}=e;const n=await $a(new pe.Api.contacts.Search({q:t,limit:g}));if(!n)return;$r(n);const s=n.myResults.map(ge),i=n.results.map(ge).filter((e=>!s.includes(e))),a=n.chats.concat(n.users).map((e=>yn(e))).filter(Boolean),o=n.users.map(js).filter(Boolean);return{accountResultIds:s,globalResultIds:i,chats:a,users:o}}async function rr(e){let t,{type:n,user:s}=e;if("self"===n||"user"===n){const e=await $a(new pe.Api.users.GetUsers({id:["user"===n&&s?Vn(s.id,s.accessHash):new pe.Api.InputUserSelf]}));if(!e||!e.length)return;[t]=e}else if("support"===n){const e=await $a(new pe.Api.help.GetSupport);if(!e||!e.user)return;t=e.user}const i=yn(t,"support"===n);if(i)return No({"@type":"updateChat",id:i.id,chat:i}),{chatId:i.id}}async function dr(e){let{chat:t,lastLocalMessage:n,noLastMessage:s}=e;const{id:i,accessHash:a}=t,o=await $a(new pe.Api.messages.GetPeerDialogs({peers:[new pe.Api.InputDialogPeer({peer:jn(i,a)})]}));if(!o)return;const r=o.dialogs[0];if(!(r&&r instanceof pe.Api.Dialog))return;const d=Kr(o)[In(r.peer)];if(!d)return;$r(o);const c=Ms(o.messages[0]);Si(o.messages);const u=n&&(!c||n.date>c.date)?n:c,l=hn(r,d);No({"@type":"updateChat",id:i,chat:l}),!s&&u&&No({"@type":"updateChatLastMessage",id:i,lastMessage:u}),na(o.state),mi(l.id,l.muteUntil,No)}function cr(e){let{chat:t,draft:n}=e;return $a(new pe.Api.messages.SaveDraft({peer:jn(t.id,t.accessHash),message:n?.text?.text||"",entities:n?.text?.entities?.map(Zn),replyTo:n?.replyInfo&&gs(n.replyInfo)}))}async function ur(e){let{chat:t,isMuted:n,muteUntil:s=0}=e;n&&!s&&(s=D),await $a(new pe.Api.account.UpdateNotifySettings({peer:new pe.Api.InputNotifyPeer({peer:jn(t.id,t.accessHash)}),settings:new pe.Api.InputPeerNotifySettings({muteUntil:s})})),No({"@type":"updateNotifyExceptions",chatId:t.id,isMuted:n}),dr({chat:t,noLastMessage:!0})}async function lr(e){let{chat:t,topicId:n,isMuted:s,muteUntil:i=0}=e;s&&!i&&(i=D),await $a(new pe.Api.account.UpdateNotifySettings({peer:new pe.Api.InputNotifyForumTopic({peer:jn(t.id,t.accessHash),topMsgId:n}),settings:new pe.Api.InputPeerNotifySettings({muteUntil:i})})),No({"@type":"updateTopicNotifyExceptions",chatId:t.id,topicId:n,isMuted:s})}async function pr(e){let{title:t,about:n="",users:s}=e;const i=await $a(new pe.Api.channels.CreateChannel({broadcast:!0,title:t,about:n}),{shouldThrow:!0});if(!(i instanceof pe.Api.Updates))return void(d&&console.error("Unexpected channel creation update",i));const a=i.chats[0];if(!(a&&a instanceof pe.Api.Channel))return void(d&&console.error("Created channel not found",i));const o=yn(a);let r;if(s?.length){const e=await $a(new pe.Api.channels.InviteToChannel({channel:Vn(o.id,o.accessHash),users:s.map((e=>{let{id:t,accessHash:n}=e;return Vn(t,n)}))}));if(!e)return;Ka(e.updates),r=e.missingInvitees.map(Nn)}return{channel:o,missingUsers:r}}function fr(e){let{channelId:t,accessHash:n}=e;return $a(new pe.Api.channels.JoinChannel({channel:Vn(t,n)}),{shouldReturnTrue:!0,shouldThrow:!0})}function hr(e){let{chat:t,user:n}=e;if("chatTypeBasicGroup"===t.type)return $a(new pe.Api.messages.DeleteChatUser({chatId:Vn(t.id,t.accessHash),userId:Vn(n.id,n.accessHash)}),{shouldReturnTrue:!0})}function mr(e){let{chatId:t}=e;return $a(new pe.Api.messages.DeleteChat({chatId:Vn(t)}),{shouldReturnTrue:!0})}function gr(e){let{channelId:t,accessHash:n}=e;return $a(new pe.Api.channels.LeaveChannel({channel:Vn(t,n)}),{shouldReturnTrue:!0})}function Ar(e){let{channelId:t,accessHash:n}=e;return $a(new pe.Api.channels.DeleteChannel({channel:Vn(t,n)}),{shouldReturnTrue:!0})}async function yr(e){let{title:t,users:n}=e;const s=await $a(new pe.Api.messages.CreateChat({title:t,users:n.map((e=>{let{id:t,accessHash:n}=e;return Vn(t,n)}))}));if(!s)return;Ka(s.updates);const i=s.missingInvitees.map(Nn),a=s.updates.chats[0];if(a&&a instanceof pe.Api.Chat)return{chat:yn(a),missingUsers:i};d&&console.error("Created chat not found",s.updates)}async function wr(e){let{chatId:t,accessHash:n,photo:s}=e;const i=Vn(t,n);let a;if(s instanceof File){const e=await Za(s);a=new pe.Api.InputChatUploadedPhoto({file:e})}else if(s){const e=Xn(s);if(!e)return!1;a=new pe.Api.InputChatPhoto({id:e})}else a=new pe.Api.InputChatPhotoEmpty;return $a(i instanceof pe.Api.InputChannel?new pe.Api.channels.EditPhoto({channel:i,photo:a}):new pe.Api.messages.EditChatPhoto({chatId:i,photo:a}),{shouldReturnTrue:!0})}async function Ir(e){let{chat:t,shouldBePinned:n}=e;const{id:s,accessHash:i}=t;await $a(new pe.Api.messages.ToggleDialogPin({peer:new pe.Api.InputDialogPeer({peer:jn(s,i)}),pinned:n||void 0}))&&No({"@type":"updateChatPinned",id:t.id,isPinned:n})}async function br(e){let{chat:t,shouldBePinned:n}=e;const{id:s,accessHash:i}=t;await $a(new pe.Api.messages.ToggleSavedDialogPin({peer:new pe.Api.InputDialogPeer({peer:jn(s,i)}),pinned:n||void 0}))&&No({"@type":"updateSavedDialogPinned",id:t.id,isPinned:n})}function Sr(e){let{chat:t,folderId:n}=e;const{id:s,accessHash:i}=t;return $a(new pe.Api.folders.EditPeerFolders({folderPeers:[new pe.Api.InputFolderPeer({peer:jn(s,i),folderId:n})]}),{shouldReturnTrue:!0})}async function vr(){const e=await $a(new pe.Api.messages.GetDialogFilters);if(!e)return;const{filters:t}=e,n=t.findIndex((e=>e instanceof pe.Api.DialogFilterDefault)),s=t.filter(_e),i=s.map((e=>{let{id:t}=e;return t}));return-1!==n&&i.splice(n,0,$),{byId:Xe(s.map(Mn),"id"),orderedIds:i}}async function Cr(){const e=await $a(new pe.Api.messages.GetSuggestedDialogFilters);if(e)return e.map(Tn).filter(Boolean)}async function Pr(e){let{id:t,folderUpdate:n}=e;n.excludedChatIds=n.excludedChatIds.filter((e=>!n.includedChatIds.includes(e)));const s=function(e){const{emoticon:t,contacts:n,nonContacts:s,groups:i,channels:a,bots:o,excludeArchived:r,excludeMuted:d,excludeRead:c,pinnedChatIds:u,includedChatIds:l,excludedChatIds:p}=e,f=u?u.map(Ln).filter(Boolean):[],h=l?l.map(Ln).filter(Boolean):[],m=p?p.map(Ln).filter(Boolean):[];return e.isChatList?new pe.Api.DialogFilterChatlist({id:e.id,title:e.title,emoticon:t||void 0,pinnedPeers:f,includePeers:h,hasMyInvites:e.hasMyInvites}):new pe.Api.DialogFilter({id:e.id,title:e.title,emoticon:t||void 0,contacts:n||void 0,nonContacts:s||void 0,groups:i||void 0,bots:o||void 0,excludeArchived:r||void 0,excludeMuted:d||void 0,excludeRead:c||void 0,broadcasts:a||void 0,pinnedPeers:f,includePeers:h,excludePeers:m})}(n);await $a(new pe.Api.messages.UpdateDialogFilter({id:t,filter:s}))&&No({"@type":"updateChatFolder",id:t,folder:n})}async function Mr(e){const t=await $a(new pe.Api.messages.UpdateDialogFilter({id:e,filter:void 0})),n=await Cr();t&&No({"@type":"updateChatFolder",id:e,folder:void 0}),n&&No({"@type":"updateRecommendedChatFolders",folders:n})}function Tr(e){return $a(new pe.Api.messages.UpdateDialogFiltersOrder({order:e}))}async function Br(e){let{chat:t,hasUnreadMark:n}=e;const{id:s,accessHash:i}=t;await $a(new pe.Api.messages.MarkDialogUnread({peer:new pe.Api.InputDialogPeer({peer:jn(s,i)}),unread:n||void 0}))&&No({"@type":"updateChat",id:t.id,chat:{hasUnreadMark:n}})}async function Rr(e){return kr(await $a(new pe.Api.contacts.ResolvePhone({phone:e})))}async function Ur(e){return kr(await $a(new pe.Api.contacts.ResolveUsername({username:e})))}function kr(e){if(!e)return;const{users:t,chats:n}=e,s=n.length?yn(n[0]):yn(t[0]);return s?($r(e),{chat:s,user:js(t[0])}):void 0}function Dr(e){let{chat:t,isEnabled:n}=e;const{id:s,accessHash:i}=t,a=Vn(s,i);return $a(new pe.Api.channels.TogglePreHistoryHidden({channel:a,enabled:n}),{shouldReturnTrue:!0})}function Er(e){let{chat:t,bannedRights:n}=e;const{id:s,accessHash:i}=t,a=jn(s,i);return $a(new pe.Api.messages.EditChatDefaultBannedRights({peer:a,bannedRights:ts(n)}),{shouldReturnTrue:!0})}function xr(e){let{chat:t,user:n,bannedRights:s,untilDate:i}=e;const a=Vn(t.id,t.accessHash),o=jn(n.id,n.accessHash);return $a(new pe.Api.channels.EditBanned({channel:a,participant:o,bannedRights:ts(s,i)}),{shouldReturnTrue:!0})}function Nr(e){let{chat:t,user:n,adminRights:s,customTitle:i=""}=e;const a=Vn(t.id,t.accessHash),o=Vn(n.id,n.accessHash);return $a(new pe.Api.channels.EditAdmin({channel:a,userId:o,adminRights:ns(s),rank:i}),{shouldReturnTrue:!0})}async function Hr(e,t){const n=Vn(e.id,e.accessHash);await $a(n instanceof pe.Api.InputChannel?new pe.Api.channels.EditTitle({channel:n,title:t}):new pe.Api.messages.EditChatTitle({chatId:n,title:t}),{shouldReturnTrue:!0})}async function Gr(e,t){await $a(new pe.Api.messages.EditChatAbout({peer:jn(e.id,e.accessHash),about:t}))&&No({"@type":"updateChatFullInfo",id:e.id,fullInfo:{about:t}})}function Fr(e){let{chat:t,isEnabled:n}=e;const{id:s,accessHash:i}=t,a=Vn(s,i);return $a(new pe.Api.channels.ToggleSignatures({channel:a,enabled:n}),{shouldReturnTrue:!0})}async function _r(e,t){let n,s=arguments.length>3?arguments[3]:void 0;switch(arguments.length>2&&void 0!==arguments[2]?arguments[2]:"recent"){case"kicked":n=new pe.Api.ChannelParticipantsKicked({q:""});break;case"admin":n=new pe.Api.ChannelParticipantsAdmins;break;default:n=new pe.Api.ChannelParticipantsRecent}const i=await $a(new pe.Api.channels.GetParticipants({channel:Vn(e,t),filter:n,offset:s,limit:A}),{abortControllerChatId:e});if(!i||i instanceof pe.Api.channels.ChannelParticipantsNotModified)return;$r(i);const{users:a,userStatusesById:o}=Vs(i.users);return{members:Cn(i),users:a,userStatusesById:o}}async function qr(){const e=await $a(new pe.Api.channels.GetGroupsForDiscussion);if(e)return $r(e),e.chats.map((e=>yn(e)))}function Or(e){let{channel:t,chat:n}=e;return $a(new pe.Api.channels.SetDiscussionGroup({broadcast:jn(t.id,t.accessHash),group:n?jn(n.id,n.accessHash):new pe.Api.InputChannelEmpty}),{shouldReturnTrue:!0})}async function jr(e){const t=await $a(new pe.Api.messages.MigrateChat({chatId:Vn(e.id)}),{shouldThrow:!0});if(!(t&&t instanceof pe.Api.Updates))return void(d&&console.error("Unexpected channel creation update",t));$r(t);const n=t.updates.find((e=>e instanceof pe.Api.UpdateChannel)).channelId;return yn(t.chats.find((e=>e instanceof pe.Api.Channel&&e.id.toString()===n.toString())))}async function Lr(e){const t=await $a(new pe.Api.messages.CheckChatInvite({hash:e}));if(!t)return;let n;if(t instanceof pe.Api.ChatInvite){const{photo:n,participantsCount:s,title:i,channel:a,requestNeeded:o,about:r,megagroup:d}=t;n instanceof pe.Api.Photo&&Le(t.photo),No({"@type":"showInvite",data:{title:i,about:r,hash:e,participantsCount:s,isChannel:a&&!d,isRequestNeeded:o,...n instanceof pe.Api.Photo&&{photo:At(n)}}})}else n=yn(t.chat),n&&No({"@type":"updateChat",id:n.id,chat:n});return n?{chatId:n.id}:void 0}async function Vr(e,t){try{if("chatTypeChannel"===e.type||"chatTypeSuperGroup"===e.type){const n=await $a(new pe.Api.channels.InviteToChannel({channel:Vn(e.id,e.accessHash),users:t.map((e=>Vn(e.id,e.accessHash)))}));if(!n)return;return Ka(n.updates),n.missingInvitees.map(Nn)}const n=await Promise.all(t.map((async t=>{const n=await $a(new pe.Api.messages.AddChatUser({chatId:Vn(e.id),userId:Vn(t.id,t.accessHash)}));if(n)return Ka(n.updates),n.missingInvitees.map(Nn)})));if(n)return n.flat().filter(Boolean)}catch(e){No({"@type":"error",error:{message:e.message}})}}function zr(e,t){return"chatTypeChannel"===e.type||"chatTypeSuperGroup"===e.type?xr({chat:e,user:t,bannedRights:{viewMessages:!0,sendMessages:!0,sendMedia:!0,sendStickers:!0,sendGifs:!0,sendGames:!0,sendInline:!0,embedLinks:!0,sendPolls:!0,changeInfo:!0,inviteUsers:!0,pinMessages:!0,manageTopics:!0,sendPhotos:!0,sendVideos:!0,sendRoundvideos:!0,sendAudios:!0,sendVoices:!0,sendDocs:!0,sendPlain:!0},untilDate:D}):$a(new pe.Api.messages.DeleteChatUser({chatId:Vn(e.id),userId:Vn(t.id,t.accessHash)}),{shouldReturnTrue:!0})}function Wr(e,t){return $a(new pe.Api.channels.ToggleJoinToSend({channel:Vn(e.id,e.accessHash),enabled:t}),{shouldReturnTrue:!0})}function Jr(e,t){return $a(new pe.Api.channels.ToggleJoinRequest({channel:Vn(e.id,e.accessHash),enabled:t}),{shouldReturnTrue:!0})}function Kr(e,t){const n={};return e.chats?.forEach((e=>{const s=`chat${e.id}`;t?.[s]&&"min"in e&&e.min||(n[s]=e)})),e.users?.forEach((e=>{const s=`user${e.id}`;t?.[s]&&"min"in e&&e.min||(n[s]=e)})),n}function $r(e){"users"in e&&Ke(e.users),"chats"in e&&Ke(e.chats),"messages"in e&&e.messages.forEach((e=>{qe(e)}))}async function Qr(e){let{hash:t}=e;const n=await $a(new pe.Api.messages.ImportChatInvite({hash:t}));if(n instanceof pe.Api.Updates&&n.chats.length)return yn(n.chats[0])}function Yr(e){let{chat:t,enabledReactions:n,reactionsLimit:s}=e;return $a(new pe.Api.messages.SetChatAvailableReactions({peer:jn(t.id,t.accessHash),availableReactions:(i=n,"all"===i?.type?new pe.Api.ChatReactionsAll({allowCustom:i.areCustomAllowed}):"some"===i?.type?new pe.Api.ChatReactionsSome({reactions:i.allowed.map(ps)}):new pe.Api.ChatReactionsNone),reactionsLimit:s}),{shouldReturnTrue:!0});var i}function Zr(e){let{chat:t,isProtected:n}=e;const{id:s,accessHash:i}=t;return $a(new pe.Api.messages.ToggleNoForwards({peer:jn(s,i),enabled:n}),{shouldReturnTrue:!0})}function Xr(e){let{chat:t,isEnabled:n}=e;const{id:s,accessHash:i}=t;return $a(new pe.Api.channels.ToggleParticipantsHidden({channel:jn(s,i),enabled:n}),{shouldReturnTrue:!0})}function ed(e){let{chat:t,isEnabled:n}=e;const{id:s,accessHash:i}=t;return $a(new pe.Api.channels.ToggleForum({channel:jn(s,i),enabled:n}),{shouldReturnTrue:!0,shouldThrow:!0})}async function td(e){let{chat:t,title:n,iconColor:s,iconEmojiId:i,sendAs:a}=e;const{id:o,accessHash:r}=t,d=await $a(new pe.Api.channels.CreateForumTopic({channel:jn(o,r),title:n,iconColor:s,iconEmojiId:i?Ie()(i):void 0,sendAs:a?jn(a.id,a.accessHash):void 0,randomId:$n()}));if(d instanceof pe.Api.Updates&&d.updates.length)return d.updates?.find((e=>e instanceof pe.Api.UpdateMessageID))?.id}async function nd(e){let{chat:t,query:n,offsetTopicId:s,offsetId:i,offsetDate:a,limit:o=U}=e;const{id:r,accessHash:d}=t,c=await $a(new pe.Api.channels.GetForumTopics({channel:jn(r,d),limit:o,q:n,offsetTopic:s,offsetId:i,offsetDate:a}));if(!c)return;$r(c);const{count:u,orderByCreateDate:l}=c,p=c.topics.map(En).filter(Boolean),f=c.messages.map(Ms).filter(Boolean);return Si(c.messages),{topics:p,messages:f,users:c.users.map(js).filter(Boolean),chats:c.chats.map((e=>yn(e))).filter(Boolean),count:u+1,shouldOrderByCreateDate:l,draftsById:c.topics.reduce(((e,t)=>(t instanceof pe.Api.ForumTopic&&t.draft&&(e[t.id]=Bs(t.draft)),e)),{}),readInboxMessageIdByTopicId:c.topics.reduce(((e,t)=>(t instanceof pe.Api.ForumTopic&&t.readInboxMaxId&&(e[t.id]=t.readInboxMaxId),e)),{})}}async function sd(e){let{chat:t,topicId:n}=e;const{id:s,accessHash:i}=t,a=await $a(new pe.Api.channels.GetForumTopicsByID({channel:jn(s,i),topics:[n]}));if(!(a?.topics.length&&a.topics[0]instanceof pe.Api.ForumTopic))return;$r(a);const o=a.messages.map(Ms).filter(Boolean);Si(a.messages);const r=a.users.map(js).filter(Boolean),d=a.chats.map((e=>yn(e))).filter(Boolean);return{topic:En(a.topics[0]),messages:o,users:r,chats:d}}async function id(e){let{chat:t,topicId:n}=e;const{id:s,accessHash:i}=t,a=await $a(new pe.Api.channels.DeleteTopicHistory({channel:jn(s,i),topMsgId:n}));a&&(ma(t,a),a.offset&&await id({chat:t,topicId:n}))}function ad(e){let{chat:t,topicId:n,isPinned:s}=e;const{id:i,accessHash:a}=t;return $a(new pe.Api.channels.UpdatePinnedForumTopic({channel:jn(i,a),topicId:n,pinned:s}),{shouldReturnTrue:!0})}function od(e){let{chat:t,topicId:n,title:s,iconEmojiId:i,isClosed:a,isHidden:o}=e;const{id:r,accessHash:d}=t;return $a(new pe.Api.channels.EditForumTopic({channel:jn(r,d),topicId:n,title:s,iconEmojiId:n!==X&&i?Ie()(i):void 0,closed:a,hidden:o}),{shouldReturnTrue:!0})}async function rd(e){let{slug:t}=e;const n=await $a(new pe.Api.chatlists.CheckChatlistInvite({slug:t})),s=function(e,t){return e instanceof pe.Api.chatlists.ChatlistInvite?{slug:t,title:e.title,emoticon:e.emoticon,peerIds:e.peers.map(ge).filter(Boolean)}:e instanceof pe.Api.chatlists.ChatlistInviteAlready?{slug:t,folderId:e.filterId,missingPeerIds:e.missingPeers.map(ge).filter(Boolean),alreadyPeerIds:e.alreadyPeers.map(ge).filter(Boolean)}:void 0}(n,t);if(n&&s)return $r(n),{invite:s,users:n.users.map(js).filter(Boolean),chats:n.chats.map((e=>yn(e))).filter(Boolean)}}function dd(e){let{slug:t,peers:n}=e;return $a(new pe.Api.chatlists.JoinChatlistInvite({slug:t,peers:n.map((e=>jn(e.id,e.accessHash)))}),{shouldReturnTrue:!0,shouldThrow:!0})}async function cd(e){let{folderId:t}=e;const n=await $a(new pe.Api.chatlists.GetLeaveChatlistSuggestions({chatlist:new pe.Api.InputChatlistDialogFilter({filterId:t})}));if(n)return n.map(ge)}function ud(e){let{folderId:t,peers:n}=e;return $a(new pe.Api.chatlists.LeaveChatlist({chatlist:new pe.Api.InputChatlistDialogFilter({filterId:t}),peers:n.map((e=>jn(e.id,e.accessHash)))}),{shouldReturnTrue:!0})}async function ld(e){let{folderId:t,title:n,peers:s}=e;const i=await $a(new pe.Api.chatlists.ExportChatlistInvite({chatlist:new pe.Api.InputChatlistDialogFilter({filterId:t}),title:n||"",peers:s.map((e=>jn(e.id,e.accessHash)))}),{shouldThrow:!0});if(i&&!(i.filter instanceof pe.Api.DialogFilterDefault))return{filter:Mn(i.filter),invite:xn(i.invite)}}function pd(e){let{folderId:t,slug:n}=e;return $a(new pe.Api.chatlists.DeleteExportedInvite({chatlist:new pe.Api.InputChatlistDialogFilter({filterId:t}),slug:n}))}async function fd(e){let{folderId:t,slug:n,title:s,peers:i}=e;const a=await $a(new pe.Api.chatlists.EditExportedInvite({chatlist:new pe.Api.InputChatlistDialogFilter({filterId:t}),slug:n,title:s,peers:i.map((e=>jn(e.id,e.accessHash)))}),{shouldThrow:!0});if(a)return xn(a)}async function hd(e){let{folderId:t}=e;const n=await $a(new pe.Api.chatlists.GetExportedInvites({chatlist:new pe.Api.InputChatlistDialogFilter({filterId:t})}));if(n)return $r(n),{invites:n.invites.map(xn).filter(Boolean),users:n.users.map(js).filter(Boolean),chats:n.chats.map((e=>yn(e))).filter(Boolean)}}function md(e){let{chat:t,isEnabled:n}=e;return $a(new pe.Api.messages.TogglePeerTranslations({disabled:!n||void 0,peer:jn(t.id,t.accessHash)}))}function gd(e){let{chat:t,isEnabled:n}=e;const{id:s,accessHash:i}=t,a=Vn(s,i);return $a(new pe.Api.channels.ToggleViewForumAsMessages({channel:a,enabled:Boolean(n)}),{shouldReturnTrue:!0})}async function Ad(e){let{chat:t}=e;const n=await $a(new pe.Api.channels.GetChannelRecommendations({channel:t&&Vn(t.id,t.accessHash)}));if(!n)return;$r(n);const s=n?.chats.map((e=>yn(e))).filter(Boolean);return{similarChannels:s,count:n instanceof pe.Api.messages.ChatsSlice?n.count:s.length}}async function yd(e){let{chat:t,randomId:n,option:s}=e;const{id:i,accessHash:a}=t,o=Vn(i,a);try{const e=await $a(new pe.Api.channels.ReportSponsoredMessage({channel:o,randomId:Ye(n),option:Ye(s)}),{shouldThrow:!0});if(!e)return;return function(e){return e instanceof pe.Api.channels.SponsoredMessageReportResultReported?{type:"reported"}:e instanceof pe.Api.channels.SponsoredMessageReportResultAdsHidden?{type:"hidden"}:{type:"selectOption",title:e.title,options:e.options.map((e=>({text:e.text,option:Qe(e.option)})))}}(e)}catch(e){return e instanceof Error&&"PREMIUM_ACCOUNT_REQUIRED"===e.message?{type:"premiumRequired"}:void 0}}async function wd(e){let{peer:t,reason:n,description:s}=e;return await $a(new pe.Api.account.ReportPeer({peer:jn(t.id,t.accessHash),reason:as(n),message:s}))}async function Id(e){let{peer:t,photo:n,reason:s,description:i}=e;const a=Xn(n);if(a)return await $a(new pe.Api.account.ReportProfilePhoto({peer:jn(t.id,t.accessHash),photoId:a,reason:as(s),message:i}))}async function bd(e){let{hash:t,areCallsEnabled:n,areSecretChatsEnabled:s,isConfirmed:i}=e;return await $a(new pe.Api.account.ChangeAuthorizationSettings({hash:Ie()(t),...void 0!==n?{callRequestsDisabled:!n}:void 0,...void 0!==s?{encryptedRequestsDisabled:!s}:void 0,...i&&{confirmed:i}}))}async function Sd(e){let{days:t}=e;return await $a(new pe.Api.account.SetAuthorizationTTL({authorizationTtlDays:t}))}async function vd(e){let{slug:t}=e;const n=await $a(new pe.Api.account.ResolveBusinessChatLink({slug:t}),{shouldIgnoreErrors:!0});var s;if(n)return{users:n.users.map(js).filter(Boolean),chats:n.chats.map((e=>yn(e))).filter(Boolean),chatLink:{chatId:ge((s=n).peer),text:kt(s.message,s.entities)}}}function Cd(e){let{enabled:t}=e;return $a(new pe.Api.account.ToggleSponsoredMessages({enabled:t}),{shouldReturnTrue:!0})}function Pd(e,t,n){var s;return(t="symbol"==typeof(s=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var s=n.call(e,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t))?s:s+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}"undefined"==typeof File&&(self.File=class extends Blob{constructor(e,t,n){if(n){const{type:t,...s}=n;super(e,{type:t}),Pd(this,"name",void 0),Object.assign(this,s)}else super(e),Pd(this,"name",void 0);this.name=t}});var Md=n(48287).hp;const Td=1e3,Bd=63;let Rd;async function Ud(e){let{chat:t,threadId:n,offsetId:s,isSavedDialog:i,...a}=e;const o=n===lt.l3?pe.Api.messages.GetHistory:i?pe.Api.messages.GetSavedHistory:pe.Api.messages.GetReplies;let r;try{r=await $a(new o({peer:jn(t.id,t.accessHash),...n!==lt.l3&&!i&&{msgId:Number(n)},...s&&{offsetId:Math.min(s,D)},...a}),{shouldThrow:!0,abortControllerChatId:t.id,abortControllerThreadId:n})}catch(e){"CHANNEL_PRIVATE"===e.message&&Rd({"@type":"updateChat",id:t.id,chat:{isRestricted:!0}})}if(!r||r instanceof pe.Api.messages.MessagesNotModified||!r.messages)return;dc(r);const d=r.messages.map(Ms).filter(Boolean),c=r.users.map(js).filter(Boolean),u=r.chats.map((e=>yn(e))).filter(Boolean),l=!(r instanceof pe.Api.messages.Messages)&&r.count;return Si(r.messages),{messages:d,users:c,chats:u,count:l}}async function kd(e){let{chat:t,messageId:n}=e;const s="channel"===qn(t.id);let i;try{i=await $a(s?new pe.Api.channels.GetMessages({channel:Vn(t.id,t.accessHash),id:[new pe.Api.InputMessageID({id:n})]}):new pe.Api.messages.GetMessages({id:[new pe.Api.InputMessageID({id:n})]}),{shouldThrow:!0,abortControllerChatId:t.id})}catch(e){const{message:t}=e;"CHANNEL_PRIVATE"!==t&&Rd({"@type":"error",error:{message:t,isSlowMode:!1,hasErrorKey:!0}})}if(!i||i instanceof pe.Api.messages.MessagesNotModified)return;"pts"in i&&ia(t.id,i.pts);const a=i.messages[0];if(!a)return;if(a instanceof pe.Api.MessageEmpty)return lt.K1;const o=a&&Ms(a);return Si([a]),o?(qe(a),{message:o,users:i.users.map(js).filter(Boolean)}):void 0}let Dd=Promise.resolve();function Ed(e,t){let{chat:n,lastMessageId:s,text:i,entities:a,replyInfo:o,attachment:r,sticker:c,story:u,gif:l,poll:p,contact:f,isSilent:h,scheduledAt:m,groupedId:g,noWebPage:A,sendAs:y,shouldUpdateStickerSetOrder:w,wasDrafted:I,isInvertedMedia:b,effectId:S}=e;const v=function(e,t,n,s,i,a,o,r,d,c,u,l,p,f,h,m){const g=Cs(t),A=a&&xs(a),y="chatTypeChannel"===e.type,w=i&&(S=i,v=e.isForum,"story"===S.type?{type:"story",peerId:S.peerId,storyId:S.storyId}:{type:"message",replyToMsgId:S.replyToMsgId,replyToTopId:S.replyToTopId,replyToPeerId:S.replyToPeerId,quoteText:S.quoteText,isForumTopic:!(!v||!S.replyToTopId)||void 0,...Boolean(S.quoteText)&&{isQuote:!0}}),I={id:g,chatId:e.id,content:{...n&&{text:{text:n,entities:s}},...A,...o&&{sticker:o},...r&&{video:r},poll:d&&Es(d,g),contact:c,storyData:f&&{mediaType:"storyData",...f},action:n?Ds(n,!0):void 0},date:l||Math.round(Date.now()/1e3)+dt(),isOutgoing:!y,senderId:p?.id||Ss,replyInfo:w,...u&&{groupedId:u,...A&&(A.photo||A.video)&&{isInAlbum:!0}},...l&&{isScheduled:!0},isForwardingAllowed:!0,isInvertedMedia:h,effectId:m},b=(0,Hn.e)(I.content,I.groupedId);var S,v;return{...I,...b&&{emojiOnlyCount:b}}}(n,s,i,a,o,r,c,l,p,f,g,m,y,u,b,S);Rd({"@type":v.isScheduled?"newScheduledMessage":"newMessage",id:v.id,chatId:n.id,message:v,wasDrafted:I});const C=setTimeout((()=>{Rd({"@type":v.isScheduled?"updateScheduledMessage":"updateMessage",id:v.id,chatId:n.id,message:{sendingState:"messageSendingStatePending"}})}),Td),P=$n();if(g)return function(e,t,n,s){let{chat:i,text:a,entities:o,replyInfo:r,attachment:c,groupedId:u,isSilent:l,scheduledAt:p,sendAs:f}=e,h=-1;xd[u]||(xd[u]={counter:0,singleMediaByIndex:{},localMessages:{}}),h=xd[u].counter++;const m=Dd;return Dd=(async()=>{let e;try{e=await Gd(n,c,s)}catch(e){return d&&console.warn(e),xd[u].counter--,void await m}const g=await async function(e,t){const n=await $a(new pe.Api.messages.UploadMedia({peer:e,media:t})),s=t.spoiler;if(n instanceof pe.Api.MessageMediaPhoto&&n.photo&&n.photo instanceof pe.Api.Photo){const{photo:{id:e,accessHash:t,fileReference:i}}=n;return new pe.Api.InputMediaPhoto({id:new pe.Api.InputPhoto({id:e,accessHash:t,fileReference:i}),spoiler:s})}if(n instanceof pe.Api.MessageMediaDocument&&n.document&&n.document instanceof pe.Api.Document){const{document:{id:e,accessHash:t,fileReference:i}}=n;return new pe.Api.InputMediaDocument({id:new pe.Api.InputDocument({id:e,accessHash:t,fileReference:i}),spoiler:s})}}(jn(i.id,i.accessHash),e);if(await m,!g)return xd[u].counter--,void(d&&console.warn("Failed to upload grouped media"));if(xd[u].singleMediaByIndex[h]=new pe.Api.InputSingleMedia({media:g,randomId:t,message:a||"",entities:o?o.map(Zn):void 0}),xd[u].localMessages[t.toString()]=n,Object.keys(xd[u].singleMediaByIndex).length<xd[u].counter)return;const{singleMediaByIndex:A,localMessages:y}=xd[u];delete xd[u];const w=await $a(new pe.Api.messages.SendMultiMedia({clearDraft:!0,peer:jn(i.id,i.accessHash),multiMedia:Object.values(A),replyTo:r&&gs(r),...l&&{silent:l},...p&&{scheduleDate:p},...f&&{sendAs:jn(f.id,f.accessHash)}}),{shouldIgnoreUpdates:!0});w&&Sc(y,w)})(),Dd}({chat:n,text:i,entities:a,replyInfo:o,attachment:r,groupedId:g,isSilent:h,scheduledAt:m},P,v,t);const M=(async()=>{let e;if(r)try{e=await Gd(v,r,t)}catch(e){return d&&console.warn(e),void await Dd}else c?e=Jn(c):l?e=Jn(l):p?e=function(e,t){const{summary:n,quiz:s}=e,i=new pe.Api.Poll({id:t,publicVoters:n.isPublic,question:hs(n.question),answers:n.answers.map((e=>{let{text:t,option:n}=e;return new pe.Api.PollAnswer({text:hs(t),option:Ye(n)})})),quiz:n.quiz,multipleChoice:n.multipleChoice});if(!s)return new pe.Api.InputMediaPoll({poll:i});const a=s.correctAnswers.map(Ye),{solution:o}=s,r=s.solutionEntities?s.solutionEntities.map(Zn):[];return new pe.Api.InputMediaPoll({poll:i,correctAnswers:a,...o&&{solution:o,solutionEntities:r}})}(p,P):u?e=function(e){const t=Ln(e.peerId);return new pe.Api.InputMediaStory({peer:t,id:e.id})}(u):f&&(e=new pe.Api.InputMediaContact({phoneNumber:f.phoneNumber,firstName:f.firstName,lastName:f.lastName,vcard:""}));const s=e?pe.Api.messages.SendMedia:pe.Api.messages.SendMessage;try{const t=await $a(new s({clearDraft:!0,message:i||"",entities:a?a.map(Zn):void 0,peer:jn(n.id,n.accessHash),randomId:P,replyTo:o&&gs(o),...h&&{silent:h},...m&&{scheduleDate:m},...e&&{media:e},...A&&{noWebpage:A},...y&&{sendAs:jn(y.id,y.accessHash)},...w&&{updateStickersetsOrder:w},...b&&{invertMedia:b},...S&&{effect:Ie()(S)}}),{shouldThrow:!0,shouldIgnoreUpdates:!0});t&&vc(v,t)}catch(e){"PRIVACY_PREMIUM_REQUIRED"===e.message&&Rd({"@type":"updateRequestUserUpdate",id:n.id}),Rd({"@type":"updateMessageSendFailed",chatId:n.id,localId:v.id,error:e.message}),clearTimeout(C)}})();return M}const xd={};async function Nd(e,t){let{chat:n,message:s,text:i,entities:a,attachment:o,noWebPage:r}=e;const c=1e3*s.date>Date.now()+1e3*dt(),u=o&&xs(o),l=i&&!o?.shouldSendAsFile?s.isInvertedMedia:void 0,p={...u||s.content,...i&&{text:{text:i,entities:a}}},f={...s,content:p,emojiOnlyCount:(0,Hn.e)(p,s.groupedId),isInvertedMedia:l};Rd({"@type":c?"updateScheduledMessage":"updateMessage",id:s.id,chatId:n.id,message:f});try{let e;o&&(e=await Gd(s,o,t));const d=a&&a.map(Zn);await $a(new pe.Api.messages.EditMessage({message:i||"",entities:d,media:e,peer:jn(n.id,n.accessHash),id:s.id,...c&&{scheduleDate:s.date},...r&&{noWebpage:r},...l&&{invertMedia:l}}),{shouldThrow:!0})}catch(e){d&&console.warn(e);const{message:t}=e;Rd({"@type":"error",error:{message:t,hasErrorKey:!0}}),Rd({"@type":c?"updateScheduledMessage":"updateMessage",id:s.id,chatId:n.id,message:s})}}async function Hd(e){let{chat:t,message:n,scheduledAt:s}=e;await $a(new pe.Api.messages.EditMessage({peer:jn(t.id,t.accessHash),id:n.id,scheduleDate:s}))}async function Gd(e,t,n){const{filename:s,blobUrl:i,mimeType:a,quick:o,voice:r,audio:d,previewBlobUrl:c,shouldSendAsFile:u,shouldSendAsSpoiler:l,ttlSeconds:p}=t,f=t=>{n.isCanceled?f.isCanceled=!0:n(t,function(e){const{chatId:t,id:n,previousLocalId:s}=e;return function(e,t){return`msg${e}-${t}`}(t,s||n)}(e))},h=async(e,t)=>Za(await async function(e,t){const n=await async function(e){return(await fetch(e)).blob()}(e);return function(e,t){return new File([e],t,{lastModified:Date.now(),type:e.type})}(n,t)}(e,s),t),m=L.has(a),g=d||m||u,[A,y]=await Promise.all(at([h(i,f),g&&c&&h(c)])),w=[new pe.Api.DocumentAttributeFilename({fileName:s})];if(!u){if(o){if(j.has(a)&&a!==_)return new pe.Api.InputMediaUploadedPhoto({file:A,spoiler:l});if(m){const{width:e,height:t,duration:n}=o;void 0!==n&&w.push(new pe.Api.DocumentAttributeVideo({duration:n,w:e,h:t,supportsStreaming:!0}))}}if(d){const{duration:e,title:t,performer:n}=d;w.push(new pe.Api.DocumentAttributeAudio({duration:e,title:t,performer:n}))}if(r){const{duration:e,waveform:t}=r,{data:n}=Gn(t,Bd);w.push(new pe.Api.DocumentAttributeAudio({voice:!0,duration:e,waveform:Md.from(n)}))}}return new pe.Api.InputMediaUploadedDocument({file:A,mimeType:a,attributes:w,thumb:y,forceFile:u,spoiler:l,ttlSeconds:p})}async function Fd(e){let{chat:t,messageId:n,isUnpin:s,isOneSide:i,isSilent:a}=e;await $a(new pe.Api.messages.UpdatePinnedMessage({peer:jn(t.id,t.accessHash),id:n,...s&&{unpin:!0},...i&&{pmOneside:!0},...a&&{silent:!0}}))}async function _d(e){let{chat:t,threadId:n}=e;const s=await $a(new pe.Api.messages.UnpinAllMessages({peer:jn(t.id,t.accessHash),...n&&{topMsgId:Number(n)}}));s&&(ma(t,s),s.offset&&await _d({chat:t,threadId:n}))}async function qd(e){let{chat:t,messageIds:n,shouldDeleteForAll:s}=e;const i="channel"===qn(t.id),a=await $a(i?new pe.Api.channels.DeleteMessages({channel:Vn(t.id,t.accessHash),id:n}):new pe.Api.messages.DeleteMessages({id:n,...s&&{revoke:!0}}));a&&(ma(t,a),Rd({"@type":"deleteMessages",ids:n,...i&&{chatId:t.id}}))}function Od(e){let{chat:t,messageIds:n}=e;$a(new pe.Api.messages.DeleteScheduledMessages({peer:jn(t.id,t.accessHash),id:n}))}async function jd(e){let{chat:t,shouldDeleteForAll:n}=e;const s="channel"===qn(t.id),i=await $a(s?new pe.Api.channels.DeleteHistory({channel:Vn(t.id,t.accessHash)}):new pe.Api.messages.DeleteHistory({peer:jn(t.id,t.accessHash),...n&&{revoke:!0},...!n&&{just_clear:!0}}));i&&("offset"in i&&(ma(t,i),i.offset)?await jd({chat:t,shouldDeleteForAll:n}):Rd({"@type":"deleteHistory",chatId:t.id}))}async function Ld(e){let{chat:t}=e;const n=await $a(new pe.Api.messages.DeleteSavedHistory({peer:jn(t.id,t.accessHash)}));n&&(ma(t,n),n.offset?await Ld({chat:t}):Rd({"@type":"deleteSavedHistory",chatId:t.id}))}async function Vd(e){let{peer:t,messageIds:n,reason:s,description:i}=e;return await $a(new pe.Api.messages.Report({peer:jn(t.id,t.accessHash),id:n,reason:as(s),message:i}))}async function zd(e){let{peer:t,threadId:n,action:s}=e;const i=function(e){switch(e.type){case"cancel":return new pe.Api.SendMessageCancelAction;case"typing":return new pe.Api.SendMessageTypingAction;case"recordAudio":return new pe.Api.SendMessageRecordAudioAction;case"chooseSticker":return new pe.Api.SendMessageChooseStickerAction;case"playingGame":return new pe.Api.SendMessageGamePlayAction}}(s);if(i)try{return await $a(new pe.Api.messages.SetTyping({peer:jn(t.id,t.accessHash),topMsgId:Number(n),action:i}),{shouldThrow:!0,abortControllerChatId:t.id,abortControllerThreadId:n})}catch(e){}else d&&console.warn("Unsupported message action",s)}async function Wd(e){let{chat:t,threadId:n,maxId:s=0}=e;const i="channel"===qn(t.id),a=Math.min(s,D);if(i&&n===lt.l3)await $a(new pe.Api.channels.ReadHistory({channel:Vn(t.id,t.accessHash),maxId:a}));else if(i)await $a(new pe.Api.messages.ReadDiscussion({peer:jn(t.id,t.accessHash),msgId:Number(n),readMaxId:a}));else{const e=await $a(new pe.Api.messages.ReadHistory({peer:jn(t.id,t.accessHash),maxId:a}));e&&ma(t,e)}n===lt.l3?dr({chat:t,noLastMessage:!0}):t.isForum&&Rd({"@type":"updateTopic",chatId:t.id,topicId:Number(n)})}async function Jd(e){let{chat:t,messageIds:n}=e;const s="channel"===qn(t.id),i=await $a(s?new pe.Api.channels.ReadMessageContents({channel:Vn(t.id,t.accessHash),id:n}):new pe.Api.messages.ReadMessageContents({id:n}));i&&(!0!==i&&ma(t,i),Rd({...s?{"@type":"updateChannelMessages",channelId:t.id}:{"@type":"updateCommonBoxMessages"},ids:n,messageUpdate:{hasUnreadMention:!1,isMediaUnread:!1}}))}async function Kd(e){let{chat:t,ids:n,shouldIncrement:s}=e;const i=ot(n,v),a=await Promise.all(i.map((e=>$a(new pe.Api.messages.GetMessagesViews({peer:jn(t.id,t.accessHash),id:e,increment:s})))));if(!a||a.some((e=>!e)))return;const o=a.flatMap((e=>e.views)),r=a.flatMap((e=>e.users)),d=a.flatMap((e=>e.chats));return{viewsInfo:n.map(((e,n)=>{const{views:s,forwards:i,replies:a}=o[n];return{id:e,views:s,forwards:i,threadInfo:a?Hs(a,e,t.id):void 0}})),users:r.map(js).filter(Boolean),chats:d.map((e=>yn(e))).filter(Boolean)}}async function $d(e){let{chat:t,ids:n}=e;const s=ot(n,v),i=await Promise.all(s.map((e=>$a(new pe.Api.messages.GetFactCheck({peer:jn(t.id,t.accessHash),msgId:e})))));if(i&&!i.some((e=>!e)))return i.flatMap((e=>e)).map(ks)}async function Qd(e){let{chat:t,messageId:n}=e;const[s,i]=await Promise.all([$a(new pe.Api.messages.GetDiscussionMessage({peer:jn(t.id,t.accessHash),msgId:n}),{abortControllerChatId:t.id,abortControllerThreadId:n}),Ud({chat:t,threadId:n,offsetId:1,addOffset:-1,limit:1})]);if(!s||!i)return;dc(s);const a=s.chats.map((e=>yn(e))).filter(Boolean).concat(i.chats),o=s.users.map(js).filter(Boolean).concat(i.users),r=s.messages.map(Ms).filter(Boolean),d=r.concat(i.messages),c=s.messages[s.messages.length-1]?.id;if(!c)return;Si(s.messages);const{unreadCount:u,maxId:l,readInboxMaxId:p,readOutboxMaxId:f}=s;return{chats:a,users:o,messages:d,topMessages:r,unreadCount:u,threadId:c,lastReadInboxMessageId:p,lastReadOutboxMessageId:f,lastMessageId:l,chatId:r[0]?.chatId,firstMessageId:i.messages[0]?.id}}async function Yd(e){let t,{chat:n,isSavedDialog:s,savedTag:i,type:a,query:o,threadId:r,minDate:d,maxDate:c,...u}=e;switch(a){case"media":t=new pe.Api.InputMessagesFilterPhotoVideo;break;case"documents":t=new pe.Api.InputMessagesFilterDocument;break;case"links":t=new pe.Api.InputMessagesFilterUrl;break;case"audio":t=new pe.Api.InputMessagesFilterMusic;break;case"voice":t=new pe.Api.InputMessagesFilterRoundVoice;break;case"profilePhoto":t=new pe.Api.InputMessagesFilterChatPhotos;break;default:t=new pe.Api.InputMessagesFilterEmpty}const l=jn(n.id,n.accessHash),p=await $a(new pe.Api.messages.Search({peer:s?new pe.Api.InputPeerSelf:l,savedPeerId:s?l:void 0,savedReaction:i&&[ps(i)],topMsgId:r===lt.l3||s?void 0:Number(r),filter:t,q:o||"",minDate:d,maxDate:c,...u}),{abortControllerChatId:n.id,abortControllerThreadId:r});if(!p||p instanceof pe.Api.messages.MessagesNotModified||!p.messages)return;dc(p);const f=p.chats.map((e=>yn(e))).filter(Boolean),h=p.users.map(js).filter(Boolean),m=p.messages.map(Ms).filter(Boolean);Si(p.messages);let g,A=m.length;return(p instanceof pe.Api.messages.MessagesSlice||p instanceof pe.Api.messages.ChannelMessages)&&(A=p.count,m.length&&(g=m[m.length-1].id)),{chats:f,users:h,messages:m,totalCount:A,nextOffsetId:g}}async function Zd(e){let t,{query:n,offsetRate:s=0,limit:i,type:a="text",minDate:o,maxDate:r}=e;switch(a){case"media":t=new pe.Api.InputMessagesFilterPhotoVideo;break;case"documents":t=new pe.Api.InputMessagesFilterDocument;break;case"links":t=new pe.Api.InputMessagesFilterUrl;break;case"audio":t=new pe.Api.InputMessagesFilterMusic;break;case"voice":t=new pe.Api.InputMessagesFilterRoundVoice;break;default:if(!(n||r&&o))return;t=new pe.Api.InputMessagesFilterEmpty}const d=await $a(new pe.Api.messages.SearchGlobal({q:n,offsetRate:s,offsetPeer:new pe.Api.InputPeerEmpty,broadcastsOnly:"channels"===a||void 0,limit:i,filter:t,folderId:$,minDate:o,maxDate:r}));if(!d||d instanceof pe.Api.messages.MessagesNotModified||!d.messages)return;dc({chats:d.chats,users:d.users,messages:d.messages});const c=d.chats.map((e=>yn(e))).filter(Boolean),u=d.users.map(js).filter(Boolean),l=d.messages.map(Ms).filter(Boolean);Si(d.messages);let p,f=l.length;return(d instanceof pe.Api.messages.MessagesSlice||d instanceof pe.Api.messages.ChannelMessages)&&(f=d.count,l.length&&(p=l[l.length-1].id)),{messages:l,users:u,chats:c,totalCount:f,nextRate:"nextRate"in d&&d.nextRate?d.nextRate:p}}async function Xd(e){let{text:t}=e;const n=hs(t),s=await $a(new pe.Api.messages.GetWebPagePreview({message:n.text,entities:n.entities}));return s&&_t(s)}async function ec(e){let{chat:t,messageId:n,options:s}=e;const{id:i,accessHash:a}=t;await $a(new pe.Api.messages.SendVote({peer:jn(i,a),msgId:n,options:s.map(Ye)}))}async function tc(e){let{chat:t,messageId:n,poll:s}=e;const{id:i,accessHash:a}=t;await $a(new pe.Api.messages.EditMessage({peer:jn(i,a),id:n,media:Kn(s,!0)}))}async function nc(e){let{chat:t,messageId:n,option:s,offset:i,limit:a,shouldResetVoters:o}=e;const{id:r,accessHash:d}=t,c=await $a(new pe.Api.messages.GetPollVotes({peer:jn(r,d),id:n,...s&&{option:Ye(s)},...i&&{offset:i},...a&&{limit:a}}));if(!c)return;dc({chats:c.chats,users:c.users,messages:[]});const u=c.users.map(js).filter(Boolean),l=c.chats.map((e=>yn(e))).filter(Boolean),p=c.votes.map((e=>({peerId:ge(e.peer),date:e.date})));return{count:c.count,votes:p,chats:l,users:u,nextOffset:c.nextOffset,shouldResetVoters:o}}async function sc(e){let{chat:t,ids:n}=e;await $a(new pe.Api.messages.GetExtendedMedia({peer:jn(t.id,t.accessHash),id:n}))}async function ic(e){let{fromChat:t,toChat:n,toThreadId:s,messages:i,isSilent:a,scheduledAt:o,sendAs:r,withMyScore:d,noAuthors:c,noCaptions:u,isCurrentUserPremium:l,wasDrafted:p,lastMessageId:f}=e;const h=i.map((e=>{let{id:t}=e;return t})),m=i.map($n),g={};i.forEach(((e,t)=>{const i=function(e){let{toChat:t,toThreadId:n,message:s,scheduledAt:i,noAuthors:a,noCaptions:o,isCurrentUserPremium:r,lastMessageId:d}=e;const c=Cs(d),{content:u,chatId:l,id:p,senderId:f,groupedId:h,isInAlbum:m,isInvertedMedia:g}=s,A=u.audio,y=t.id===Ss&&(l!==t.id||s.forwardInfo)&&!A,w=Object.keys(u).length>1&&u.text&&o,I=!r,b=u.text?.entities&&I?{text:u.text.text,entities:u.text.entities.filter((e=>e.type!==lt.C7.CustomEmoji))}:u.text,S=(0,Hn.e)(u,h),v={...u,text:w?void 0:b},C=n===lt.l3,P=n&&!C?{type:"message",replyToMsgId:n,replyToTopId:n,isForumTopic:t.isForum||void 0}:void 0;return{id:c,chatId:t.id,content:v,date:i||Math.round(Date.now()/1e3)+dt(),isOutgoing:!y&&"chatTypeChannel"!==t.type,senderId:Ss,sendingState:"messageSendingStatePending",groupedId:h,isInAlbum:m,isForwardingAllowed:!0,replyInfo:P,isInvertedMedia:g,...n&&t?.isForum&&{isTopicReply:!0},...S&&{emojiOnlyCount:S},...s.chatId!==Ss&&!A&&!a&&{forwardInfo:{date:s.forwardInfo?.date||s.date,savedDate:s.date,isChannelPost:!1,fromChatId:l,fromMessageId:p,fromId:f,savedFromPeerId:s.chatId}},...s.chatId===Ss&&!a&&{forwardInfo:s.forwardInfo},...i&&{isScheduled:!0}}}({toChat:n,toThreadId:Number(s),message:e,scheduledAt:o,noAuthors:c,noCaptions:u,isCurrentUserPremium:l,lastMessageId:f});g[m[t].toString()]=i,Rd({"@type":i.isScheduled?"newScheduledMessage":"newMessage",id:i.id,chatId:n.id,message:i,wasDrafted:p})}));try{const e=await $a(new pe.Api.messages.ForwardMessages({fromPeer:jn(t.id,t.accessHash),toPeer:jn(n.id,n.accessHash),randomId:m,id:h,withMyScore:d||void 0,silent:a||void 0,dropAuthor:c||void 0,dropMediaCaptions:u||void 0,...s&&{topMsgId:Number(s)},...o&&{scheduleDate:o},...r&&{sendAs:jn(r.id,r.accessHash)}}),{shouldThrow:!0,shouldIgnoreUpdates:!0});e&&Sc(g,e)}catch(e){Object.values(g).forEach((t=>{Rd({"@type":"updateMessageSendFailed",chatId:n.id,localId:t.id,error:e.message})}))}}async function ac(e){let{chat:t,timestamp:n}=e;const s=await $a(new pe.Api.messages.GetHistory({peer:jn(t.id,t.accessHash),offsetDate:n,addOffset:-1,limit:1}));if(s&&!(s instanceof pe.Api.messages.MessagesNotModified)&&s.messages&&s.messages.length)return s.messages[0].id}async function oc(e){let{chat:t}=e;const{id:n,accessHash:s}=t,i=await $a(new pe.Api.messages.GetScheduledHistory({peer:jn(n,s)}),{abortControllerChatId:n});if(!i||i instanceof pe.Api.messages.MessagesNotModified||!i.messages)return;dc(i);const a=i.messages.map(Ms).filter(Boolean);return Si(i.messages),{messages:a}}async function rc(e){let{chat:t,ids:n}=e;const{id:s,accessHash:i}=t;await $a(new pe.Api.messages.SendScheduledMessages({peer:jn(s,i),id:n}))}function dc(e){Ke(e.users),Ke(e.chats),e.messages.forEach((e=>{qe(e)}))}async function cc(e){let{chat:t,threadId:n}=e;const s=await $a(new pe.Api.messages.Search({peer:jn(t.id,t.accessHash),filter:new pe.Api.InputMessagesFilterPinned,q:"",limit:y,topMsgId:Number(n)}),{abortControllerChatId:t.id,abortControllerThreadId:n});if(!s||s instanceof pe.Api.messages.MessagesNotModified||!s.messages)return;dc(s);const i=s.chats.map((e=>yn(e))).filter(Boolean),a=s.users.map(js).filter(Boolean),o=s.messages.map(Ms).filter(Boolean);return Si(s.messages),{messages:o,users:a,chats:i}}async function uc(e){let{chat:t,messageId:n}=e;const s=await $a(new pe.Api.messages.GetMessageReadParticipants({peer:jn(t.id,t.accessHash),msgId:n}));return s?s.reduce(((e,t)=>(e[t.userId.toString()]=t.date,e)),{}):void 0}async function lc(e){let{chat:t}=e;const n=await $a(new pe.Api.channels.GetSendAs({peer:jn(t.id,t.accessHash)}),{shouldIgnoreErrors:!0,abortControllerChatId:t.id});if(n)return Ke(n.users),Ke(n.chats),{users:n.users.map(js).filter(Boolean),chats:n.chats.map((e=>yn(e))).filter(Boolean),sendAs:n.peers.map(Dn)}}function pc(e){let{sendAs:t,chat:n}=e;return $a(new pe.Api.messages.SaveDefaultSendAs({peer:jn(n.id,n.accessHash),sendAs:jn(t.id,t.accessHash)}))}async function fc(e){let{chat:t}=e;const n=await $a(new pe.Api.channels.GetSponsoredMessages({channel:jn(t.id,t.accessHash)}));if(n&&!(n instanceof pe.Api.messages.SponsoredMessagesEmpty)&&n.messages.length)return dc(n),{messages:n.messages.map(Ps).filter(Boolean),users:n.users.map(js).filter(Boolean),chats:n.chats.map((e=>yn(e))).filter(Boolean)}}async function hc(e){let{chat:t,random:n}=e;await $a(new pe.Api.channels.ViewSponsoredMessage({channel:jn(t.id,t.accessHash),randomId:Ye(n)}))}function mc(e){let{chat:t,random:n}=e;return $a(new pe.Api.channels.ClickSponsoredMessage({channel:jn(t.id,t.accessHash),randomId:Ye(n)}))}async function gc(e){let{chat:t}=e;const n=await $a(new pe.Api.messages.ReadMentions({peer:jn(t.id,t.accessHash)}));n&&(ma(t,n),n.offset&&await gc({chat:t}))}async function Ac(e){let{chat:t}=e;const n=await $a(new pe.Api.messages.ReadReactions({peer:jn(t.id,t.accessHash)}));n&&(ma(t,n),n.offset&&await Ac({chat:t}))}async function yc(e){let{chat:t,...n}=e;const s=await $a(new pe.Api.messages.GetUnreadMentions({peer:jn(t.id,t.accessHash),limit:R,...n}));if(!s||s instanceof pe.Api.messages.MessagesNotModified||!s.messages)return;dc(s);const i=s.messages.map(Ms).filter(Boolean);return Si(s.messages),{messages:i,users:s.users.map(js).filter(Boolean),chats:s.chats.map((e=>yn(e))).filter(Boolean)}}async function wc(e){let{chat:t,...n}=e;const s=await $a(new pe.Api.messages.GetUnreadReactions({peer:jn(t.id,t.accessHash),limit:B,...n}));if(!s||s instanceof pe.Api.messages.MessagesNotModified||!s.messages)return;dc(s);const i=s.messages.map(Ms).filter(Boolean);return Si(s.messages),{messages:i,users:s.users.map(js).filter(Boolean),chats:s.chats.map((e=>yn(e))).filter(Boolean)}}async function Ic(e){let{chat:t,messageId:n}=e;const s=await $a(new pe.Api.messages.TranscribeAudio({msgId:n,peer:jn(t.id,t.accessHash)}));if(s)return Rd({"@type":"updateTranscribedAudio",isPending:s.pending,transcriptionId:s.transcriptionId.toString(),text:s.text}),s.transcriptionId.toString()}async function bc(e){let t;const n="chat"in e;if(n){const{chat:n,messageIds:s,toLanguageCode:i}=e;t=await $a(new pe.Api.messages.TranslateText({peer:jn(n.id,n.accessHash),id:s,toLang:i}))}else{const{text:n,toLanguageCode:s}=e;t=await $a(new pe.Api.messages.TranslateText({text:n.map((e=>hs(e))),toLang:s}))}if(!t)return;const s=t.result.map((e=>St(e)));return n&&Rd({"@type":"updateMessageTranslations",chatId:e.chat.id,messageIds:e.messageIds,translations:s,toLanguageCode:e.toLanguageCode}),s}function Sc(e,t){"updates"in t?t.updates.forEach((t=>{t instanceof pe.Api.UpdateMessageID?vc(e[t.randomId.toString()],t):Ka(t)})):Ka(t)}function vc(e,t){let n,s;if(t instanceof pe.Api.UpdateShortSentMessage||t instanceof pe.Api.UpdateMessageID?n=t:"updates"in t&&(n=t.updates.find((e=>e instanceof pe.Api.UpdateMessageID))),!n)return void Ka(t);n instanceof pe.Api.UpdateShortSentMessage&&(e.content.text&&n.entities&&(s={text:kt(e.content.text.text,n.entities)}),n.media&&(s={...s,...Dt(n.media,{peerId:On(e.chatId),id:n.id})}),qe(Yn(n.id,e.chatId,n)));const i="date"in n&&1e3*n.date<Date.now()+1e3*dt();Rd({"@type":e.isScheduled&&!i?"updateScheduledMessageSendSucceeded":"updateMessageSendSucceeded",chatId:e.chatId,localId:e.id,message:{...e,...s&&{content:{...e.content,...s}},id:n.id,sendingState:void 0,..."date"in n&&{date:n.date}}}),Ka(t)}async function Cc(e){let{chat:t,messageId:n}=e;const{id:s,accessHash:i}=t,a=jn(s,i),o=await $a(new pe.Api.messages.GetOutboxReadDate({peer:a,msgId:n}),{shouldThrow:!0});if(o)return{date:o.date}}async function Pc(){const e=await $a(new pe.Api.messages.GetQuickReplies({}));if(!e||e instanceof pe.Api.messages.QuickRepliesNotModified)return;dc(e);const t=e.messages.map(Ms).filter(Boolean);return Si(e.messages),{messages:t,chats:e.chats.map((e=>yn(e))).filter(Boolean),users:e.users.map(js).filter(Boolean),quickReplies:e.quickReplies.map(Gs)}}async function Mc(e){let{chat:t,shortcutId:n}=e;const s=await $a(new pe.Api.messages.GetQuickReplyMessages({shortcutId:n}));if(!s||s instanceof pe.Api.messages.MessagesNotModified)return;const i=s.messages.map((e=>e.id)),a=i.map($n),o=await $a(new pe.Api.messages.SendQuickReplyMessages({peer:jn(t.id,t.accessHash),shortcutId:n,id:i,randomId:a}),{shouldIgnoreUpdates:!0});if(o){if("updates"in o){const e=o.updates.filter((e=>!(e instanceof pe.Api.UpdateMessageID)));o.updates=e}Ka(o)}}async function Tc(e){let{id:t,chat:n,shouldIncludeThread:s,shouldIncludeGrouped:i}=e;const a=await $a(new pe.Api.channels.ExportMessageLink({channel:Vn(n.id,n.accessHash),id:t,thread:s||void 0,grouped:i||void 0}));return a?.link}let Bc,Rc,Uc,kc;async function Dc(e){let{id:t,accessHash:n}=e;const s=Vn(t,n);if(!(s instanceof pe.Api.InputUser))return;const i=await $a(new pe.Api.users.GetFullUser({id:s}));if(!i)return;zc(i),Ke(i.users),Ke(i.chats),i.fullUser.profilePhoto&&Le(i.fullUser.profilePhoto),i.fullUser.personalPhoto&&Le(i.fullUser.personalPhoto),i.fullUser.fallbackPhoto&&Le(i.fullUser.fallbackPhoto);const a=i.fullUser.botInfo;a?.descriptionPhoto&&Le(a.descriptionPhoto),a?.descriptionDocument instanceof pe.Api.Document&&(De.documents[a.descriptionDocument.id.toString()]=a.descriptionDocument),i.fullUser.businessIntro?.sticker instanceof pe.Api.Document&&(De.documents[i.fullUser.businessIntro.sticker.id.toString()]=i.fullUser.businessIntro.sticker);const o=Os(i),r=i.users.map(js).filter(Boolean),d=i.chats.map((e=>yn(e))).filter(Boolean),c=r.find((e=>{let{id:n}=e;return n===t}));return Bc({"@type":"updateUser",id:t,user:c,fullInfo:o}),{user:c,fullInfo:o,users:r,chats:d}}async function Ec(e,t,n){const s=await $a(new pe.Api.messages.GetCommonChats({userId:Vn(e,t),maxId:n?rs(n,qn(n)):void 0,limit:I}));if(!s)return;zc(s);const i=[],a=[];return s.chats.forEach((e=>{const t=yn(e);t&&(a.push(t),i.push(t.id))})),{chats:a,chatIds:i,isFullyLoaded:i.length<I}}async function xc(){const e=await $a(new pe.Api.help.GetNearestDc);return e?.country}async function Nc(){const e=await $a(new pe.Api.contacts.GetTopPeers({correspondents:!0}));if(!(e instanceof pe.Api.contacts.TopPeers))return;const t=e.users.map(js).filter((e=>Boolean(e)&&!e.isSelf));return{ids:t.map((e=>{let{id:t}=e;return t})),users:t}}async function Hc(){const e=await $a(new pe.Api.contacts.GetContacts({hash:Ie()("0")}));if(!e||e instanceof pe.Api.contacts.ContactsNotModified)return;Ke(e.users);const{users:t,userStatusesById:n}=Vs(e.users);return{users:t,userStatusesById:n,chats:e.users.map((e=>yn(e))).filter(Boolean)}}async function Gc(e){let{users:t}=e;const n=await $a(new pe.Api.users.GetUsers({id:t.map((e=>{let{id:t,accessHash:n}=e;return jn(t,n)}))}));if(n&&n.length)return Ke(n),Vs(n)}async function Fc(e){let{phone:t,firstName:n,lastName:s}=e;const i=await $a(new pe.Api.contacts.ImportContacts({contacts:[es({phone:t||"",firstName:n||"",lastName:s||""})]}));return i instanceof pe.Api.contacts.ImportedContacts&&i.users.length&&Je(i.users[0]),i?.imported.length?me(i.imported[0].userId,"user"):void 0}function _c(e){let{id:t,accessHash:n,phoneNumber:s="",firstName:i="",lastName:a="",shouldSharePhoneNumber:o=!1}=e;return $a(new pe.Api.contacts.AddContact({id:Vn(t,n),firstName:i,lastName:a,phone:s,...o&&{addPhonePrivacyException:o}}),{shouldReturnTrue:!0})}async function qc(e){let{id:t,accessHash:n}=e;const s=Vn(t,n);s instanceof pe.Api.InputUser&&await $a(new pe.Api.contacts.DeleteContacts({id:[s]}))&&Bc({"@type":"deleteContact",id:t})}async function Oc(e){let{peer:t,offset:n=0,limit:s=0}=e;const i="title"in t?t:void 0,a=i?void 0:t;if(a){const{id:e,accessHash:t}=a,i=await $a(new pe.Api.photos.GetUserPhotos({userId:Vn(e,t),limit:s,offset:n,maxId:Ie()("0")}));if(!i)return;zc(i);const o=i instanceof pe.Api.photos.PhotosSlice?i.count:i.photos.length,r=n+i.photos.length,d=r<o?r:void 0;return{count:o,photos:i.photos.filter((e=>e instanceof pe.Api.Photo)).map((e=>At(e))),users:i.users.map(js).filter(Boolean),nextOffsetId:d}}if(i?.isRestricted)return;const o=await Yd({chat:i,type:"profilePhoto",limit:s});if(!o)return;const{messages:r,users:d,totalCount:c,nextOffsetId:u}=o;return{count:c,photos:r.map((e=>e.content.action.photo)).filter(Boolean),users:d,nextOffsetId:u}}function jc(e){const{id:t,accessHash:n}=e;return $a(new pe.Api.messages.ReportSpam({peer:jn(t,n)}),{shouldReturnTrue:!0})}function Lc(e,t){return $a(new pe.Api.account.UpdateEmojiStatus({emojiStatus:fs(e,t)}),{shouldReturnTrue:!0})}function Vc(e){const t=e.map((e=>rs(e,"user")));return $a(new pe.Api.contacts.EditCloseFriends({id:t}),{shouldReturnTrue:!0})}function zc(e){"chats"in e&&Ke(e.chats),"photos"in e&&e.photos.forEach(Le),"users"in e&&Ke(e.users)}async function Wc(e){let{hash:t="0"}=e;const n=await $a(new pe.Api.messages.GetEmojiStickers({hash:Ie()(t)}));if(n&&!(n instanceof pe.Api.messages.AllStickersNotModified))return n.sets.forEach((e=>{(e.thumbs?.length||e.thumbDocumentId)&&(De.stickerSets[String(e.id)]=e)})),{hash:String(n.hash),sets:n.sets.map(Mt)}}async function Jc(e){let{hash:t="0"}=e;const n=await $a(new pe.Api.messages.GetAllStickers({hash:Ie()(t)}));if(n&&!(n instanceof pe.Api.messages.AllStickersNotModified))return n.sets.forEach((e=>{e.thumbs?.length&&(De.stickerSets[String(e.id)]=e)})),{hash:String(n.hash),sets:n.sets.map(Mt)}}async function Kc(e){let{hash:t="0"}=e;const n=await $a(new pe.Api.messages.GetRecentStickers({hash:Ie()(t)}));if(n&&!(n instanceof pe.Api.messages.RecentStickersNotModified))return{hash:String(n.hash),stickers:Rt(n.stickers.slice(0,N))}}async function $c(e){let{hash:t="0"}=e;const n=await $a(new pe.Api.messages.GetFavedStickers({hash:Ie()(t)}));if(n&&!(n instanceof pe.Api.messages.FavedStickersNotModified))return{hash:String(n.hash),stickers:Rt(n.stickers)}}async function Qc(e){let{hash:t="0"}=e;const n=await $a(new pe.Api.messages.GetFeaturedStickers({hash:Ie()(t)}));if(n&&!(n instanceof pe.Api.messages.FeaturedStickersNotModified))return{hash:String(n.hash),isPremium:Boolean(n.premium),sets:n.sets.map(Tt)}}async function Yc(){const e=await $a(new pe.Api.messages.GetFeaturedEmojiStickers({hash:Ie()(0)}));if(e&&!(e instanceof pe.Api.messages.FeaturedStickersNotModified))return e.sets.forEach((e=>{let{set:t}=e;t.thumbDocumentId&&(De.stickerSets[String(t.id)]=t)})),{isPremium:Boolean(e.premium),sets:e.sets.map(Tt)}}async function Zc(e){let{sticker:t,unfave:n}=e;const s=new pe.Api.messages.FaveSticker({id:Wn(t),unfave:n});await $a(s)&&Rc({"@type":"updateFavoriteStickers"})}function Xc(e){let{sticker:t}=e;return $a(new pe.Api.messages.SaveRecentSticker({id:Wn(t),unsave:!0}))}function eu(){return $a(new pe.Api.messages.ClearRecentStickers)}async function tu(e){let{stickerSetInfo:t}=e;if("isMissing"in t)return;const n=await $a(new pe.Api.messages.GetStickerSet({stickerset:"id"in t?zn(t.id,t.accessHash):(s=t.shortName,new pe.Api.InputStickerSetShortName({shortName:s}))}),{shouldThrow:!0});var s;return n instanceof pe.Api.messages.StickerSet?(De.stickerSets[String(n.set.id)]=n.set,{set:Mt(n.set),stickers:Rt(n.documents),packs:Bt(n.packs)}):void 0}async function nu(e){let{documentId:t}=e;if(!t.length)return;const n=await $a(new pe.Api.messages.GetCustomEmojiDocuments({documentId:t.map((e=>Ie()(e)))}));return n?Rt(n):void 0}async function su(){const e=await $a(new pe.Api.messages.GetStickerSet({stickerset:new pe.Api.InputStickerSetAnimatedEmoji}));if(e instanceof pe.Api.messages.StickerSet)return{set:Mt(e.set),stickers:Rt(e.documents)}}async function iu(){const e=await $a(new pe.Api.messages.GetStickerSet({stickerset:new pe.Api.InputStickerSetAnimatedEmojiAnimations}));if(e instanceof pe.Api.messages.StickerSet)return{set:Mt(e.set),stickers:Rt(e.documents)}}async function au(){const e=await $a(new pe.Api.messages.GetStickerSet({stickerset:new pe.Api.InputStickerSetEmojiGenericAnimations}));if(e instanceof pe.Api.messages.StickerSet)return{set:Mt(e.set),stickers:Rt(e.documents)}}async function ou(){const e=await $a(new pe.Api.messages.GetStickerSet({stickerset:new pe.Api.InputStickerSetPremiumGifts}));if(e instanceof pe.Api.messages.StickerSet)return{set:Mt(e.set),stickers:Rt(e.documents)}}async function ru(){const e=await $a(new pe.Api.messages.GetStickerSet({stickerset:new pe.Api.InputStickerSetEmojiDefaultTopicIcons}));if(e instanceof pe.Api.messages.StickerSet)return{set:Mt(e.set),stickers:Rt(e.documents)}}async function du(){const e=await $a(new pe.Api.messages.GetStickerSet({stickerset:new pe.Api.InputStickerSetEmojiDefaultStatuses}));if(e instanceof pe.Api.messages.StickerSet)return{set:Mt(e.set),stickers:Rt(e.documents)}}async function cu(e){let{query:t,hash:n="0"}=e;const s=await $a(new pe.Api.messages.SearchStickerSets({q:t,hash:Ie()(n)}));if(s&&!(s instanceof pe.Api.messages.FoundStickerSetsNotModified))return{hash:String(s.hash),sets:s.sets.map(Tt)}}async function uu(e){let{hash:t="0"}=e;const n=await $a(new pe.Api.messages.GetSavedGifs({hash:Ie()(t)}));if(n&&!(n instanceof pe.Api.messages.SavedGifsNotModified))return{hash:String(n.hash),gifs:yu(n.gifs)}}function lu(e){let{gif:t,shouldUnsave:n}=e;return $a(new pe.Api.messages.SaveGif({id:Wn(t),unsave:n}),{shouldReturnTrue:!0})}async function pu(e){let{stickerSetId:t,accessHash:n}=e;await $a(new pe.Api.messages.InstallStickerSet({stickerset:zn(t,n)}))&&Rc({"@type":"updateStickerSet",id:t,stickerSet:{installedDate:Date.now()}})}async function fu(e){let{stickerSetId:t,accessHash:n}=e;await $a(new pe.Api.messages.UninstallStickerSet({stickerset:zn(t,n)}))&&Rc({"@type":"updateStickerSet",id:t,stickerSet:{installedDate:void 0}})}async function hu(e){let{query:t,offset:n="",username:s=K}=e;if(!Uc){const e=await $a(new pe.Api.contacts.ResolveUsername({username:s}));if(!(e&&e.users[0]instanceof pe.Api.User))return;Uc=new pe.Api.InputUser({userId:e.peer.userId,accessHash:e.users[0].accessHash})}const i=await $a(new pe.Api.messages.GetInlineBotResults({bot:Uc,peer:new pe.Api.InputPeerEmpty,query:t,offset:n}));if(!i)return;const a=i.results.map((e=>{if(e instanceof pe.Api.BotInlineMediaResult)return e.document})).filter(Boolean);return{nextOffset:i.nextOffset,gifs:yu(a)}}async function mu(e){let{emoji:t,hash:n="0"}=e;const s=await $a(new pe.Api.messages.GetStickers({emoticon:t,hash:Ie()(n)}));if(s&&!(s instanceof pe.Api.messages.StickersNotModified))return{stickers:Rt(s.stickers),hash:String(s.hash)}}async function gu(e){let{language:t,fromVersion:n}=e;const s=await $a(new pe.Api.messages.GetEmojiKeywordsDifference({langCode:t,fromVersion:n}));if(s)return{language:s.langCode,version:s.version,keywords:s.keywords.reduce(((e,t)=>(e[t.keyword]=t.emoticons,e)),{})}}async function Au(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"0";const t=await $a(new pe.Api.account.GetRecentEmojiStatuses({hash:Ie()(e)}));if(!t||t instanceof pe.Api.account.EmojiStatusesNotModified)return;const n=t.statuses.slice(0,H).map(ye).filter(Boolean).map((e=>{let{documentId:t}=e;return t})),s=await nu({documentId:n});return{hash:String(t.hash),emojiStatuses:s}}function yu(e){return e.map((e=>{if(e instanceof pe.Api.Document){const t=Et(e);if(t)return De.documents[String(e.id)]=e,t}})).filter(Boolean)}const wu=new Set(["USERNAME_PURCHASE_AVAILABLE","USERNAME_INVALID"]);async function Iu(e){let{username:t}=e;try{return{result:await $a(new pe.Api.channels.CheckUsername({channel:new pe.Api.InputChannelEmpty,username:t}),{shouldThrow:!0}),error:void 0}}catch(e){const t=e.message;if(wu.has(t))return{result:!1,error:t};throw e}}async function bu(e){let{chat:t,username:n}=e;const s=await $a(new pe.Api.channels.UpdateUsername({channel:Vn(t.id,t.accessHash),username:n}));let i=n?[{username:n,isEditable:!0,isActive:!0}]:[];return t.usernames&&(i=i.concat(t.usernames.filter((e=>e.username&&!e.isEditable)))),s&&kc({"@type":"updateChat",id:t.id,chat:{usernames:i.length?i:void 0}}),s}async function Su(e){let{chat:t}=e;const n=await $a(new pe.Api.channels.DeactivateAllUsernames({channel:Vn(t.id,t.accessHash)}));if(n){const e=t.usernames?t.usernames.map((e=>({...e,isActive:!1}))).filter((e=>e.username)):void 0;kc({"@type":"updateChat",id:t.id,chat:{usernames:e}})}return n}async function vu(e){let{chat:t,usageLimit:n,expireDate:s}=e;const i=await $a(new pe.Api.messages.ExportChatInvite({peer:jn(t.id,t.accessHash),usageLimit:n,expireDate:s}));if(i instanceof pe.Api.ChatInviteExported)return kc({"@type":"updateChatFullInfo",id:t.id,fullInfo:{inviteLink:i.link}}),i.link}async function Cu(e){let{peer:t,admin:n,limit:s=0,isRevoked:i}=e;const a=await $a(new pe.Api.messages.GetExportedChatInvites({peer:jn(t.id,t.accessHash),adminId:Vn(n.id,n.accessHash),limit:s,revoked:i||void 0}),{abortControllerChatId:t.id});if(a)return Ke(a.users),{invites:a.invites.filter((e=>e instanceof pe.Api.ChatInviteExported)).map(Rn),users:a.users.map(js).filter(Boolean)}}async function Pu(e){let{peer:t,isRevoked:n,link:s,expireDate:i,usageLimit:a,isRequestNeeded:o,title:r}=e;const d=await $a(new pe.Api.messages.EditExportedChatInvite({link:s,peer:jn(t.id,t.accessHash),expireDate:i,usageLimit:o?void 0:a,requestNeeded:o,title:r,revoked:n||void 0}));if(d){if(Ke(d.users),d instanceof pe.Api.messages.ExportedChatInvite&&d.invite instanceof pe.Api.ChatInviteExported){const e=Rn(d.invite);return{oldInvite:e,newInvite:e,users:d.users.map(js).filter(Boolean)}}if(d instanceof pe.Api.messages.ExportedChatInviteReplaced&&d.invite instanceof pe.Api.ChatInviteExported&&d.newInvite instanceof pe.Api.ChatInviteExported)return{oldInvite:Rn(d.invite),newInvite:Rn(d.newInvite),users:d.users.map(js).filter(Boolean)}}}async function Mu(e){let{peer:t,expireDate:n,usageLimit:s,isRequestNeeded:i,title:a}=e;const o=await $a(new pe.Api.messages.ExportChatInvite({peer:jn(t.id,t.accessHash),expireDate:n,usageLimit:i?void 0:s,requestNeeded:i||void 0,title:a}));if(o instanceof pe.Api.ChatInviteExported)return Rn(o)}async function Tu(e){let{peer:t,link:n}=e;return await $a(new pe.Api.messages.DeleteExportedChatInvite({peer:jn(t.id,t.accessHash),link:n}))}async function Bu(e){let{peer:t,admin:n}=e;return await $a(new pe.Api.messages.DeleteRevokedExportedChatInvites({peer:jn(t.id,t.accessHash),adminId:Vn(n.id,n.accessHash)}))}async function Ru(e){let{peer:t,link:n,offsetDate:s=0,offsetUser:i,limit:a=0,isRequested:o}=e;const r=await $a(new pe.Api.messages.GetChatInviteImporters({peer:jn(t.id,t.accessHash),link:n,offsetDate:s,offsetUser:i?Vn(i.id,i.accessHash):new pe.Api.InputUserEmpty,limit:a,requested:o||void 0}),{abortControllerChatId:t.id});if(!r)return;const d=r.users.map((e=>js(e))).filter(Boolean);return Ke(r.users),{importers:r.importers.map((e=>function(e){const{userId:t,date:n,about:s,requested:i,viaChatlist:a}=e;return{userId:me(t,"user"),date:n,about:s,isRequested:i,isFromChatList:a}}(e))),users:Xe(d,"id")}}function Uu(e){let{peer:t,user:n,isApproved:s}=e;return $a(new pe.Api.messages.HideChatJoinRequest({peer:jn(t.id,t.accessHash),userId:Vn(n.id,n.accessHash),approved:s||void 0}),{shouldReturnTrue:!0})}function ku(e){let{peer:t,isApproved:n,link:s}=e;return $a(new pe.Api.messages.HideAllChatJoinRequests({peer:jn(t.id,t.accessHash),approved:n||void 0,link:s}),{shouldReturnTrue:!0})}function Du(e){const{id:t,accessHash:n}=e;return $a(new pe.Api.messages.HidePeerSettingsBar({peer:jn(t,n)}))}var Eu=n(48287).hp;function xu(e){const{emojies_sounds:t}=e;return t?Object.keys(t).reduce(((e,n)=>{const s=t[n];return De.documents[s.id]=new pe.Api.Document({id:Ie()(s.id),accessHash:Ie()(s.access_hash),dcId:1,mimeType:"audio/ogg",fileReference:Eu.alloc(0),size:Ie()(0)}),e[n]=s.id,e}),{}):{}}function Nu(e,t,n){return[e[`${t}_default`]||se[n][0],e[`${t}_premium`]||se[n][1]]}const Hu=["ar","fa","id","ko","uz","en"];function Gu(e){let{firstName:t,lastName:n,about:s}=e;return $a(new pe.Api.account.UpdateProfile({firstName:t||"",lastName:n||"",about:s||""}),{shouldReturnTrue:!0})}async function Fu(e){try{return{result:await $a(new pe.Api.account.CheckUsername({username:e}),{shouldThrow:!0}),error:void 0}}catch(e){const t=e.message;if(wu.has(t))return{result:!1,error:t};throw e}}function _u(e){return $a(new pe.Api.account.UpdateUsername({username:e}),{shouldReturnTrue:!0})}async function qu(e,t){const n=e?Xn(e):new pe.Api.InputPhotoEmpty,s=await $a(new pe.Api.photos.UpdateProfilePhoto({id:n,...t?{fallback:!0}:void 0}));if(s)return Ke(s.users),s.photo instanceof pe.Api.Photo?(Le(s.photo),{users:s.users.map(js).filter(Boolean),photo:At(s.photo)}):void 0}async function Ou(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4?arguments[4]:void 0;const a=await Za(e),o=await $a(new pe.Api.photos.UploadProfilePhoto({...i?{bot:jn(i.id,i.accessHash)}:void 0,...n?{video:a,videoStartTs:s}:{file:a},...t?{fallback:!0}:void 0}));if(o)return Ke(o.users),o.photo instanceof pe.Api.Photo?(Le(o.photo),{users:o.users.map(js).filter(Boolean),photo:At(o.photo)}):void 0}async function ju(e){let{file:t,isSuggest:n,user:s}=e;const i=t?await Za(t):void 0,a=await $a(new pe.Api.photos.UploadContactProfilePhoto({userId:Vn(s.id,s.accessHash),file:i,...n?{suggest:!0}:{save:!0}}));if(!a)return;Ke(a.users);const o=a.users.map(js).filter(Boolean);return a.photo instanceof pe.Api.Photo?(Le(a.photo),{users:o,photo:At(a.photo)}):{users:o,photo:void 0}}async function Lu(e){const t=e.map(Xn).filter(Boolean),n=await $a(new pe.Api.photos.DeletePhotos({id:t}),{shouldReturnTrue:!0});return n&&e.forEach((e=>{delete De.photos[e.id]})),n}async function Vu(){const e=await $a(new pe.Api.account.GetWallPapers({hash:Ie()("0")}));if(!e||e instanceof pe.Api.account.WallPapersNotModified)return;const t=e.wallpapers.filter((e=>e instanceof pe.Api.WallPaper&&e.document instanceof pe.Api.Document&&!e.pattern&&"application/x-tgwallpattern"!==e.document.mimeType));return t.forEach((e=>{De.documents[String(e.document.id)]=e.document})),{wallpapers:t.map(Ws).filter(Boolean)}}async function zu(e){const t=await Za(e),n=await $a(new pe.Api.account.UploadWallPaper({file:t,mimeType:e.type,settings:new pe.Api.WallPaperSettings}));if(!(n&&n instanceof pe.Api.WallPaper))return;const s=Ws(n);return s?(De.documents[String(n.document.id)]=n.document,{wallpaper:s}):void 0}async function Wu(e){let{isOnlyStories:t}=e;const n=await $a(new pe.Api.contacts.GetBlocked({myStoriesFrom:t,limit:w}));if(n)return Sl(n),{users:n.users.map(js).filter(Boolean),chats:n.chats.map((e=>yn(e))).filter(Boolean),blockedIds:n.blocked.map((e=>ge(e.peerId))),totalCount:n instanceof pe.Api.contacts.BlockedSlice?n.count:n.blocked.length}}function Ju(e){let{user:t,isOnlyStories:n}=e;return $a(new pe.Api.contacts.Block({id:jn(t.id,t.accessHash),myStoriesFrom:n}))}function Ku(e){let{user:t,isOnlyStories:n}=e;return $a(new pe.Api.contacts.Unblock({id:jn(t.id,t.accessHash),myStoriesFrom:n}))}async function $u(){const e=await $a(new pe.Api.account.GetAuthorizations);if(e)return{authorizations:Xe(e.authorizations.map(Js),"hash"),ttlDays:e.authorizationTtlDays}}function Qu(e){return $a(new pe.Api.account.ResetAuthorization({hash:Ie()(e)}))}function Yu(){return $a(new pe.Api.auth.ResetAuthorizations)}async function Zu(){const e=await $a(new pe.Api.account.GetWebAuthorizations);if(e)return Ke(e.users),{users:e.users.map(js).filter(Boolean),webAuthorizations:Xe(e.authorizations.map(Ks),"hash")}}function Xu(e){return $a(new pe.Api.account.ResetWebAuthorization({hash:Ie()(e)}))}function el(){return $a(new pe.Api.account.ResetWebAuthorizations)}async function tl(){const e=await $a(new pe.Api.account.GetNotifyExceptions({compareSound:!0}),{shouldIgnoreUpdates:!0});if(e instanceof pe.Api.Updates||e instanceof pe.Api.UpdatesCombined)return Sl(e),e.updates.reduce(((e,t)=>t instanceof pe.Api.UpdateNotifySettings&&t.peer instanceof pe.Api.NotifyPeer?(e.push($s(t.notifySettings,t.peer.peer)),e):e),[])}async function nl(){const[e,t,n,s]=await Promise.all([$a(new pe.Api.account.GetContactSignUpNotification),$a(new pe.Api.account.GetNotifySettings({peer:new pe.Api.InputNotifyUsers})),$a(new pe.Api.account.GetNotifySettings({peer:new pe.Api.InputNotifyChats})),$a(new pe.Api.account.GetNotifySettings({peer:new pe.Api.InputNotifyBroadcasts}))]);if(!t||!n||!s)return!1;const{silent:i,muteUntil:a,showPreviews:o}=t,{silent:r,muteUntil:d,showPreviews:c}=n,{silent:u,muteUntil:l,showPreviews:p}=s;return{hasContactJoinedNotifications:!e,hasPrivateChatsNotifications:!(i||"number"==typeof a&&ct()<a),hasPrivateChatsMessagePreview:o,hasGroupNotifications:!(r||"number"==typeof d&&ct()<d),hasGroupMessagePreview:c,hasBroadcastNotifications:!(u||"number"==typeof l&&ct()<l),hasBroadcastMessagePreview:p}}function sl(e){return $a(new pe.Api.account.SetContactSignUpNotification({silent:e}))}function il(e,t){let n,{isSilent:s,shouldShowPreviews:i}=t;n="contact"===e?new pe.Api.InputNotifyUsers:"group"===e?new pe.Api.InputNotifyChats:new pe.Api.InputNotifyBroadcasts;const a={showPreviews:i,silent:s,muteUntil:s?D:0};return $a(new pe.Api.account.UpdateNotifySettings({peer:n,settings:new pe.Api.InputPeerNotifySettings(a)}))}async function al(e){let{langPack:t,langCode:n}=e;const s=await $a(new pe.Api.langpack.GetLangPack({langPack:t,langCode:n}));if(!s)return;const{strings:i,keysToRemove:a}=ti(s.strings);return{version:s.version,strings:i,keysToRemove:a}}async function ol(e){let{langPack:t,langCode:n,fromVersion:s}=e;const i=await $a(new pe.Api.langpack.GetDifference({langPack:t,langCode:n,fromVersion:s}));if(!i)return;const{strings:a,keysToRemove:o}=ti(i.strings);return{version:i.version,strings:a,keysToRemove:o}}async function rl(){const e=await $a(new pe.Api.langpack.GetLanguages({langPack:Z}));if(e)return e.map(ni)}async function dl(e){let{langPack:t,langCode:n}=e;const s=await $a(new pe.Api.langpack.GetLanguage({langPack:t,langCode:n}));if(s)return ni(s)}async function cl(e){let{sourceLangPacks:t,langCode:n}=e;const s=(await Promise.all(t.map((e=>$a(new pe.Api.langpack.GetLangPack({langPack:e,langCode:Hu.includes(n)?`${n}-raw`:n})))))).filter(Boolean).map(Xs);if(s.length)return{langPack:Object.assign({},...s.reverse())}}async function ul(e){let{langPack:t,langCode:n,keys:s}=e;const i=await $a(new pe.Api.langpack.GetStrings({langPack:t,langCode:Hu.includes(n)?`${n}-raw`:n,keys:s}));if(i)return i.map(ei)}async function ll(e){const t=is(e),n=await $a(new pe.Api.account.GetPrivacy({key:t}));if(n)return Sl(n),{users:n.users.map(js).filter(Boolean),rules:bt(n.rules)}}function pl(e){const t=Oa.session.getAuthKey().getKey();return $a(new pe.Api.account.RegisterDevice({tokenType:10,secret:t,appSandbox:!1,otherUids:[],token:e}))}function fl(e){return $a(new pe.Api.account.UnregisterDevice({tokenType:10,otherUids:[],token:e}))}async function hl(e,t){const n=is(e),s=As(t),i=await $a(new pe.Api.account.SetPrivacy({key:n,rules:s}));if(i)return Sl(i),{users:i.users.map(js).filter(Boolean),rules:bt(i.rules)}}async function ml(e){await $a(new pe.Api.account.UpdateStatus({offline:!e}))}async function gl(){const e=await $a(new pe.Api.account.GetContentSettings);if(e)return{isSensitiveEnabled:Boolean(e.sensitiveEnabled),canChangeSensitive:Boolean(e.sensitiveCanChange)}}function Al(e){return $a(new pe.Api.account.SetContentSettings({sensitiveEnabled:e||void 0}))}async function yl(e){const t=await $a(new pe.Api.help.GetAppConfig({hash:e}));if(!t||t instanceof pe.Api.help.AppConfigNotModified)return;const{config:n,hash:s}=t;return function(e,t){const n=Ys(e);return{emojiSounds:xu(n),seenByMaxChatMembers:n.chat_read_mark_size_threshold,seenByExpiresAt:n.chat_read_mark_expire_period,readDateExpiresAt:n.pm_read_date_expire_period,autologinDomains:n.autologin_domains||[],urlAuthDomains:n.url_auth_domains||[],maxUniqueReactions:n.reactions_uniq_max??ne,premiumBotUsername:n.premium_bot_username,premiumInvoiceSlug:n.premium_invoice_slug,premiumPromoOrder:n.premium_promo_order,isPremiumPurchaseBlocked:n.premium_purchase_blocked,isGiveawayGiftsPurchaseAvailable:n.giveaway_gifts_purchase_available,defaultEmojiStatusesStickerSetId:n.default_emoji_statuses_stickerset_id,topicsPinnedLimit:n.topics_pinned_limit,maxUserReactionsDefault:n.reactions_user_max_default,maxUserReactionsPremium:n.reactions_user_max_premium,hiddenMembersMinCount:n.hidden_members_group_size_min,giveawayAddPeersMax:n.giveaway_add_peers_max,giveawayBoostsPerPremium:n.giveaway_boosts_per_premium,giveawayCountriesMax:n.giveaway_countries_max,boostsPerSentGift:n.boosts_per_sent_gift,canDisplayAutoarchiveSetting:n.autoarchive_setting_available,limits:{uploadMaxFileparts:Nu(n,"upload_max_fileparts","uploadMaxFileparts"),stickersFaved:Nu(n,"stickers_faved_limit","stickersFaved"),savedGifs:Nu(n,"saved_gifs_limit","savedGifs"),dialogFiltersChats:Nu(n,"dialog_filters_chats_limit","dialogFiltersChats"),dialogFilters:Nu(n,"dialog_filters_limit","dialogFilters"),dialogFolderPinned:Nu(n,"dialogs_pinned_limit","dialogFolderPinned"),captionLength:Nu(n,"caption_length_limit","captionLength"),channels:Nu(n,"channels_limit","channels"),channelsPublic:Nu(n,"channels_public_limit","channelsPublic"),aboutLength:Nu(n,"about_length_limit","aboutLength"),chatlistInvites:Nu(n,"chatlist_invites_limit","chatlistInvites"),chatlistJoined:Nu(n,"chatlist_joined_limit","chatlistJoined"),recommendedChannels:Nu(n,"recommended_channels_limit","recommendedChannels"),savedDialogsPinned:Nu(n,"saved_dialogs_pinned_limit","savedDialogsPinned")},hash:t,areStoriesHidden:n.stories_all_hidden,storyExpirePeriod:n.story_expire_period??ee,storyViewersExpirePeriod:n.story_viewers_expire_period??te,storyChangelogUserId:n.stories_changelog_user_id?.toString()??W,maxPinnedStoriesCount:n.stories_pinned_to_top_count_max,groupTranscribeLevelMin:n.group_transcribe_level_min,canLimitNewMessagesWithoutPremium:n.new_noncontact_peers_require_premium_without_ownpremium,bandwidthPremiumNotifyPeriod:n.upload_premium_speedup_notify_period,bandwidthPremiumUploadSpeedup:n.upload_premium_speedup_upload,bandwidthPremiumDownloadSpeedup:n.upload_premium_speedup_download,channelRestrictAdsLevelMin:n.channel_restrict_sponsored_level_min}}(n,s)}async function wl(){const e=await $a(new pe.Api.help.GetConfig);if(e)return function(e){const t=e.reactionsDefault&&cn(e.reactionsDefault);return{expiresAt:e.expires,gifSearchUsername:e.gifSearchUsername,defaultReaction:t,maxGroupSize:e.chatSizeMax,autologinToken:e.autologinToken}}(e)}async function Il(e){const t=await $a(new pe.Api.help.GetPeerColors({hash:e}));if(!t)return;const n=function(e){if(e instanceof pe.Api.help.PeerColors)return et(e.colors,(e=>[e.colorId,{isHidden:e.hidden,colors:e.colors&&si(e.colors),darkColors:e.darkColors&&si(e.darkColors)}]))}(t);return n?{colors:n,hash:t instanceof pe.Api.help.PeerColors?t.hash:void 0}:void 0}async function bl(e){const t=await $a(new pe.Api.help.GetTimezonesList({hash:e}));if(t&&!(t instanceof pe.Api.help.TimezonesListNotModified))return{timezones:t.timezones.map(ii),hash:t.hash}}function Sl(e){Ke(e.users),Ke(e.chats)}async function vl(e){let{langCode:t="en"}=e;const n=await $a(new pe.Api.help.GetCountriesList({langCode:t}));if(n instanceof pe.Api.help.CountriesList)return function(e){const t=e.filter((e=>{let{hidden:t}=e;return!t}));return{phoneCodes:t.map((e=>e.countryCodes.map((t=>Qs(e,t))))).flat().sort(((e,t)=>e.name?e.name.localeCompare(t.name):e.defaultName.localeCompare(t.defaultName))),general:t.map((e=>Qs(e,e.countryCodes[0]))).sort(((e,t)=>e.name?e.name.localeCompare(t.name):e.defaultName.localeCompare(t.defaultName)))}}(n.countries)}async function Cl(){const e=await $a(new pe.Api.account.GetGlobalPrivacySettings);if(e)return{shouldArchiveAndMuteNewNonContact:Boolean(e.archiveAndMuteNewNoncontactPeers),shouldHideReadMarks:Boolean(e.hideReadMarks),shouldNewNonContactPeersRequirePremium:Boolean(e.newNoncontactPeersRequirePremium)}}async function Pl(e){let{shouldArchiveAndMuteNewNonContact:t,shouldHideReadMarks:n,shouldNewNonContactPeersRequirePremium:s}=e;const i=await $a(new pe.Api.account.SetGlobalPrivacySettings({settings:new pe.Api.GlobalPrivacySettings({...t&&{archiveAndMuteNewNoncontactPeers:!0},...n&&{hideReadMarks:!0},...s&&{newNoncontactPeersRequirePremium:!0}})}));if(i)return{shouldArchiveAndMuteNewNonContact:Boolean(i.archiveAndMuteNewNoncontactPeers),shouldHideReadMarks:Boolean(i.hideReadMarks),shouldNewNonContactPeersRequirePremium:Boolean(i.newNoncontactPeersRequirePremium)}}function Ml(e){let{chatId:t,accessHash:n,username:s,isActive:i}=e;return $a(t?new pe.Api.channels.ToggleUsername({channel:Vn(t,n),username:s,active:i}):new pe.Api.account.ToggleUsername({username:s,active:i}))}function Tl(e){let{chatId:t,accessHash:n,usernames:s}=e;return $a(t?new pe.Api.channels.ReorderUsernames({channel:Vn(t,n),order:s}):new pe.Api.account.ReorderUsernames({order:s}))}const Bl={EMAIL_UNCONFIRMED:"Email unconfirmed",EMAIL_HASH_EXPIRED:"Email hash expired",NEW_SALT_INVALID:"The new salt is invalid",NEW_SETTINGS_INVALID:"The new password settings are invalid",CODE_INVALID:"Invalid Code",PASSWORD_HASH_INVALID:"Invalid Password"},Rl={};let Ul;async function kl(){const e=await $a(new pe.Api.account.GetPassword);if(!e)return;const{hint:t,hasPassword:n}=e;return{hint:t,hasPassword:n}}function Dl(e){return Ul({"@type":"updateTwoFaStateWaitCode",length:e}),new Promise(((e,t)=>{Rl.resolve=e,Rl.reject=t}))}async function El(e){try{return await Xa({isCheckPassword:!0,currentPassword:e}),!0}catch(e){return Fl(e),!1}}async function xl(e){try{return await Xa({currentPassword:e}),!0}catch(e){return Fl(e),!1}}async function Nl(e,t,n,s){try{return await Xa({currentPassword:e,newPassword:t,hint:n,email:s,emailCodeCallback:Dl,onEmailCodeError:Fl}),!0}catch(e){return Fl(e),!1}}async function Hl(e,t){try{return await Xa({currentPassword:e,newPassword:e,email:t,emailCodeCallback:Dl,onEmailCodeError:Fl}),!0}catch(e){return Fl(e),!1}}function Gl(e){Rl.resolve(e)}function Fl(e){let t;if(e instanceof pe.errors.FloodWaitError){const n=Math.ceil(Number(e.seconds)/60/60);t="Too many attempts. Try again in "+(n>1?`${n} hours`:"an hour")}else t=Bl[e.message];t||(t="Unexpected Error",d&&console.error(e)),Ul({"@type":"updateTwoFaError",message:t})}function _l(e){let{chat:t,emoticon:n}=e;return $a(new pe.Api.messages.SetTyping({peer:jn(t.id,t.accessHash),action:new pe.Api.SendMessageEmojiInteractionSeen({emoticon:n})}),{abortControllerChatId:t.id})}function ql(e){let{chat:t,emoticon:n,messageId:s,timestamps:i}=e;return $a(new pe.Api.messages.SetTyping({peer:jn(t.id,t.accessHash),action:new pe.Api.SendMessageEmojiInteraction({emoticon:n,msgId:s,interaction:new pe.Api.DataJSON({data:JSON.stringify({v:1,a:i.map((e=>({t:e,i:1})))})})})}),{abortControllerChatId:t.id})}async function Ol(){const e=await $a(new pe.Api.messages.GetAvailableReactions({}));if(e&&!(e instanceof pe.Api.messages.AvailableReactionsNotModified))return e.reactions.forEach((e=>{e.staticIcon instanceof pe.Api.Document&&(De.documents[String(e.staticIcon.id)]=e.staticIcon),e.selectAnimation instanceof pe.Api.Document&&(De.documents[String(e.selectAnimation.id)]=e.selectAnimation),e.aroundAnimation instanceof pe.Api.Document&&(De.documents[String(e.aroundAnimation.id)]=e.aroundAnimation),e.appearAnimation instanceof pe.Api.Document&&(De.documents[String(e.appearAnimation.id)]=e.appearAnimation),e.centerIcon instanceof pe.Api.Document&&(De.documents[String(e.centerIcon.id)]=e.centerIcon)})),e.reactions.map(ln)}async function jl(){const e=await $a(new pe.Api.messages.GetAvailableEffects({}));if(!e||e instanceof pe.Api.messages.AvailableEffectsNotModified)return;const t=new Map(e.documents.map((e=>[String(e.id),e])));e.documents.forEach((e=>{e instanceof pe.Api.Document&&(De.documents[String(e.id)]=e)}));const n=e.effects.map(pn),s=[],i=[];for(const e of n)if(e.effectAnimationId){const n=t.get(e.effectStickerId),s=n&&Pt(n,!1,e.isPremium);s&&i.push(s)}else{const t=Pt(De.documents[e.effectStickerId]);t&&s.push(t)}return{effects:n,emojis:i,stickers:s}}function Ll(e){let{chat:t,messageId:n,reactions:s,shouldAddToRecent:i}=e;return $a(new pe.Api.messages.SendReaction({reaction:s?.map((e=>ps(e))),peer:jn(t.id,t.accessHash),msgId:n,...i&&{addToRecent:!0}}),{shouldReturnTrue:!0,shouldThrow:!0})}function Vl(e){let{ids:t,chat:n}=e;ot(t,v).forEach((e=>{$a(new pe.Api.messages.GetMessagesReactions({id:e,peer:jn(n.id,n.accessHash)}),{shouldReturnTrue:!0,abortControllerChatId:n.id})}))}async function zl(e){let{chat:t,messageId:n,reaction:s,offset:i}=e;const a=await $a(new pe.Api.messages.GetMessageReactionsList({peer:jn(t.id,t.accessHash),id:n,...s&&{reaction:ps(s)},limit:T,...i&&{offset:i}}));if(!a)return;Ke(a.users),Ke(a.chats);const{nextOffset:o,reactions:r,count:d}=a;return{users:a.users.map(js).filter(Boolean),chats:a.chats.map((e=>yn(e))).filter(Boolean),nextOffset:o,reactions:r.map(dn).filter(Boolean),count:d}}function Wl(e){let{reaction:t}=e;return $a(new pe.Api.messages.SetDefaultReaction({reaction:ps(t)}))}async function Jl(e){let{hash:t="0"}=e;const n=await $a(new pe.Api.messages.GetTopReactions({limit:P,hash:Ie()(t)}));if(n&&!(n instanceof pe.Api.messages.ReactionsNotModified))return{hash:String(n.hash),reactions:n.reactions.map(cn).filter(Boolean)}}async function Kl(e){let{hash:t="0"}=e;const n=await $a(new pe.Api.messages.GetRecentReactions({limit:M,hash:Ie()(t)}));if(n&&!(n instanceof pe.Api.messages.ReactionsNotModified))return{hash:String(n.hash),reactions:n.reactions.map(cn).filter(Boolean)}}function $l(){return $a(new pe.Api.messages.ClearRecentReactions)}async function Ql(e){let{hash:t="0"}=e;const n=await $a(new pe.Api.messages.GetDefaultTagReactions({hash:Ie()(t)}));if(n&&!(n instanceof pe.Api.messages.ReactionsNotModified))return{hash:String(n.hash),reactions:n.reactions.map(cn).filter(Boolean)}}async function Yl(e){let{hash:t="0"}=e;const n=await $a(new pe.Api.messages.GetSavedReactionTags({hash:Ie()(t)}));if(n&&!(n instanceof pe.Api.messages.SavedReactionTagsNotModified))return{hash:String(n.hash),tags:n.tags.map(un).filter(Boolean)}}function Zl(e){let{reaction:t,title:n}=e;return $a(new pe.Api.messages.UpdateSavedReactionTag({reaction:ps(t),title:n}),{shouldReturnTrue:!0})}function Xl(e){return e instanceof pe.Api.PostInteractionCountersMessage?{msgId:e.msgId,forwardsCount:e.forwards,viewsCount:e.views,reactionsCount:e.reactions}:e instanceof pe.Api.PostInteractionCountersStory?{storyId:e.storyId,reactionsCount:e.reactions,viewsCount:e.views,forwardsCount:e.forwards}:void 0}function ep(e){return{viewsGraph:sp(e.viewsGraph),reactionsGraph:sp(e.reactionsByEmotionGraph)}}function tp(e){if(e&&"messages"in e)return e.messages.map((t=>dp(t,e.chats)))}function np(e){if(e&&"forwards"in e)return e.forwards.map((t=>{if(t instanceof pe.Api.PublicForwardMessage)return dp(t.message,e.chats);const{peer:n,story:s}=t;return{peerId:ge(n),storyId:s.id,viewsCount:s.views?.viewsCount||0,reactionsCount:s.views?.reactionsCount||0}}))}function sp(e,t){if(e.error)return;const n=JSON.parse(e.json.data),[s,...i]=n.columns,a=n.y_scaled;return{type:t?"area":n.types.y0,zoomToken:e.zoomToken,labelFormatter:n.xTickFormatter,tooltipFormatter:n.xTooltipFormatter,labels:s.slice(1),hideCaption:!n.subchart.show,hasSecondYAxis:a,isStacked:n.stacked&&!a,isPercentage:t,datasets:i.map((e=>{const t=e[0];return{name:n.names[t],color:(s=n.colors[t],s.substring(s.indexOf("#"))),values:e.slice(1)};var s})),...ip(n.subchart.defaultZoom,s.slice(1))}}function ip(e,t){const[n,s]=e;let i=0,a=t.length-1;return t.forEach(((e,t)=>{!i&&e>=n&&(i=t),!a&&e>=s&&(a=t)})),{minimapRange:{begin:Math.max(0,i/(t.length-1)),end:Math.min(1,a/(t.length-1))},labelFromIndex:i,labelToIndex:a}}function ap(e){let{current:t,previous:n}=e;const s=t-n;return{current:t,change:s,...n&&{percentage:(s?Math.abs(s)/n*100:0).toFixed(2)}}}function op(e){return{part:e.part,total:e.total,percentage:(e.part/e.total*100).toFixed(2)}}function rp(e){return{id:e.id.toString(),date:e.date,months:e.months,quantity:e.quantity}}function dp(e,t){const n=ge(e.peerId),s=t.find((e=>me(e.id,"channel")===n)),i=s&&"photo"in s&&s.photo instanceof pe.Api.Photo?s.photo:void 0;return{messageId:e.id,views:e.views,title:s.title,chat:{id:n,type:"chatTypeChannel",title:s.title,usernames:It(s),avatarPhotoId:i&&Ct(i),hasVideoAvatar:Boolean(i?.videoSizes)}}}async function cp(e){let{chat:t,dcId:n}=e;const s=await $a(new pe.Api.stats.GetBroadcastStats({channel:Vn(t.id,t.accessHash)}),{dcId:n});var i;if(s)return{stats:(i=s,{growthGraph:sp(i.growthGraph),followersGraph:sp(i.followersGraph),muteGraph:sp(i.muteGraph),topHoursGraph:sp(i.topHoursGraph),languagesGraph:i.languagesGraph.token,viewsBySourceGraph:i.viewsBySourceGraph.token,newFollowersBySourceGraph:i.newFollowersBySourceGraph.token,interactionsGraph:i.interactionsGraph.token,reactionsByEmotionGraph:i.reactionsByEmotionGraph.token,storyInteractionsGraph:i.storyInteractionsGraph.token,storyReactionsByEmotionGraph:i.storyReactionsByEmotionGraph.token,followers:ap(i.followers),viewsPerPost:ap(i.viewsPerPost),sharesPerPost:ap(i.sharesPerPost),enabledNotifications:op(i.enabledNotifications),reactionsPerPost:ap(i.reactionsPerPost),viewsPerStory:ap(i.viewsPerStory),sharesPerStory:ap(i.sharesPerStory),reactionsPerStory:ap(i.reactionsPerStory),recentPosts:i.recentPostsInteractions.map(Xl).filter(Boolean)}),users:[]}}async function up(e){let{chat:t,dcId:n}=e;const s=await $a(new pe.Api.stats.GetMegagroupStats({channel:Vn(t.id,t.accessHash)}),{dcId:n});var i,a;if(s)return Ke(s.users),{users:s.users.map(js).filter(Boolean),stats:(i=s,{growthGraph:sp(i.growthGraph),membersGraph:sp(i.membersGraph),topHoursGraph:sp(i.topHoursGraph),languagesGraph:i.languagesGraph.token,messagesGraph:i.messagesGraph.token,actionsGraph:i.actionsGraph.token,period:(a=i.period,{maxDate:a.maxDate,minDate:a.minDate}),members:ap(i.members),viewers:ap(i.viewers),messages:ap(i.messages),posters:ap(i.posters)})}}async function lp(e){let{chat:t,messageId:n,dcId:s}=e;const i=await $a(new pe.Api.stats.GetMessageStats({channel:Vn(t.id,t.accessHash),msgId:n}),{dcId:s});if(i)return ep(i)}async function pp(e){let{chat:t,messageId:n,dcId:s,offset:i}=e;const a=await $a(new pe.Api.stats.GetMessagePublicForwards({channel:Vn(t.id,t.accessHash),msgId:n,offset:i,limit:C}),{dcId:s});if(a)return Ke(a.chats),Ke(a.users),{forwards:tp(a),count:a.count,nextOffset:a.nextOffset,chats:a.chats.map((e=>yn(e))).filter(Boolean),users:a.users.map(js).filter(Boolean)}}async function fp(e){let{token:t,x:n,isPercentage:s,dcId:i}=e;const a=await $a(new pe.Api.stats.LoadAsyncGraph({token:t,...n&&{x:Ie()(n)}}),{dcId:i});if(a)return sp(a,s)}async function hp(e){let{chat:t,storyId:n,dcId:s}=e;const i=await $a(new pe.Api.stats.GetStoryStats({peer:jn(t.id,t.accessHash),id:n}),{dcId:s});if(i)return ep(i)}async function mp(e){let{chat:t,storyId:n,dcId:s,offset:i}=e;const a=await $a(new pe.Api.stats.GetStoryPublicForwards({peer:jn(t.id,t.accessHash),id:n,offset:i,limit:C}),{dcId:s});if(a)return Ke(a.chats),Ke(a.users),{publicForwards:np(a),users:a.users.map(js).filter(Boolean),chats:a.chats.map((e=>yn(e))).filter(Boolean),count:a.count,nextOffset:a.nextOffset}}var gp=n(21051),Ap=n.n(gp),yp=n(51369),wp=n.n(yp),Ip=n(35897),bp=n.n(Ip),Sp=n(48287).hp;function vp(e,t,n){var s;return(t="symbol"==typeof(s=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var s=n.call(e,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t))?s:s+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let Cp,Pp,Mp;class Tp{constructor(e){this.isOutgoing=e,vp(this,"state",void 0),vp(this,"seq",0),vp(this,"gA",void 0),vp(this,"gB",void 0),vp(this,"p",void 0),vp(this,"random",void 0),vp(this,"waitForState",void 0),vp(this,"resolveState",void 0),this.waitForState=new Promise((e=>{this.resolveState=e}))}async requestCall(e){let{p:t,g:n,random:s}=e;const i=_n().readBigIntFromBuffer(Sp.from(t),!1),a=_n().readBigIntFromBuffer(Sp.from(s),!1),o=_n().modExp(Ie()(n),a,i);this.gA=o,this.p=i,this.random=a;const r=await _n().sha256(_n().getByteArray(o));return Array.from(r)}acceptCall(e){let{p:t,g:n,random:s}=e;const i=_n().readBigIntFromBuffer(t,!1),a=_n().readBigIntFromBuffer(s,!1),o=_n().modExp(Ie()(n),a,i);return this.gB=o,this.p=i,this.random=a,Array.from(_n().getByteArray(o))}async confirmCall(e,t,n){this.isOutgoing?this.gB=_n().readBigIntFromBuffer(Sp.from(e),!1):this.gA=_n().readBigIntFromBuffer(Sp.from(e),!1);const s=_n().modExp(this.isOutgoing?this.gB:this.gA,this.random,this.p),i=await _n().sha1(_n().getByteArray(s)),a=_n().readBigIntFromBuffer(i.slice(-8).reverse(),!1),o=await async function(e,t,n,s){const i=await _n().sha256(Sp.concat([new Uint8Array(e),new Uint8Array(t)])),a=[],o=s.length-1;for(let e=0;e!==i.byteLength;e+=8){const t=(r=i.subarray(e,e+8),Ie()(r[0]).and(127).shiftLeft(56).or(Ie()(r[1]).shiftLeft(48)).or(Ie()(r[2]).shiftLeft(40)).or(Ie()(r[3]).shiftLeft(32)).or(Ie()(r[4]).shiftLeft(24)).or(Ie()(r[5]).shiftLeft(16)).or(Ie()(r[6]).shiftLeft(8)).or(Ie()(r[7]))).modPow(1,o).toJSNumber(),d=s[t],c=s[t+1]-d;a.push(String.fromCharCode(...n.subarray(d,d+c)))}var r;return a.join("")}(_n().getByteArray(s),_n().getByteArray(this.gA),t,n),r=new(Ap());return await r.setKey(_n().getByteArray(s)),this.state=new(bp())(r,new(wp()),!0,this.isOutgoing),this.resolveState(),{gA:Array.from(_n().getByteArray(this.gA)),keyFingerprint:a.toString(),emojis:o}}async encode(e){if(!this.state)return;const t=new Uint32Array(1);t[0]=this.seq++;const n=await this.state.encryptMessageData(Sp.concat([_n().convertToLittle(t),Sp.from(e)]));return Array.from(n)}async decode(e){if(!this.state)return this.waitForState.then((()=>this.decode(e)));const t=await this.state.decryptMessageData(Sp.from(e));return JSON.parse(t.toString())}}function Bp(e){Cp=new Tp(...e)}function Rp(){Cp=void 0}function Up(e){return Cp.encode(...e)}async function kp(e){if(Cp)return await Cp.decode(...e)}function Dp(e){return Cp.confirmCall(...e)}function Ep(e){return Cp.acceptCall(...e)}function xp(e){return Cp.requestCall(...e)}async function Np(e){let{stateHash:t,isFirstRequest:n=!1,isHidden:s=!1}=e;const i=n?s?{hidden:!0}:{}:{state:t,next:!0,...s&&{hidden:!0}},a=await $a(new pe.Api.stories.GetAllStories(i));if(!a)return;if(a instanceof pe.Api.stories.AllStoriesNotModified)return{state:a.state,stealthMode:di(a.stealthMode)};Ke(a.users),Ke(a.chats);const o=a.peerStories.reduce(((e,t)=>{const n=ge(t.peer),s=function(e){const t=ge(e.peer);return et(e.stories,(e=>[e.id,ai(t,e)]))}(t),{profileIds:i,orderedIds:a,lastUpdatedAt:o}=Object.values(s).reduce(((e,t)=>("isInProfile"in t&&t.isInProfile&&e.profileIds.push(t.id),"isDeleted"in t||(e.orderedIds.push(t.id),e.lastUpdatedAt=Math.max(t.date,e.lastUpdatedAt||0)),e)),{profileIds:[],orderedIds:[],lastUpdatedAt:void 0});return 0===a.length||(e[n]={byId:s,orderedIds:a,profileIds:i,lastUpdatedAt:o,lastReadId:t.maxReadId}),e}),{});return a.peerStories.forEach((e=>e.stories.forEach((t=>je(t,ge(e.peer)))))),{users:a.users.map(js).filter(Boolean),chats:a.chats.map((e=>yn(e))).filter(Boolean),peerStories:o,hasMore:a.hasMore,state:a.state,stealthMode:di(a.stealthMode)}}async function Hp(e){let{peer:t}=e;const n=await $a(new pe.Api.stories.GetPeerStories({peer:jn(t.id,t.accessHash)}));if(!n)return;Ke(n.users);const s=n.users.map(js).filter(Boolean),i=n.chats.map((e=>yn(e))).filter(Boolean),a=et(n.stories.stories,(e=>[e.id,ai(t.id,e)]));return n.stories.stories.forEach((e=>je(e,t.id))),{chats:i,users:s,stories:a,lastReadStoryId:n.stories.maxReadId}}function Gp(e){let{peer:t,offsetId:n}=e;return Zp({method:new pe.Api.stories.GetPinnedStories({peer:jn(t.id,t.accessHash),offsetId:n,limit:S}),peerId:t.id})}function Fp(e){let{peer:t,offsetId:n}=e;return Zp({method:new pe.Api.stories.GetStoriesArchive({peer:t&&jn(t.id,t.accessHash),offsetId:n,limit:S}),peerId:t.id})}async function _p(e){let{peer:t,ids:n}=e;const s=await $a(new pe.Api.stories.GetStoriesByID({peer:jn(t.id,t.accessHash),id:n}));if(!s)return;Ke(s.users),Ke(s.chats);const i=s.users.map(js).filter(Boolean),a=s.chats.map((e=>yn(e))).filter(Boolean),o=n.reduce(((e,n)=>{const i=s.stories.find((e=>{let{id:t}=e;return t===n}));return e[n]=i?ai(t.id,i):{id:n,peerId:t.id,isDeleted:!0},e}),{});return s.stories.forEach((e=>je(e,t.id))),{chats:a,users:i,pinnedIds:s.pinnedToTop,stories:o}}function qp(e){let{peer:t,storyId:n}=e;return $a(new pe.Api.stories.IncrementStoryViews({peer:jn(t.id,t.accessHash),id:[n]}))}function Op(e){let{peer:t,storyId:n}=e;return $a(new pe.Api.stories.ReadStories({peer:jn(t.id,t.accessHash),maxId:n}))}function jp(e){let{peer:t,storyId:n}=e;return $a(new pe.Api.stories.DeleteStories({peer:jn(t.id,t.accessHash),id:[n]}))}function Lp(e){let{peer:t,storyId:n,isInProfile:s}=e;return $a(new pe.Api.stories.TogglePinned({peer:jn(t.id,t.accessHash),id:[n],pinned:s}))}function Vp(e){let{peer:t,storyIds:n}=e;return $a(new pe.Api.stories.TogglePinnedToTop({peer:jn(t.id,t.accessHash),id:n}))}async function zp(e){let{peer:t,storyId:n,areJustContacts:s,query:i,areReactionsFirst:a,limit:o=S,offset:r=""}=e;const d=await $a(new pe.Api.stories.GetStoryViewsList({peer:jn(t.id,t.accessHash),id:n,justContacts:s,q:i,reactionsFirst:a,limit:o,offset:r}));if(d)return Ke(d.users),Ke(d.chats),{users:d.users.map(js).filter(Boolean),chats:d.chats.map((e=>yn(e))).filter(Boolean),views:d.views.map(ri).filter(Boolean),nextOffset:d.nextOffset,reactionsCount:d.reactionsCount,viewsCount:d.count}}async function Wp(e){let{peer:t,storyIds:n}=e;const s=await $a(new pe.Api.stories.GetStoriesViews({peer:jn(t.id,t.accessHash),id:n}));if(s?.views[0])return Ke(s.users),{views:oi(s.views[0]),users:s.users.map(js).filter(Boolean)}}async function Jp(e){let{peer:t,storyId:n}=e;const s=await $a(new pe.Api.stories.ExportStoryLink({peer:jn(t.id,t.accessHash),id:n}));if(s)return s.link}function Kp(e){let{peer:t,storyId:n,reason:s,description:i}=e;return $a(new pe.Api.stories.Report({peer:jn(t.id,t.accessHash),id:[n],reason:as(s),message:i}))}function $p(e){let{peer:t,id:n,privacy:s}=e;return $a(new pe.Api.stories.EditStory({peer:jn(t.id,t.accessHash),id:n,privacyRules:As(s)}),{shouldReturnTrue:!0})}function Qp(e){let{peer:t,isHidden:n}=e;return $a(new pe.Api.stories.TogglePeerStoriesHidden({peer:jn(t.id,t.accessHash),hidden:n}))}function Yp(e){let{peers:t}=e;return $a(new pe.Api.stories.GetPeerMaxIDs({id:t.map((e=>jn(e.id,e.accessHash)))}),{shouldIgnoreErrors:!0})}async function Zp(e){let{method:t,peerId:n}=e;const s=await $a(t);if(!s)return;Ke(s.users),Ke(s.chats);const i=s.users.map(js).filter(Boolean),a=s.chats.map((e=>yn(e))).filter(Boolean),o=et(s.stories,(e=>[e.id,ai(n,e)]));return s.stories.forEach((e=>je(e,n))),{users:i,chats:a,stories:o,pinnedIds:s.pinnedToTop}}function Xp(e){let{peer:t,storyId:n,reaction:s,shouldAddToRecent:i}=e;return $a(new pe.Api.stories.SendReaction({reaction:s?ps(s):new pe.Api.ReactionEmpty,peer:jn(t.id,t.accessHash),storyId:n,...i&&{addToRecent:!0}}),{shouldReturnTrue:!0})}function ef(e){let{isForPast:t,isForFuture:n}=e;return $a(new pe.Api.stories.ActivateStealthMode({past:t,future:n}),{shouldReturnTrue:!0})}function tf(e){if(e)return Object.values(e).map((e=>({id:e.id,title:e.title,amount:e.prices.reduce(((e,t)=>e+t.amount.toJSNumber()),0),prices:e.prices.map((e=>{let{label:t,amount:n}=e;return{label:t,amount:n.toJSNumber()}}))})))}function nf(e){const{photo:t}=e;if(t&&$e(t),e instanceof pe.Api.payments.PaymentReceiptStars){const{botId:n,currency:s,date:i,description:a,title:o,totalAmount:r,transactionId:d}=e;return t&&$e(t),{type:"stars",currency:s,botId:me(n,"user"),date:i,text:a,title:o,totalAmount:-r.toJSNumber(),transactionId:d,photo:t&&jt(t)}}const{invoice:n,info:s,shipping:i,currency:a,totalAmount:o,credentialsTitle:r,tipAmount:d,title:c,description:u}=e,{shippingAddress:l,phone:p,name:f}=s||{},{prices:h}=n,m=h.map((e=>{let{label:t,amount:n}=e;return{label:t,amount:n.toJSNumber()}}));let g,A;return i&&(g=i.prices.map((e=>{let{label:t,amount:n}=e;return{label:t,amount:n.toJSNumber()}})),A=i.title),{type:"regular",currency:a,prices:m,info:{shippingAddress:l,phone:p,name:f},totalAmount:o.toJSNumber(),credentialsTitle:r,shippingPrices:g,shippingMethod:A,tipAmount:d?d.toJSNumber():0,title:c,text:u,photo:t&&jt(t)}}function sf(e){if(e instanceof pe.Api.payments.PaymentFormStars){const{botId:t,formId:n}=e;return{type:"stars",botId:me(t,"user"),formId:String(n)}}const{formId:t,canSaveCredentials:n,passwordMissing:s,providerId:i,nativeProvider:a,nativeParams:o,savedInfo:r,invoice:d,savedCredentials:c,url:u,botId:l}=e,{test:p,nameRequested:f,phoneRequested:h,emailRequested:m,shippingAddressRequested:g,flexible:A,phoneToProvider:y,emailToProvider:w,currency:I,prices:b}=d,S=b.map((e=>{let{label:t,amount:n}=e;return{label:t,amount:n.toJSNumber()}})),{shippingAddress:v}=r||{},C=r?ve(r):void 0;C&&v&&(C.shippingAddress=ve(v));const P=o?JSON.parse(o.data):{};return{type:"regular",url:u,botId:me(l,"user"),canSaveCredentials:n,isPasswordMissing:s,formId:String(t),providerId:String(i),nativeProvider:a,savedInfo:C,invoiceContainer:{isTest:p,isNameRequested:f,isPhoneRequested:h,isEmailRequested:m,isShippingAddressRequested:g,isFlexible:A,shouldSendPhoneToProvider:y,shouldSendEmailToProvider:w,currency:I,prices:S},nativeParams:{needCardholderName:Boolean(P?.need_cardholder_name),needCountry:Boolean(P?.need_country),needZip:Boolean(P?.need_zip),publishableKey:P?.publishable_key,publicToken:P?.public_token,tokenizeUrl:P?.tokenize_url},savedCredentials:c&&(M=c,M.map((e=>{let{id:t,title:n}=e;return{id:t,title:n}})))};var M}function af(e){const{invoice:t,description:n,title:s,photo:i}=e,{test:a,currency:o,prices:r,recurring:d,termsUrl:c,maxTipAmount:u,suggestedTipAmounts:l}=t,p=r.reduce(((e,t)=>e+t.amount.toJSNumber()),0);return{mediaType:"invoice",text:n,title:s,photo:jt(i),amount:p,currency:o,isTest:a,isRecurring:d,termsUrl:c,maxTipAmount:u?.toJSNumber(),...l&&{suggestedTipAmounts:l.map((e=>e.toJSNumber()))}}}function of(e){const{statusText:t,statusEntities:n,videos:s,videoSections:i,periodOptions:a}=e;return{statusText:t,statusEntities:n.map(vt),videoSections:i,videos:s.map(Nt).filter(Boolean),options:a.map(rf)}}function rf(e){const{current:t,canPurchaseUpgrade:n,currency:s,amount:i,botUrl:a,months:o}=e;return{isCurrent:t,canPurchaseUpgrade:n,currency:s,amount:i.toJSNumber(),botUrl:a,months:o}}function df(e){const{userId:t,multiplier:n,expires:s,giveaway:i,gift:a}=e;return{userId:t&&me(t,"user"),multiplier:n,expires:s,isFromGiveaway:i,isGift:a}}function cf(e){const{date:t,expires:n,slot:s,cooldownUntilDate:i,peer:a}=e;return{date:t,expires:n,slot:s,cooldownUntil:i,chatId:a&&ge(a)}}function uf(e){const{date:t,fromId:n,months:s,giveawayMsgId:i,toId:a,usedDate:o,viaGiveaway:r}=e;return{date:t,months:s,toId:a&&me(a,"user"),fromId:n&&ge(n),usedAt:o,isFromGiveaway:r,giveawayMessageId:i}}function lf(e){const{amount:t,currency:n,months:s,users:i}=e;return{amount:t.toJSNumber(),currency:n,months:s,users:i}}function pf(e){return e instanceof pe.Api.StarsTransactionPeerAppStore?{type:"appStore"}:e instanceof pe.Api.StarsTransactionPeerPlayMarket?{type:"playMarket"}:e instanceof pe.Api.StarsTransactionPeerPremiumBot?{type:"premiumBot"}:e instanceof pe.Api.StarsTransactionPeerFragment?{type:"fragment"}:e instanceof pe.Api.StarsTransactionPeerAds?{type:"ads"}:e instanceof pe.Api.StarsTransactionPeer?{type:"peer",id:ge(e.peer)}:{type:"unsupported"}}function ff(e){const{date:t,id:n,peer:s,stars:i,description:a,photo:o,title:r,refund:d,extendedMedia:c,failed:u,msgId:l,pending:p}=e;o&&$e(o);const f=c?.map((e=>Dt(e))).filter(Boolean);return{id:n,date:t,peer:pf(s),stars:i.toJSNumber(),title:r,description:a,photo:o&&jt(o),isRefund:d,hasFailed:u,isPending:p,messageId:l,extendedMedia:f}}function hf(e){const{amount:t,currency:n,stars:s,extended:i}=e;return{amount:t.toJSNumber(),currency:n,stars:s.toJSNumber(),isExtended:i}}async function mf(e){let{inputInvoice:t,requestInfo:n,shouldSave:s}=e;const i=await $a(new pe.Api.payments.ValidateRequestedInfo({invoice:ls(t),save:s||void 0,info:ss(n)}));if(!i)return;const{id:a,shippingOptions:o}=i;return a?{id:a,shippingOptions:tf(o)}:void 0}async function gf(e){let{inputInvoice:t,formId:n,requestedInfoId:s,shippingOptionId:i,credentials:a,savedCredentialId:o,temporaryPassword:r,tipAmount:d}=e;const c=r&&o?new pe.Api.InputPaymentCredentialsSaved({id:o,tmpPassword:Ye(r)}):new pe.Api.InputPaymentCredentials({save:a.save,data:new pe.Api.DataJSON({data:JSON.stringify(a.data)})}),u=await $a(new pe.Api.payments.SendPaymentForm({formId:Ie()(n),invoice:ls(t),requestedInfoId:s,shippingOptionId:i,credentials:c,...d&&{tipAmount:Ie()(d)}}));return!!u&&(u instanceof pe.Api.payments.PaymentVerificationNeeded?void Pp({"@type":"updatePaymentVerificationNeeded",url:u.url}):(Ka(u.updates),Boolean(u)))}async function Af(e){let{formId:t,inputInvoice:n}=e;const s=await $a(new pe.Api.payments.SendStarsForm({formId:Ie()(t),invoice:ls(n)}));return!!s&&(s instanceof pe.Api.payments.PaymentVerificationNeeded?void(d&&console.warn("Unexpected PaymentVerificationNeeded in sendStarsForm")):(Ka(s.updates),Boolean(s)))}async function yf(e,t){const n=await $a(new pe.Api.payments.GetPaymentForm({invoice:ls(e),themeParams:t?os(t):void 0}));if(n)return n.photo&&$e(n.photo),Ke(n.users),{form:sf(n),invoice:af(n),users:n.users.map(js).filter(Boolean)}}async function wf(e,t){const n=await $a(new pe.Api.payments.GetPaymentReceipt({peer:jn(e.id,e.accessHash),msgId:t}));if(n)return Ke(n.users),{receipt:nf(n),users:n.users.map(js).filter(Boolean)}}async function If(){const e=await $a(new pe.Api.help.GetPremiumPromo);if(!e)return;Ke(e.users);const t=e.users.map(js).filter(Boolean);return e.videos.forEach((e=>{e instanceof pe.Api.Document&&(De.documents[e.id.toString()]=e)})),{promo:of(e),users:t}}async function bf(e){const t=await function(e,t){return function(e,t){return Oa.getTmpPassword(e,t)}(e,t)}(e);if(t)return"error"in t?t:{value:Qe(t.tmpPassword),validUntil:t.validUntil}}async function Sf(){const e=await $a(new pe.Api.premium.GetMyBoosts);if(e)return Ke(e.users),Ke(e.chats),{users:e.users.map(js).filter(Boolean),chats:e.chats.map((e=>yn(e))).filter(Boolean),boosts:e.myBoosts.map(cf)}}async function vf(e){let{chat:t,slots:n}=e;const s=await $a(new pe.Api.premium.ApplyBoost({peer:jn(t.id,t.accessHash),slots:n}));if(s)return Ke(s.users),Ke(s.chats),{users:s.users.map(js).filter(Boolean),chats:s.chats.map((e=>yn(e))).filter(Boolean),boosts:s.myBoosts.map(cf)}}async function Cf(e){let{chat:t}=e;const n=await $a(new pe.Api.premium.GetBoostsStatus({peer:jn(t.id,t.accessHash)}));if(n)return function(e){const{level:t,boostUrl:n,boosts:s,myBoost:i,currentLevelBoosts:a,nextLevelBoosts:o,premiumAudience:r,prepaidGiveaways:d}=e;return{level:t,currentLevelBoosts:a,boosts:s,hasMyBoost:Boolean(i),boostUrl:n,nextLevelBoosts:o,...r&&{premiumSubscribers:op(r)},...d&&{prepaidGiveaways:d.map(rp)}}}(n)}async function Pf(e){let{chat:t,isGifts:n,offset:s="",limit:i}=e;const a=await $a(new pe.Api.premium.GetBoostsList({peer:jn(t.id,t.accessHash),gifts:n||void 0,offset:s,limit:i}));if(!a)return;Ke(a.users);const o=a.users.map(js).filter(Boolean),r=a.boosts.map(df);return{count:a.count,boostList:r,users:o,nextOffset:a.nextOffset}}async function Mf(e){let{peer:t,messageId:n}=e;const s=await $a(new pe.Api.payments.GetGiveawayInfo({peer:jn(t.id,t.accessHash),msgId:n}));if(s)return function(e){if(e instanceof pe.Api.payments.GiveawayInfo){const{startDate:t,adminDisallowedChatId:n,disallowedCountry:s,joinedTooEarlyDate:i,participating:a,preparingResults:o}=e;return{type:"active",startDate:t,isParticipating:a,adminDisallowedChatId:n&&me(n,"channel"),disallowedCountry:s,joinedTooEarlyDate:i,isPreparingResults:o}}{const{activatedCount:t,finishDate:n,giftCodeSlug:s,winner:i,refunded:a,startDate:o,winnersCount:r}=e;return{type:"results",startDate:o,activatedCount:t,finishDate:n,winnersCount:r,giftCodeSlug:s,isRefunded:a,isWinner:i}}}(s)}async function Tf(e){let{slug:t}=e;const n=await $a(new pe.Api.payments.CheckGiftCode({slug:t}));if(n)return Ke(n.users),Ke(n.chats),{code:uf(n),users:n.users.map(js).filter(Boolean),chats:n.chats.map((e=>yn(e))).filter(Boolean)}}function Bf(e){let{slug:t}=e;return $a(new pe.Api.payments.ApplyGiftCode({slug:t}),{shouldReturnTrue:!0})}async function Rf(e){let{chat:t}=e;const n=await $a(new pe.Api.payments.GetPremiumGiftCodeOptions({boostPeer:t&&jn(t.id,t.accessHash)}));if(n)return n.map(lf)}function Uf(e){let{chat:t,giveawayId:n,paymentPurpose:s}=e;return $a(new pe.Api.payments.LaunchPrepaidGiveaway({peer:jn(t.id,t.accessHash),giveawayId:Ie()(n),purpose:us(s)}),{shouldReturnTrue:!0})}async function kf(){const e=await $a(new pe.Api.payments.GetStarsStatus({peer:new pe.Api.InputPeerSelf}));if(e)return{users:e.users.map(js).filter(Boolean),chats:e.chats.map((e=>yn(e))).filter(Boolean),nextOffset:e.nextOffset,history:e.history.map(ff),balance:e.balance.toJSNumber()}}async function Df(e){let{offset:t,isInbound:n,isOutbound:s}=e;const i=await $a(new pe.Api.payments.GetStarsTransactions({peer:new pe.Api.InputPeerSelf,offset:t,inbound:n,outbound:s}));if(i)return{users:i.users.map(js).filter(Boolean),chats:i.chats.map((e=>yn(e))).filter(Boolean),nextOffset:i.nextOffset,history:i.history.map(ff),balance:i.balance.toJSNumber()}}async function Ef(){const e=await $a(new pe.Api.payments.GetStarsTopupOptions);if(e)return e.map(hf)}async function xf(e){const t="username"in e?new pe.Api.InputCollectibleUsername({username:e.username}):new pe.Api.InputCollectiblePhone({phone:e.phone}),n=await $a(new pe.Api.fragment.GetCollectibleInfo({collectible:t}));if(n)return function(e){const{amount:t,currency:n,cryptoAmount:s,cryptoCurrency:i,purchaseDate:a,url:o}=e;return{amount:t.toJSNumber(),currency:n,cryptoAmount:s.toJSNumber(),cryptoCurrency:i,purchaseDate:a,url:o}}(n)}function Nf(e,t,n){var s;Mp=e,function(e){wi=e}(qf),function(e){Ti=e}(qf),function(e){No=e}(qf),function(e){Rd=e}(qf),function(e){Bc=e}(qf),function(e){Rc=e}(qf),function(e){kc=e}(qf),function(e){Ul=e}(qf),function(e){co=e}(qf),function(e){xo=e}(qf),function(e){Pp=e}(qf),n&&(s=n,Object.assign(ke,Ue(s))),async function(e,t){d&&console.log(">>> START INIT API"),qa=e;const{userAgent:n,platform:s,sessionData:i,isTest:r,isWebmSupported:c,maxBufferSize:u,webAuthToken:l,dcId:p,mockScenario:f,shouldForceHttpTransport:h,shouldAllowHttpTransport:m,shouldDebugExportedSenders:g,langCode:A}=t,y=new pe.sessions.CallbackSession(i,Ja);self.isWebmSupported=c,self.maxBufferSize=u,Oa=new(Li())(y,"739222","60d1e1063c72d4bc4cfdda99e8906f94",{deviceModel:navigator.userAgent||n||Na,systemVersion:s||Ha,appVersion:`10.9.9 ${a}`,useWSS:!0,additionalDcsDisabled:o,shouldDebugExportedSenders:g,shouldForceHttpTransport:h,shouldAllowHttpTransport:m,testServers:r,dcId:p,langCode:A}),Oa.addEventHandler(Ka,Ga);try{d&&(Ze("CONNECTING"),self.invoke=$a,self.GramJs=pe.Api);try{Oa.setPingCallback(la),await Oa.start({phoneNumber:Ri,phoneCode:Ui,password:ki,firstAndLastNames:Di,qrCode:Ei,onError:xi,initialMethod:"iOS"===s||"Android"===s?"phoneNumber":"qrCode",shouldThrowIfUnauthorized:Boolean(i),webAuthToken:l,webAuthTokenFailed:Bi,mockScenario:f})}catch(e){if(console.error(e),"Disconnect"!==e.message&&"Cannot send requests while disconnected"!==e.message)return void qa({"@type":"updateConnectionState",connectionState:"connectionStateBroken"})}d&&(console.log(">>> FINISH INIT API"),Ze("CONNECTED")),Ti(Ni("authorizationStateReady")),Ja(y.getSessionData()),qa({"@type":"updateApiReady"}),async function(e){Qi=e,await ga(),Zi=!0,ca()}($a),no()}catch(e){throw d&&Ze("CONNECTING ERROR",e),e}}(qf,t)}const Hf=de((function(e){if(!_f||e!==Ff)return;const t=_f;_f=void 0,t.forEach(Mp)}));let Gf,Ff,_f;function qf(e){_f?_f.push(e):_f=[e],Gf&&!x.has(e["@type"])||(Gf=re(Hf,E,!0),Ff=Math.random()),Gf(Ff)}const Of=oe.reduce(((e,t)=>(e[t]=console[t],e)),{});self.onerror=e=>{console.error(e),Wf({type:"unhandledError",error:{message:e.error.message||"Uncaught exception in worker"}})},self.addEventListener("unhandledrejection",(e=>{console.error(e),Wf({type:"unhandledError",error:{message:e.reason.message||"Uncaught rejection in worker"}})}));const jf=new Map;d&&console.log(">>> FINISH LOAD WORKER"),onmessage=async e=>{const{data:t}=e;switch(t.type){case"initApi":{const{messageId:e,args:n}=t;await Nf(zf,n[0],n[1]),e&&Wf({type:"methodResponse",messageId:e,response:!0});break}case"callMethod":{const{messageId:e,name:n,args:s,withCallback:a}=t;try{if(e&&a){const t=function(){for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];const i=n[n.length-1];Wf({type:"methodCallback",messageId:e,callbackArgs:n},i instanceof ArrayBuffer?i:void 0)};jf.set(e,t),s.push(t)}const t=await function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];return i[e](...n)}(n,...s);d&&"object"==typeof t&&"CONSTRUCTOR_ID"in t&&Ze("UNEXPECTED RESPONSE",`${n}: ${t.className}`);const{arrayBuffer:o}="object"==typeof t&&"arrayBuffer"in t&&t||{};e&&Wf({type:"methodResponse",messageId:e,response:t},o)}catch(t){d&&console.error(t),e&&Wf({type:"methodResponse",messageId:e,error:{message:t.message}})}e&&jf.delete(e);break}case"cancelProgress":{const e=jf.get(t.messageId);e&&(e.isCanceled=!0);break}case"ping":Wf({type:"methodResponse",messageId:t.messageId});break;case"toggleDebugMode":t.isEnabled?oe.forEach((e=>{console[e]=function(){for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];postMessage({type:"debugLog",level:e,args:JSON.parse(JSON.stringify(n,((e,t)=>"bigint"==typeof t?t.toString():t)))})}})):oe.forEach((e=>{console[e]=Of[e]}))}};let Lf=[];const Vf=de((()=>{const e=Lf;Lf=[],Wf({type:"updates",updates:e})}));function zf(e){d&&"updateUserStatus"!==e["@type"]&&"updateServerTimeOffset"!==e["@type"]&&Ze("UPDATE",e["@type"],e),Lf.push(e),Vf()}function Wf(e,t){t?postMessage(e,[t]):postMessage(e)}},97335:(e,t,n)=>{"use strict";n.d(t,{qZ:()=>o,C7:()=>s,l3:()=>i,K1:()=>a});let s=function(e){return e.Bold="MessageEntityBold",e.Blockquote="MessageEntityBlockquote",e.BotCommand="MessageEntityBotCommand",e.Cashtag="MessageEntityCashtag",e.Code="MessageEntityCode",e.Email="MessageEntityEmail",e.Hashtag="MessageEntityHashtag",e.Italic="MessageEntityItalic",e.MentionName="MessageEntityMentionName",e.Mention="MessageEntityMention",e.Phone="MessageEntityPhone",e.Pre="MessageEntityPre",e.Strike="MessageEntityStrike",e.TextUrl="MessageEntityTextUrl",e.Url="MessageEntityUrl",e.Underline="MessageEntityUnderline",e.Spoiler="MessageEntitySpoiler",e.CustomEmoji="MessageEntityCustomEmoji",e.Unknown="MessageEntityUnknown",e}({});const i=-1,a="MESSAGE_DELETED";let o=function(e){return e[e.BlobUrl=0]="BlobUrl",e[e.Progressive=1]="Progressive",e[e.DownloadUrl=2]="DownloadUrl",e[e.Text=3]="Text",e}({})},56215:(e,t,n)=>{var s=n(48287).hp;const{constructors:i}=n(43355),a=s.from("ffd8ffe000104a46494600010100000100010000ffdb004300281c1e231e19282321232d2b28303c64413c37373c7b585d4964918099968f808c8aa0b4e6c3a0aadaad8a8cc8ffcbdaeef5ffffff9bc1fffffffaffe6fdfff8ffdb0043012b2d2d3c353c76414176f8a58ca5f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8ffc00011080000000003012200021101031101ffc4001f0000010501010101010100000000000000000102030405060708090a0bffc400b5100002010303020403050504040000017d01020300041105122131410613516107227114328191a1082342b1c11552d1f02433627282090a161718191a25262728292a3435363738393a434445464748494a535455565758595a636465666768696a737475767778797a838485868788898a92939495969798999aa2a3a4a5a6a7a8a9aab2b3b4b5b6b7b8b9bac2c3c4c5c6c7c8c9cad2d3d4d5d6d7d8d9dae1e2e3e4e5e6e7e8e9eaf1f2f3f4f5f6f7f8f9faffc4001f0100030101010101010101010000000000000102030405060708090a0bffc400b51100020102040403040705040400010277000102031104052131061241510761711322328108144291a1b1c109233352f0156272d10a162434e125f11718191a262728292a35363738393a434445464748494a535455565758595a636465666768696a737475767778797a82838485868788898a92939495969798999aa2a3a4a5a6a7a8a9aab2b3b4b5b6b7b8b9bac2c3c4c5c6c7c8c9cad2d3d4d5d6d7d8d9dae2e3e4e5e6e7e8e9eaf2f3f4f5f6f7f8f9faffda000c03010002110311003f00","hex"),o=s.from("ffd9","hex");function r(e,t){throw new Error(`Cannot cast ${e.className} to any kind of ${t}`)}e.exports={getMessageId:function(e){if(void 0!==e){if("number"==typeof e)return e;if(2030045667===e.SUBCLASS_OF_ID)return e.id;throw new Error(`Invalid message type: ${e.constructor.name}`)}},getInputPeer:function e(t){let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(void 0===t.SUBCLASS_OF_ID){if(n&&"inputEntity"in t)return t.inputEntity;if("entity"in t)return e(t.entity);r(t,"InputPeer")}if(3374092470===t.SUBCLASS_OF_ID)return t;if(t instanceof i.User){if(t.isSelf&&n)return new i.InputPeerSelf;if(void 0===t.accessHash&&s)throw new Error("User without accessHash or min info cannot be input");return new i.InputPeerUser({userId:t.id,accessHash:t.accessHash})}if(t instanceof i.Chat||t instanceof i.ChatEmpty||t instanceof i.ChatForbidden)return new i.InputPeerChat({chatId:t.id});if(t instanceof i.Channel){if(void 0===t.accessHash&&s)throw new TypeError("Channel without accessHash or min info cannot be input");return new i.InputPeerChannel({channelId:t.id,accessHash:t.accessHash})}return t instanceof i.ChannelForbidden?new i.InputPeerChannel({channelId:t.id,accessHash:t.accessHash}):t instanceof i.InputUser?new i.InputPeerUser({userId:t.userId,accessHash:t.accessHash}):t instanceof i.InputChannel?new i.InputPeerChannel({channelId:t.channelId,accessHash:t.accessHash}):t instanceof i.UserEmpty?new i.InputPeerEmpty:t instanceof i.UserFull?e(t.user):t instanceof i.ChatFull?new i.InputPeerChat({chatId:t.id}):t instanceof i.PeerChat?new i.InputPeerChat(t.chatId):void r(t,"InputPeer")},getDisplayName:function(e){return e instanceof i.User?e.lastName&&e.firstName?`${e.firstName} ${e.lastName}`:e.firstName?e.firstName:e.lastName?e.lastName:"":e instanceof i.Chat||e instanceof i.Channel?e.title:""},getDownloadPartSize:function(e){if(e<=65536)return 64;if(e<=104857600)return 128;if(e<=786432e3)return 256;if(e<=2097152e3)return 512;if(e<=4194304e3)return 1024;throw new Error("File size too large")},getUploadPartSize:function(e){if(e<=104857600)return 128;if(e<=786432e3)return 256;if(e<=2097152e3)return 512;if(e<=4194304e3)return 512;throw new Error("File size too large")},strippedPhotoToJpg:function(e){if(e.length<3||1!==e[0])return e;const t=s.from(a);return t[164]=e[1],t[166]=e[2],s.concat([t,e.slice(3),o])},getDC:function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];switch(e){case 1:return{id:1,ipAddress:`zws1${t?"-1":""}.web.telegram.org`,port:443};case 2:return{id:2,ipAddress:`zws2${t?"-1":""}.web.telegram.org`,port:443};case 3:return{id:3,ipAddress:`zws3${t?"-1":""}.web.telegram.org`,port:443};case 4:return{id:4,ipAddress:`zws4${t?"-1":""}.web.telegram.org`,port:443};case 5:return{id:5,ipAddress:`zws5${t?"-1":""}.web.telegram.org`,port:443};default:throw new Error(`Cannot find the DC with the ID of ${e}`)}}}},98221:(e,t,n)=>{"use strict";n.d(t,{A:()=>s}),String.fromCharCode(8205);const s=/(?:\ud83c[\udd70\udd71\udd7e\udd7f]\ufe0f)|(?:\ud83d\udc68\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83e\uddd1\ud83c[\udffc-\udfff]|\ud83e\uddd1\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83e\uddd1\ud83c[\udffb\udffd-\udfff]|\ud83e\uddd1\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83e\uddd1\ud83c[\udffb\udffc\udffe\udfff]|\ud83e\uddd1\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83e\uddd1\ud83c[\udffb-\udffd\udfff]|\ud83e\uddd1\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83e\uddd1\ud83c[\udffb-\udffe]|\ud83d\udc68\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffc-\udfff]|\ud83d\udc68\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffd-\udfff]|\ud83d\udc68\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffc\udffe\udfff]|\ud83d\udc68\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffd\udfff]|\ud83d\udc68\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffe]|\ud83d\udc69\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffc-\udfff]|\ud83d\udc69\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffc-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffd-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb\udffd-\udfff]|\ud83d\udc69\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffc\udffe\udfff]|\ud83d\udc69\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb\udffc\udffe\udfff]|\ud83d\udc69\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffd\udfff]|\ud83d\udc69\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb-\udffd\udfff]|\ud83d\udc69\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffe]|\ud83d\udc69\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb-\udffe]|\ud83e\uddd1\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83e\uddd1\ud83c[\udffc-\udfff]|\ud83e\uddd1\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83e\uddd1\ud83c[\udffb\udffd-\udfff]|\ud83e\uddd1\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83e\uddd1\ud83c[\udffb\udffc\udffe\udfff]|\ud83e\uddd1\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83e\uddd1\ud83c[\udffb-\udffd\udfff]|\ud83e\uddd1\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83e\uddd1\ud83c[\udffb-\udffe]|\ud83e\uddd1\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83d\udc68\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68|\ud83d\udc69\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d[\udc68\udc69]|\ud83e\udef1\ud83c\udffb\u200d\ud83e\udef2\ud83c[\udffc-\udfff]|\ud83e\udef1\ud83c\udffc\u200d\ud83e\udef2\ud83c[\udffb\udffd-\udfff]|\ud83e\udef1\ud83c\udffd\u200d\ud83e\udef2\ud83c[\udffb\udffc\udffe\udfff]|\ud83e\udef1\ud83c\udffe\u200d\ud83e\udef2\ud83c[\udffb-\udffd\udfff]|\ud83e\udef1\ud83c\udfff\u200d\ud83e\udef2\ud83c[\udffb-\udffe]|\ud83d\udc68\u200d\u2764\ufe0f\u200d\ud83d\udc68|\ud83d\udc69\u200d\u2764\ufe0f\u200d\ud83d[\udc68\udc69]|\ud83e\uddd1\u200d\ud83e\udd1d\u200d\ud83e\uddd1|\ud83d\udc6b\ud83c[\udffb-\udfff]|\ud83d\udc6c\ud83c[\udffb-\udfff]|\ud83d\udc6d\ud83c[\udffb-\udfff]|\ud83d\udc8f\ud83c[\udffb-\udfff]|\ud83d\udc91\ud83c[\udffb-\udfff]|\ud83e\udd1d\ud83c[\udffb-\udfff]|\ud83d[\udc6b-\udc6d\udc8f\udc91]|\ud83e\udd1d)|(?:\ud83c\udfc3|\ud83d\udeb6|\ud83e\uddce)(?:\ud83c[\udffb-\udfff])?(?:\u200d[\u2640\u2642]\ufe0f)?(?:\u200d\u27a1\ufe0f)|(?:\ud83d[\udc68\udc69]|\ud83e\uddd1)(?:\ud83c[\udffb-\udfff])?\u200d(?:\ud83e[\uddaf\uddbc\uddbd])(?:\u200d\u27a1\ufe0f)|(?:\ud83d[\udc68\udc69]|\ud83e\uddd1)(?:\ud83c[\udffb-\udfff])?\u200d(?:\u2695\ufe0f|\u2696\ufe0f|\u2708\ufe0f|\ud83c[\udf3e\udf73\udf7c\udf84\udf93\udfa4\udfa8\udfeb\udfed]|\ud83d[\udcbb\udcbc\udd27\udd2c\ude80\ude92]|\ud83e[\uddaf\uddaf-\uddb3\uddbc\uddbc\uddbd\uddbd])|(?:\ud83c[\udfcb\udfcc]|\ud83d[\udd74\udd75]|\u26f9)((?:\ud83c[\udffb-\udfff]|\ufe0f)\u200d[\u2640\u2642]\ufe0f)|(?:\ud83c[\udfc3\udfc3\udfc4\udfca]|\ud83d[\udc6e\udc70\udc71\udc73\udc77\udc81\udc82\udc86\udc87\ude45-\ude47\ude4b\ude4d\ude4e\udea3\udeb4-\udeb6\udeb6]|\ud83e[\udd26\udd35\udd37-\udd39\udd3d\udd3e\uddb8\uddb9\uddcd\uddce\uddce\uddcf\uddd4\uddd6-\udddd])(?:\ud83c[\udffb-\udfff])?\u200d[\u2640\u2642]\ufe0f|(?:\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83e\uddd1\u200d\ud83e\uddd1\u200d\ud83e\uddd2\u200d\ud83e\uddd2|\ud83d\udc68\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83e\uddd1\u200d\ud83e\uddd1\u200d\ud83e\uddd2|\ud83e\uddd1\u200d\ud83e\uddd2\u200d\ud83e\uddd2|\ud83c\udff3\ufe0f\u200d\u26a7\ufe0f|\ud83c\udff3\ufe0f\u200d\ud83c\udf08|\ud83d\ude36\u200d\ud83c\udf2b\ufe0f|\u26d3\ufe0f\u200d\ud83d\udca5|\u2764\ufe0f\u200d\ud83d\udd25|\u2764\ufe0f\u200d\ud83e\ude79|\ud83c\udf44\u200d\ud83d\udfeb|\ud83c\udf4b\u200d\ud83d\udfe9|\ud83c\udff4\u200d\u2620\ufe0f|\ud83d\udc15\u200d\ud83e\uddba|\ud83d\udc26\u200d\ud83d\udd25|\ud83d\udc3b\u200d\u2744\ufe0f|\ud83d\udc41\u200d\ud83d\udde8|\ud83d\udc68\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83d\udc6f\u200d\u2640\ufe0f|\ud83d\udc6f\u200d\u2642\ufe0f|\ud83d\ude2e\u200d\ud83d\udca8|\ud83d\ude35\u200d\ud83d\udcab|\ud83d\ude42\u200d\u2194\ufe0f|\ud83d\ude42\u200d\u2195\ufe0f|\ud83e\udd3c\u200d\u2640\ufe0f|\ud83e\udd3c\u200d\u2642\ufe0f|\ud83e\uddd1\u200d\ud83e\uddd2|\ud83e\uddde\u200d\u2640\ufe0f|\ud83e\uddde\u200d\u2642\ufe0f|\ud83e\udddf\u200d\u2640\ufe0f|\ud83e\udddf\u200d\u2642\ufe0f|\ud83d\udc08\u200d\u2b1b|\ud83d\udc26\u200d\u2b1b)|[#*0-9]\ufe0f?\u20e3|(?:[©®\u2122\u265f]\ufe0f)|(?:\ud83c[\udc04\ude02\ude1a\ude2f\ude37\udf21\udf24-\udf2c\udf36\udf7d\udf96\udf97\udf99-\udf9b\udf9e\udf9f\udfcd\udfce\udfd4-\udfdf\udff3\udff5\udff7]|\ud83d[\udc3f\udc41\udcfd\udd49\udd4a\udd6f\udd70\udd73\udd76-\udd79\udd87\udd8a-\udd8d\udda5\udda8\uddb1\uddb2\uddbc\uddc2-\uddc4\uddd1-\uddd3\udddc-\uddde\udde1\udde3\udde8\uddef\uddf3\uddfa\udecb\udecd-\udecf\udee0-\udee5\udee9\udef0\udef3]|[\u203c\u2049\u2139\u2194-\u2199\u21a9\u21aa\u231a\u231b\u2328\u23cf\u23ed-\u23ef\u23f1\u23f2\u23f8-\u23fa\u24c2\u25aa\u25ab\u25b6\u25c0\u25fb-\u25fe\u2600-\u2604\u260e\u2611\u2614\u2615\u2618\u2620\u2622\u2623\u2626\u262a\u262e\u262f\u2638-\u263a\u2640\u2642\u2648-\u2653\u2660\u2663\u2665\u2666\u2668\u267b\u267f\u2692-\u2697\u2699\u269b\u269c\u26a0\u26a1\u26a7\u26aa\u26ab\u26b0\u26b1\u26bd\u26be\u26c4\u26c5\u26c8\u26cf\u26d1\u26d3\u26d4\u26e9\u26ea\u26f0-\u26f5\u26f8\u26fa\u26fd\u2702\u2708\u2709\u270f\u2712\u2714\u2716\u271d\u2721\u2733\u2734\u2744\u2747\u2757\u2763\u2764\u27a1\u2934\u2935\u2b05-\u2b07\u2b1b\u2b1c\u2b50\u2b55\u3030\u303d\u3297\u3299])(?:\ufe0f|(?!\ufe0e))|(?:(?:\ud83c[\udfcb\udfcc]|\ud83d[\udd74\udd75\udd90]|\ud83e\udef0|[\u261d\u26f7\u26f9\u270c\u270d])(?:\ufe0f|(?!\ufe0e))|(?:\ud83c[\udf85\udfc2-\udfc4\udfc7\udfca]|\ud83d[\udc42\udc43\udc46-\udc50\udc66-\udc69\udc6e\udc70-\udc78\udc7c\udc81-\udc83\udc85-\udc87\udcaa\udd7a\udd95\udd96\ude45-\ude47\ude4b-\ude4f\udea3\udeb4-\udeb6\udec0\udecc]|\ud83e[\udd0c\udd0f\udd18-\udd1c\udd1e\udd1f\udd26\udd30-\udd39\udd3d\udd3e\udd77\uddb5\uddb6\uddb8\uddb9\uddbb\uddcd-\uddcf\uddd1-\udddd\udec3-\udec5\udef1-\udef8]|[\u270a\u270b]))(?:\ud83c[\udffb-\udfff])?|(?:\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc65\udb40\udc6e\udb40\udc67\udb40\udc7f|\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc73\udb40\udc63\udb40\udc74\udb40\udc7f|\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc77\udb40\udc6c\udb40\udc73\udb40\udc7f|\ud83c\udde6\ud83c[\udde8-\uddec\uddee\uddf1\uddf2\uddf4\uddf6-\uddfa\uddfc\uddfd\uddff]|\ud83c\udde7\ud83c[\udde6\udde7\udde9-\uddef\uddf1-\uddf4\uddf6-\uddf9\uddfb\uddfc\uddfe\uddff]|\ud83c\udde8\ud83c[\udde6\udde8\udde9\uddeb-\uddee\uddf0-\uddf5\uddf7\uddfa-\uddff]|\ud83c\udde9\ud83c[\uddea\uddec\uddef\uddf0\uddf2\uddf4\uddff]|\ud83c\uddea\ud83c[\udde6\udde8\uddea\uddec\udded\uddf7-\uddfa]|\ud83c\uddeb\ud83c[\uddee-\uddf0\uddf2\uddf4\uddf7]|\ud83c\uddec\ud83c[\udde6\udde7\udde9-\uddee\uddf1-\uddf3\uddf5-\uddfa\uddfc\uddfe]|\ud83c\udded\ud83c[\uddf0\uddf2\uddf3\uddf7\uddf9\uddfa]|\ud83c\uddee\ud83c[\udde8-\uddea\uddf1-\uddf4\uddf6-\uddf9]|\ud83c\uddef\ud83c[\uddea\uddf2\uddf4\uddf5]|\ud83c\uddf0\ud83c[\uddea\uddec-\uddee\uddf2\uddf3\uddf5\uddf7\uddfc\uddfe\uddff]|\ud83c\uddf1\ud83c[\udde6-\udde8\uddee\uddf0\uddf7-\uddfb\uddfe]|\ud83c\uddf2\ud83c[\udde6\udde8-\udded\uddf0-\uddff]|\ud83c\uddf3\ud83c[\udde6\udde8\uddea-\uddec\uddee\uddf1\uddf4\uddf5\uddf7\uddfa\uddff]|\ud83c\uddf4\ud83c\uddf2|\ud83c\uddf5\ud83c[\udde6\uddea-\udded\uddf0-\uddf3\uddf7-\uddf9\uddfc\uddfe]|\ud83c\uddf6\ud83c\udde6|\ud83c\uddf7\ud83c[\uddea\uddf4\uddf8\uddfa\uddfc]|\ud83c\uddf8\ud83c[\udde6-\uddea\uddec-\uddf4\uddf7-\uddf9\uddfb\uddfd-\uddff]|\ud83c\uddf9\ud83c[\udde6\udde8\udde9\uddeb-\udded\uddef-\uddf4\uddf7\uddf9\uddfb\uddfc\uddff]|\ud83c\uddfa\ud83c[\udde6\uddec\uddf2\uddf3\uddf8\uddfe\uddff]|\ud83c\uddfb\ud83c[\udde6\udde8\uddea\uddec\uddee\uddf3\uddfa]|\ud83c\uddfc\ud83c[\uddeb\uddf8]|\ud83c\uddfd\ud83c\uddf0|\ud83c\uddfe\ud83c[\uddea\uddf9]|\ud83c\uddff\ud83c[\udde6\uddf2\uddfc]|\ud83c[\udccf\udd8e\udd91-\udd9a\udde6-\uddff\ude01\ude32-\ude36\ude38-\ude3a\ude50\ude51\udf00-\udf20\udf2d-\udf35\udf37-\udf7c\udf7e-\udf84\udf86-\udf93\udfa0-\udfc1\udfc5\udfc6\udfc8\udfc9\udfcf-\udfd3\udfe0-\udff0\udff4\udff8-\udfff]|\ud83d[\udc00-\udc3e\udc40\udc44\udc45\udc51-\udc65\udc6a\udc6f\udc79-\udc7b\udc7d-\udc80\udc84\udc88-\udc8e\udc90\udc92-\udca9\udcab-\udcfc\udcff-\udd3d\udd4b-\udd4e\udd50-\udd67\udda4\uddfb-\ude44\ude48-\ude4a\ude80-\udea2\udea4-\udeb3\udeb7-\udebf\udec1-\udec5\uded0-\uded2\uded5-\uded7\udedc-\udedf\udeeb\udeec\udef4-\udefc\udfe0-\udfeb\udff0]|\ud83e[\udd0d\udd0e\udd10-\udd17\udd20-\udd25\udd27-\udd2f\udd3a\udd3c\udd3f-\udd45\udd47-\udd76\udd78-\uddb4\uddb7\uddba\uddbc-\uddcc\uddd0\uddde-\uddff\ude70-\ude7c\ude80-\ude88\ude90-\udebd\udebf-\udec2\udece-\udedb\udee0-\udee8]|[\u23e9-\u23ec\u23f0\u23f3\u267e\u26ce\u2705\u2728\u274c\u274e\u2753-\u2755\u2795-\u2797\u27b0\u27bf\ue50a])|\ufe0f/g},9705:(e,t,n)=>{"use strict";function s(e,t,n){var s;return(t="symbol"==typeof(s=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var s=n.call(e,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t))?s:s+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,{A:()=>i});class i{constructor(){s(this,"promise",void 0),s(this,"reject",void 0),s(this,"resolve",void 0),this.promise=new Promise(((e,t)=>{this.reject=t,this.resolve=e}))}static resolved(e){const t=new i;return t.resolve(e),t}}},24282:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var s=n(98221);const i=[[/\u{1f3f3}\u200d\u{1f308}/gu,"🏳️‍🌈"],[/\u{1f3f3}\u200d\u26a7\ufe0f?/gu,"🏳️‍⚧️"],[/\u26d3\u200d\u{1f4a5}/gu,"⛓️‍💥"],[/\u200d([\u2640\u2642])(?!\ufe0f)/gu,"‍$1️"]];function a(e){if(!e.match(s.A))return e;for(const[t,n]of i)e=e.replace(t,n);return e}},17237:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var s=n(98221),i=n(24282);const a=new RegExp(`^(?:${s.A.source})+$`,""),o=e=>{const t=(0,i.A)(e).split("\n"),n=t.join("");if(n.length>800)return!1;if(!Boolean(n.match(a)))return!1;const o=t.map((e=>{let t=0;for(;s.A.exec(e);)if(t++,t>100)return s.A.lastIndex=0,-1;return t}));let r=t.length;for(let e=0;e<o.length;e++){if(-1===o[e])return!1;o[e]>r&&(r=o[e])}return r}},77783:(e,t,n)=>{"use strict";function s(e){return new Promise(((t,n)=>{e.oncomplete=e.onsuccess=()=>t(e.result),e.onabort=e.onerror=()=>n(e.error)}))}function i(e,t){const n=indexedDB.open(e);n.onupgradeneeded=()=>n.result.createObjectStore(t);const i=s(n);return(e,n)=>i.then((s=>n(s.transaction(t,e).objectStore(t))))}let a;function o(){return a||(a=i("keyval-store","keyval")),a}function r(e,t=o()){return t("readonly",(t=>s(t.get(e))))}function d(e,t,n=o()){return n("readwrite",(n=>(n.put(t,e),s(n.transaction))))}function c(e,t=o()){return t("readwrite",(t=>(e.forEach((e=>t.put(e[1],e[0]))),s(t.transaction))))}function u(e,t=o()){return t("readonly",(t=>Promise.all(e.map((e=>s(t.get(e)))))))}function l(e,t,n=o()){return n("readwrite",(n=>new Promise(((i,a)=>{n.get(e).onsuccess=function(){try{n.put(t(this.result),e),i(s(n.transaction))}catch(e){a(e)}}}))))}function p(e,t=o()){return t("readwrite",(t=>(t.delete(e),s(t.transaction))))}function f(e,t=o()){return t("readwrite",(t=>(e.forEach((e=>t.delete(e))),s(t.transaction))))}function h(e=o()){return e("readwrite",(e=>(e.clear(),s(e.transaction))))}function m(e,t){return e.openCursor().onsuccess=function(){this.result&&(t(this.result),this.result.continue())},s(e.transaction)}function g(e=o()){return e("readonly",(e=>{if(e.getAllKeys)return s(e.getAllKeys());const t=[];return m(e,(e=>t.push(e.key))).then((()=>t))}))}function A(e=o()){return e("readonly",(e=>{if(e.getAll)return s(e.getAll());const t=[];return m(e,(e=>t.push(e.value))).then((()=>t))}))}function y(e=o()){return e("readonly",(t=>{if(t.getAll&&t.getAllKeys)return Promise.all([s(t.getAllKeys()),s(t.getAll())]).then((([e,t])=>e.map(((e,n)=>[e,t[n]]))));const n=[];return e("readonly",(e=>m(e,(e=>n.push([e.key,e.value]))).then((()=>n))))}))}n.r(t),n.d(t,{clear:()=>h,createStore:()=>i,del:()=>p,delMany:()=>f,entries:()=>y,get:()=>r,getMany:()=>u,keys:()=>g,promisifyRequest:()=>s,set:()=>d,setMany:()=>c,update:()=>l,values:()=>A})}},s={};function i(e){var t=s[e];if(void 0!==t)return t.exports;var a=s[e]={id:e,loaded:!1,exports:{}};return n[e].call(a.exports,a,a.exports,i),a.loaded=!0,a.exports}i.m=n,i.x=()=>{var e=i.O(void 0,[7784,8287,4486,5985],(()=>i(28480)));return i.O(e)},e=[],i.O=(t,n,s,a)=>{if(!n){var o=1/0;for(u=0;u<e.length;u++){for(var[n,s,a]=e[u],r=!0,d=0;d<n.length;d++)(!1&a||o>=a)&&Object.keys(i.O).every((e=>i.O[e](n[d])))?n.splice(d--,1):(r=!1,a<o&&(o=a));if(r){e.splice(u--,1);var c=s();void 0!==c&&(t=c)}}return t}a=a||0;for(var u=e.length;u>0&&e[u-1][2]>a;u--)e[u]=e[u-1];e[u]=[n,s,a]},i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.f={},i.e=e=>Promise.all(Object.keys(i.f).reduce(((t,n)=>(i.f[n](e,t),t)),[])),i.u=e=>e+"."+{4486:"41de98710abe2aeee0bc",5985:"1cf8b1817b530580885d",7784:"4e167a928464165e6412",8287:"9cf863b4d9b47c10d271"}[e]+".js",i.miniCssF=e=>{},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{var e;i.g.importScripts&&(e=i.g.location+"");var t=i.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var n=t.getElementsByTagName("script");if(n.length)for(var s=n.length-1;s>-1&&(!e||!/^http(s?):/.test(e));)e=n[s--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),i.p=e})(),(()=>{var e={1112:1};i.f.i=(t,n)=>{e[t]||importScripts(i.p+i.u(t))};var t=self.webpackChunktelegram_t=self.webpackChunktelegram_t||[],n=t.push.bind(t);t.push=t=>{var[s,a,o]=t;for(var r in a)i.o(a,r)&&(i.m[r]=a[r]);for(o&&o(i);s.length;)e[s.pop()]=1;n(t)}})(),t=i.x,i.x=()=>Promise.all([7784,8287,4486,5985].map(i.e,i)).then(t),i.x()})();
//# sourceMappingURL=1112.928312d4878e394878d1.js.map